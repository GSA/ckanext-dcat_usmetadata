(this["webpackJsonpmetadata-app"]=this["webpackJsonpmetadata-app"]||[]).push([[0],{105:function(e,a,t){},106:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(68),s=t.n(l),c=(t(79),t(7)),i=t(6),o=t(73);function u(){return(u=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function m(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var d=n.a.createElement("g",null,n.a.createElement("g",null,n.a.createElement("path",{d:"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256    s26.629,132.667,74.98,181.02C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98    C485.371,388.667,512,324.38,512,256S485.371,123.333,437.02,74.98z M256,70c30.327,0,55,24.673,55,55c0,30.327-24.673,55-55,55    c-30.327,0-55-24.673-55-55C201,94.673,225.673,70,256,70z M326,420H186v-30h30V240h-30v-30h110v180h30V420z",fill:"#0050D8"}))),p=n.a.createElement("g",null),h=n.a.createElement("g",null),g=n.a.createElement("g",null),f=n.a.createElement("g",null),v=n.a.createElement("g",null),E=n.a.createElement("g",null),b=n.a.createElement("g",null),y=n.a.createElement("g",null),N=n.a.createElement("g",null),w=n.a.createElement("g",null),_=n.a.createElement("g",null),O=n.a.createElement("g",null),S=n.a.createElement("g",null),x=n.a.createElement("g",null),T=n.a.createElement("g",null),R=function(e){var a=e.svgRef,t=e.title,r=m(e,["svgRef","title"]);return n.a.createElement("svg",u({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",width:"512px",height:"512px",ref:a},r),t?n.a.createElement("title",null,t):null,d,p,h,g,f,v,E,b,y,N,w,_,O,S,x,T)},C=n.a.forwardRef((function(e,a){return n.a.createElement(R,u({svgRef:a},e))})),I=(t.p,t(58),function(e){var a=Object(r.useState)(!1),t=Object(c.a)(a,2),l=t[0],s=t[1],u=function(){return s(!l)},m=e.name,d=e.label,p=e.children,h=e.helptext,g=e.required,f=e.id,v=e.errors,E=e.disabled,b=e.infoText,y=e.onClick,N=Object(o.a)(e,["name","label","children","helptext","required","id","errors","disabled","infoText","onClick"]),w=v||{},_=N.choices||[],O=N.type||"string",S="";return S=E?"disabled":"",n.a.createElement("div",{className:"wrapper"},n.a.createElement("label",{className:"usa-label",htmlFor:f},d,d&&g&&n.a.createElement("span",null,"*"),b&&n.a.createElement("div",{className:"tooltip ".concat(l?"show":"")},n.a.createElement(C,{height:"20px",width:"20px",style:{marginLeft:".5em"},tabIndex:0,onClick:function(){return u()},onKeyUp:function(e){13===e.keyCode&&u()}}),n.a.createElement("span",{className:"tooltiptext"},n.a.createElement("span",{tabIndex:0,className:"close",onClick:function(){return s(!1)},role:"button",onKeyUp:function(e){13===e.keyCode&&s(!1)}},n.a.createElement("span",{className:"close-tag"},"\xd7")),n.a.createElement("h3",null,d),n.a.createElement("p",null,b)))),w[m]&&n.a.createElement("span",{className:"error-msg"},w[m]),n.a.createElement("div",{className:"usa-helptext ".concat(S)},h),y?n.a.createElement("button",{className:"clear-button usa-button usa-button--secondary",onClick:y,type:"button"},"Remove"):"",{string:n.a.createElement(i.a,Object.assign({className:"usa-input ".concat(S," ")+"".concat(w[m]&&"field-error"," ")+"".concat(y&&"has-clear-button"),disabled:E,id:f,name:m},N)),url:n.a.createElement(i.a,Object.assign({className:"usa-input ".concat(S," ").concat(y&&"has-clear-button"),disabled:E,id:f,name:m},N)),select:n.a.createElement(i.a,Object.assign({},N,{id:f,name:m,className:"usa-select ".concat(S," ").concat(w[m]?"field-error":""),component:"select"}),n.a.createElement("option",{value:""},"-Select-"),_.map((function(e){return n.a.createElement("option",{value:e,key:e},e)}))),radio:n.a.createElement("div",null,n.a.createElement(i.a,Object.assign({},N,{id:f,name:m,className:"usa-radio__input",component:"radio"})),n.a.createElement("label",{className:"usa-radio__label",htmlFor:f},d)),date:n.a.createElement("div",null,n.a.createElement(i.a,{type:"date",id:f,name:m,className:"usa-input ".concat(S),disabled:E}))}[O],p)}),U=t(25),k=t.n(U),P=t(42),j=t(71),D=t.n(j),q=t(40),A=t.n(q),L=["accessLevel","accrualPeriodicity","bureauCode","category","contactEmail","contactPoint","dataQuality","dataLevel","describedBy","describedByType","frequency","homePage","identifier","isPartOf","issued","landingPage","language","license","master","organization","publisher","primaryITInvestmentUIIUSG","programCode","references","rights","spatial","spatial_location_desc","subagency","systemOfRecordsUSG","temporal","temporal_start_date","temporal_end_date","themes"],K=function(e){return e.split(" ").join("_").replace(/\W/g,"").toLowerCase()},F=function(e){return JSON.parse(JSON.stringify(e))},M=function(e){var a,t=F(e);return a=e?L.map((function(a){return{key:a,value:e[a]||""}})):[{}],t.extras=a,t},B=function(e){var a=F(e);return a.extras.forEach((function(e){a[e.key]=e.value})),a},G={createDataset:function(e,a,t,r){var n=F(a);n.modified=new Date,n.notes=a.description,n.bureauCode="015:11",n.programCode="015:001";var l=M(a);return l.owner_org=e,l.name=K(a.title),l.description=l.notes,l.url=a.url,A.a.post("".concat(t,"package_create"),l,{headers:{"X-CKAN-API-Key":r,"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var a=e.data.result;return B(a)}))},updateDataset:function(e,a,t,r){var n=M(a);return n.modified=new Date,n.notes=a.description,n.id=e,n.bureauCode="015:11",n.programCode="015:001",A.a.post("".concat(t,"package_update"),n,{headers:{"X-CKAN-API-Key":r,"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var a=e.data.result;return B(a)}))},fetchDataset:function(){var e=Object(P.a)(k.a.mark((function e(a,t,r){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.a.get("".concat(t,"package_show?id=").concat(a),{headers:{"X-CKAN-API-Key":r}}).then((function(e){var a=B(e.data.result);return a.description=a.notes,a})));case 1:case"end":return e.stop()}}),e)})));return function(a,t,r){return e.apply(this,arguments)}}(),fetchTags:function(){var e=Object(P.a)(k.a.mark((function e(a,t,r){var n,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(t,"tag_list?query=").concat(a),e.next=4,A.a.get(n,{headers:{"X-CKAN-API-Key":r}});case 4:return l=e.sent,e.abrupt("return",l.data.result.map((function(e,a){return{id:a,name:e}})));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t,r){return e.apply(this,arguments)}}(),createResource:function(e,a,t,r){var n;return a.upload?((n=new FormData).append("package_id",e),Object.keys(a).forEach((function(e){n.append(e,a[e])}))):(n=F(a)).package_id=e,A.a.post("".concat(t,"resource_create"),n,{headers:{"X-CKAN-API-Key":r,"Content-Type":"application/x-www-form-urlencoded"}})},helpers:{encodeExtras:M,decodeExtras:B,clone:F,safeName:K}},V=(t(105),function(e){var a=e.tags,t=e.name,l=e.helptext,s=e.apiUrl,o=e.apiKey,u=Object(r.useState)([]),m=Object(c.a)(u,2),d=m[0],p=m[1];return n.a.createElement(i.b,{name:t,render:function(e){return n.a.createElement("div",{className:"react-tags-input grid-col-12"},n.a.createElement("div",{id:"tags-error",className:"error-msg hidden",type:"string",placeholder:"",value:""},"Tags are required"),l,n.a.createElement(D.a,{tags:a,suggestions:d,allowNew:!0,ref:n.a.createRef(),onAddition:e.push,onDelete:e.remove,className:"usa-input",onInput:function(){var e=Object(P.a)(k.a.mark((function e(a){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.fetchTags(a,s,o);case 3:t=e.sent,p(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("Unable to fetch tags",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()}))}})}),Q=function(e){var a=e.children;return n.a.createElement("span",{className:"usa-helptext"},a)},z=function(e){var a=e.label,t=e.value,r=e.styleClass,l=e.id,s=e.name;return n.a.createElement("div",{className:"form-group ".concat(r)},n.a.createElement(i.a,{type:"radio",className:"usa-radio__input",value:t,name:s,id:l}),n.a.createElement("label",{className:"usa-radio__label",htmlFor:l},a))};z.defaultProps={styleClass:""};var J=z,X=function(e){var a=e.values,t=e.errors,l=e.apiUrl,s=e.apiKey,i=Object(r.useState)(!0),o=Object(c.a)(i,2),u=o[0],m=o[1],d=Object(r.useState)(!1),p=Object(c.a)(d,2),h=p[0],g=p[1],f=function(){return g(!h)},v=function(e){return e?e.replace(/\s+/g,"-").toLowerCase():""},E=function(e){return n.a.createElement(Q,null,e)},b="".concat(window.location.origin,"/dataset/"),y={title:n.a.createElement(Q,null,"Use ",n.a.createElement("a",{href:"https://plainlanguage.gov/"},"everyday language")," to make the dataset easy to find and understand"),description:n.a.createElement(Q,null,"Write a description (like an abstract) with enough detail to help a user quickly decide if the asset is of interest. You can use"," ",n.a.createElement("a",{href:"https://www.markdownguide.org/basic-syntax/"},"Markdown Formatting")," here."),select:n.a.createElement(Q,null,"If you do not see the Publisher for your dataset listed, please contact"," ",n.a.createElement("a",{href:"mailto:inventory-help@gsa.gov"},"inventory-help@gsa.gov")," for further assistance. Start typing to add tags.")};return n.a.createElement("div",{className:"usa-form-custom"},n.a.createElement("section",{id:"section-basic-mega-menu",className:"site-component-section"},n.a.createElement("p",{className:"site-text-intro"},"The following fields are required metadata for each dataset in an agency\u2019s inventory (",n.a.createElement("a",{href:"https://www.congress.gov/115/plaws/publ435/PLAW-115publ435.pdf"},"per Section 202 of the OPEN Government Data Act)")," ","For more information about the form fields, consult the",n.a.createElement("a",{href:"https://resources.data.gov/resources/dcat-us/"},"DCAT-US Schema."))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Title",name:"title",type:"string",placeholder:"",helptext:y.title,value:a.title,errors:t,required:!0}),n.a.createElement("div",null,n.a.createElement(I,{name:"url",type:"string",style:{display:u?"none":"inline"},value:a.url||"".concat(b).concat(v(a.title)),errors:t}),n.a.createElement("span",{className:"dataset_url",style:{display:u?"inline":"none"}},"".concat(b).concat(v(a.title))),n.a.createElement("button",{type:"button",className:"usa-button dataset_url_edit",style:{display:u?"inline":"none"},onClick:function(){m(!1)}},"Edit")))),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Description",name:"description",type:"string",component:"textarea",rows:"6",helptext:y.description,value:a.description,errors:t,required:!0})),n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"usa-label"},"Tags*"),n.a.createElement(V,{id:"tags-autocomplete-input",tags:a.tags,apiUrl:l,apiKey:s,name:"tags",titleField:"name",required:!0,placeholderText:"Start typing to search",errors:t,helptext:E("Use both technical and non-technical terms to help users find your dataset.")})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Publisher",name:"publisher",type:"select",choices:["Publisher 1 ","Publisher 2","Publisher 3","Publisher 4"],required:!0,className:"error-msg",helptext:y.select,infoText:"The publishing entity (e.g. your agency) and optionally their parent organization(s).",errors:t})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Sub Agency",name:"subagency",type:"select",choices:["Sub Agency 1 ","Sub Agency 2","Sub Agency 3","Sub-Agency 4"],className:"error-msg",errors:t})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Contact Name",name:"contactPoint",type:"string",required:!0,infoText:"This should be the person who can best answer or triage questions about this dataset, either on the metadata or the substance of the data resources.",errors:t})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Contact Email",name:"contactEmail",type:"string",required:!0,errors:t})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Unique ID",name:"identifier",type:"string",required:!0,infoText:"This is the ID number or code used within your agency to differentiate this dataset from other datasets.",errors:t})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Public Access level",name:"accessLevel",type:"select",choices:["public","restricted public","non-public"],className:"error-msg",errors:t,required:!0})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"Meets Agency Data Quality",name:"dataQuality",type:"select",choices:["Yes","No"],className:"error-msg",errors:t,required:!0})),n.a.createElement("div",{className:"row"},n.a.createElement(I,{label:"License",name:"license",type:"select",choices:["MIT","Open Source License","Others"],className:"error-msg",errors:t,required:!0}),n.a.createElement(I,{name:"license_others",type:"string",helptext:E("If you selected \u201cOther\u201d, please specify the name of your License*'"),disabled:"Others"!==a.license,errors:t,required:!0})),n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"usa-label"},"Rights")," ",n.a.createElement("br",null),t&&t.rights&&n.a.createElement("span",{className:"error-msg"},t.rights),n.a.createElement(J,{label:"My dataset is public",name:"rights",errors:t,value:"true",id:"rights_option_1"}),n.a.createElement(J,{label:"My dataset is not public",name:"rights",value:"false",id:"rights_option_2"}),n.a.createElement(I,{name:"rights_desc",type:"string",value:a.rights_desc,errors:t,helptext:E("If your dataset is not public, please add an explanation of rights and feel free to include any instructions on restrictions, or how to access a restricted file (max 255 characters)*"),disabled:"true"===a.rights})),n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"usa-label"},"Relevant Location*")," ",n.a.createElement("br",null),t&&t.spatial&&n.a.createElement("span",{className:"error-msg"},t.spatial),n.a.createElement(J,{label:"My dataset does not have a spatial component",name:"spatial",value:"false",errors:t,id:"spatial_option_1"}),n.a.createElement(J,{label:"My dataset does have a spatial component",name:"spatial",value:"true",id:"spatial_option_2"}),n.a.createElement(I,{name:"spatial_location_desc",type:"string",value:a.spatial_location_desc,errors:t,helptext:E("If your dataset has a spatial component, please provide location such as place name or latitude/longitude pairs above*"),disabled:"false"===a.spatial})),n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"usa-label"},"Temporal*",n.a.createElement("div",{className:"tooltip ".concat(h?"show":"")},n.a.createElement(C,{tabIndex:0,height:"20px",width:"20px",style:{marginLeft:".5em"},onClick:function(){return f()},onKeyUp:function(e){13===e.keyCode&&f()}}),n.a.createElement("span",{className:"tooltiptext"},n.a.createElement("span",{tabIndex:0,className:"close",onClick:function(){return g(!1)},role:"button",onKeyDown:function(){return g(!1)}},n.a.createElement("span",{className:"close-tag"},"\xd7")),n.a.createElement("h3",null,"Temporal"),n.a.createElement("p",null,"For example, for a 2010 Census dataset, the temporal extent would cover a period of time beginning 2000-04-02 and ending 2010-04-01."))))," ",n.a.createElement("br",null),t&&t.temporal&&n.a.createElement("span",{className:"error-msg"},t.temporal),n.a.createElement(J,{label:"My dataset does not have a start and end date for the applicability of data",name:"temporal",value:"false",errors:t,id:"temporal_option_1"}),n.a.createElement(J,{label:"My dataset has a start and end date for the applicability of data",name:"temporal",value:"true",errors:t,id:"temporal_option_2"}),n.a.createElement(I,{name:"temporal_start_date",type:"date",id:"temporal_start_date",value:a.temporal_start_date,errors:t,helptext:E("If your dataset has a temporal component, please provide start date for applicability of data above*"),disabled:"false"===a.temporal}),n.a.createElement(I,{name:"temporal_end_date",type:"date",id:"temporal_end_date",value:a.temporal_end_date,errors:t,helptext:E("If your dataset has a temporal component, please provide start date for applicability of data above*"),disabled:"false"===a.temporal})),n.a.createElement("div",{className:"row"},n.a.createElement("button",{type:"button",className:"usa-button usa-button--outline"},"Save as draft"),n.a.createElement("button",{className:"usa-button",type:"submit"},"Save and Continue")))},Y=t(1),W=Y.c().shape({title:Y.d().required("Title is required"),contactPoint:Y.d().required("Contact is required"),identifier:Y.d().required("Unique ID is required"),contactEmail:Y.d().email("Must be valid email").required("Contact email is required"),description:Y.d().required("Description is required"),publisher:Y.d().required("Publisher is required"),subagency:Y.d(),accessLevel:Y.d().required("Access level is required"),dataQuality:Y.d().required("Data Quality is required"),rights:Y.d().required("Rights is required.").test("rights-desc","Please add explanation of rights",(function(e){var a=this.from[0].value;return!("false"===e&&!a.rights_desc)})),rights_desc:Y.d(),spatial:Y.d().test("spatial-location-extra","Please provide location description.",(function(e){var a=this.from[0].value;return!("true"===e&&!a.spatial_location_desc)})),spatial_location_desc:Y.d(),license_others:Y.d(),license:Y.d().required("License is required").test("license-extra","Please specify the name of your license",(function(e){var a=this.from[0].value;return!("Others"===e&&!a.license_others)})),temporal:Y.d().test("temporal-start-end","Please specify start and end date",(function(e){var a=this.from[0].value;return!!("true"!==e||a.temporal_start_date&&a.temporal_end_date)})),temporal_start_date:Y.a(),temporal_end_date:Y.a()}),H={title:"Title",contactPoint:"Contact Name",identifier:"Unique ID",contactEmail:"Contact Email",description:"Description",publisher:"Publisher",accessLevel:"Public Access Level",dataQuality:"Access Level",rights:"Rights",spatial:"Spatial",license:"License",temporal:"Temporal"},$={title:"",description:"",publisher:"",subagency:"",public_access_level:"",data_quality:"",license:"",license_others:"",identifier:"",rights:"false",rights_desc:"",spatial:"false",spatial_location:"false",temporal:"false",temporal_start_date:"",temporal_end_date:"",contact_name:"",contact_email:"",unique_id:"",url:""},Z={theme:n.a.createElement(Q,null,"Examples include: vegetables, non_starchy, green."),describedBy:n.a.createElement(Q,null,'Provide a link to data dictionary or other reference that helps users understand the dataset. Example: "http://www.agency.gov/vegetables/vegetables-all.zip"'),landingPage:n.a.createElement(Q,null,'This landing page should contain or be linked to all resources tied to the dataset. Example: "http://www.agency.gov/vegetables"'),primaryITInvestmentUIIUSG:n.a.createElement(Q,null,"This can often be found in Exhibit 53 documents, and takes the form ###-#########. Learn more about Exhibit 53 documents at"," ",n.a.createElement("a",{href:"https://www.whitehouse.gov/wp-content/uploads/2018/06/fy-2020-it-budget-guidance.pdf"},"this pdf")),references:n.a.createElement(Q,null,"Related documents such as technical information about a dataset, developer documentation, etc. Format for entry is: http://www.agency.gov/fruits/fruits.csv, http://www.agency.gov/legumes/legumes"),systemOfRecordsUSG:n.a.createElement(Q,null,"If the dataset is a designated System of Records under the Privacy Act of 1974, provide the URL for the System of Recors Notice")},ee=function(e){var a=e.values||{},t=a.dataQualityUSG,r=a.theme,l=a.describedBy,s=a.describedByType,c=a.accrualPeriodicity,i=a.landingPage,o=a.language,u=a.primaryITInvestmentUIIUSG,m=a.references,d=a.issued,p=a.systemOfRecordsUSG,h=a.isPartOf;return n.a.createElement("div",{className:"usa-form-custom"},n.a.createElement("section",{id:"section-basic-mega-menu",className:"site-component-section"},n.a.createElement("p",{className:"site-text-intro"},"Please note that the additional metadata that you upload will help public users better find and use this dataset. Not all of these criteria will apply to each dataset, so feel free to only answer what applies. For more information about the form fields, consult the"," ",n.a.createElement("a",{href:"https://resources.data.gov/schemas/dcat-us/v1.1/"},"DCAT-US Schema"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Meets Agency Data Quality",name:"dataQualityUSG",type:"select",choices:["Yes","No"],value:t}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Themes",name:"theme",type:"string",helptext:"Main thematic category of the dataset.  If this dataset should be included in geoplatform.gov, please enter \u201cgeospatial\u201d as the theme.  Start typing to add themes.",infoText:Z.theme,value:r}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Data Dictionary URL",name:"describedBy",type:"string",helptext:'Please include "http://" at the beginning of your URL.',infoText:Z.describedBy,value:l}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Data Dictionary Type",name:"describedByType",type:"string",value:s}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Data Publishing Frequency",name:"accrualPeriodicity",type:"string",value:c}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Dataset Landing Page URL",name:"landingPage",type:"string",helptext:'Please include "http://" at the beginning of your URL.',infoText:Z.landingPage,value:i}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Language - Language Subtag",name:"language",type:"string",value:o}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Dataset's IT Unique Investment Identifier",name:"primaryITInvestmentUIIUSG",type:"string",value:u,infoText:Z.primaryITInvestmentUIIUSG}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Related Documents",name:"references",type:"string",value:m,infoText:Z.references}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Release Date",name:"issued",type:"date",value:d,infoText:Z.references}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"System of Records Notice URL",name:"systemOfRecordsUSG",type:"string",value:p,infoText:Z.systemOfRecordsUSG}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"grid-col-12"},n.a.createElement(I,{label:"Select Parent Dataset",name:"isPartOf",type:"string",value:h}))),n.a.createElement("div",{className:"row"},n.a.createElement("button",{type:"button",className:"usa-button usa-button--line"},"Save as draft"),n.a.createElement("button",{className:"usa-button",type:"submit"},"Save and continue")))},ae=Y.c().shape({dataQualityUSG:Y.d(),themes:Y.d(),describedBy:Y.d(),describedByType:Y.d(),accrualPeriodicity:Y.d(),landingPage:Y.d(),language:Y.d(),primaryITInvestmentUIIUSG:Y.d(),references:Y.d(),issued:Y.d(),systemOfRecordsUSG:Y.d(),isPartOf:Y.d()}),te=function(e){var a=e.values,t=e.setFieldValue,l=e.submitForm,s=a.resource||{},i=s.url,o=s.upload,u=s.name,m=s.description,d=s.mimetype,p=s.format,h=Object(r.useState)(!1),g=Object(c.a)(h,2),f=g[0],v=g[1],E=Object(r.useState)(!1),b=Object(c.a)(E,2),y=b[0],N=b[1];return n.a.createElement("div",{className:"usa-form-custom"},n.a.createElement("section",{id:"section-basic-mega-menu",className:"site-component-section"},n.a.createElement("h1",{className:"usite-page-title",id:"basic-mega-menu"},"Resource Upload"),n.a.createElement("p",{className:"site-text-intro"},"You can add the URL of the dataset where it is available on the agency website. If you are uploading the dataset itself, please notify the Data.gov team at"," ",n.a.createElement("a",{href:"mailto:inventory-help@gsa.gov"},"inventory-help@gsa.gov"),". You can also add a URL or file of information related to the dataset such as a data dictionary.")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("label",{className:"usa-label"},"Data"),f?n.a.createElement(I,{hidden:!f,id:"url",name:"resource.url",type:"url",placeholder:'If you are linking to a dataset, please include "http://" at the beginning of your URL.',value:i,onClick:function(){t("resource.url",""),v(!1)}}):y?n.a.createElement(I,{disabled:!0,name:"resource.fileName",type:"string",value:o.name,onClick:function(){t("resource.upload",""),N(!1)}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("label",{htmlFor:"upload",className:"usa-button usa-button--base"},n.a.createElement("i",{className:"fa fa-cloud-upload","aria-hidden":"true"})," Upload data"),n.a.createElement("input",{id:"upload",name:"resource.upload",type:"file",onChange:function(e){if(N(!y),u||t("resource.name",e.currentTarget.files[0].name),d||t("resource.mimetype",e.currentTarget.files[0].type),!p){var a=e.currentTarget.files[0].name&&e.currentTarget.files[0].name.split(".").slice(-1)[0];t("resource.format",a||"")}t("resource.upload",e.currentTarget.files[0])}}),n.a.createElement("label",{htmlFor:"url",className:"usa-button usa-button--base",onClick:function(){v(!f)}},n.a.createElement("i",{className:"fa fa-link","aria-hidden":"true"})," Link to data")),n.a.createElement("p",{className:"usa-helptext"},"Formats accepted include the following: TXT, HTML, TSV, CSV, ODT, XML, Perl."))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(I,{label:"Name",name:"resource.name",type:"string",placeholder:"",helptext:"",value:u}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(I,{label:"Description",name:"resource.description",type:"string",component:"textarea",rows:"6",helptext:"You can use Markdown Formatting here.",value:m}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(I,{label:"Media Type",name:"resource.mimetype",type:"select",choices:["Type 1 ","Type 2","Type 3","Type 4"],helptext:"Start typing to select a media type.  Examples include: text/csv, application/xml, or application/json.",value:d}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement(I,{label:"Format",name:"resource.format",type:"string",helptext:"Examples include: csv, xml, json.  This will be guessed automatically.  Leave blank if you wish.",value:p}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("button",{type:"button",className:"usa-button usa-button--outline",onClick:function(){t("publish",!1),v(!1),N(!1),l()}},"Save and add another resource"))),a.savedResources>0?n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 text-mint"},n.a.createElement("i",null,"Resource saved: [",a.lastSavedResourceName,"] (",a.savedResources," resources saved in total)."),n.a.createElement("br",null),n.a.createElement("i",null,'You can edit any saved resource after clicking "Finish and publish".'))):"",n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{type:"button",className:"usa-button usa-button--outline"},"Save as draft"),n.a.createElement("button",{className:"usa-button",type:"button",onClick:function(){t("publish",!0),l()}},"Finish and publish")))},re=Y.c().shape({name:Y.d(),description:Y.d(),mimetype:Y.d(),format:Y.d(),url:Y.d(),upload:Y.b()}),ne={name:"",description:"",url:"",format:"",mimetype:"",upload:null},le=function(e){var a=e.currentStep,t=e.handleSteps;return n.a.createElement("div",{className:"app_navigation",id:"app_navigation"},n.a.createElement("div",{tabIndex:"0",role:"button",className:"navsec ".concat(0===a?"active":""),onClick:function(){return t(0)},onKeyUp:function(e){13===e.keyCode&&t(0)},id:"nav-item-first"},n.a.createElement("span",null,"Required Metadata")),n.a.createElement("div",{tabIndex:"0",role:"link",className:"navsec ".concat(1===a?"active":""),onKeyUp:function(e){13===e.keyCode&&t(1)},onClick:function(){t(1)}},n.a.createElement("span",null,"Additional Metadata")),n.a.createElement("div",{tabIndex:"0",role:"button",className:"navsec ".concat(2===a?"active":""),onKeyUp:function(e){13===e.keyCode&&t(2)},onClick:function(){t(2)}},n.a.createElement("span",null,"Resource Upload")))},se=(t(67),function(e){Object(r.useEffect)((function(){window.scrollTo(0,0)}),[]);var a=e.type,t=e.errors,l=e.message,s=e.heading,c=t&&t.map((function(e){return n.a.createElement("p",{key:e.name},n.a.createElement("b",null,e.label)," ",e.message)}));return n.a.createElement("div",{className:"usa-prose"},n.a.createElement("div",{className:"usa-alert__body"},n.a.createElement("div",{className:"usa-alert usa-alert--".concat(a)},n.a.createElement("div",{className:"icon"}),n.a.createElement("div",{className:"usa-alert__body"},n.a.createElement("h3",{className:"usa-alert__heading"},s),n.a.createElement("div",{className:"usa-alert__text"},l,c)))))}),ce=function(e){return Object.keys(e).map((function(a){return{name:a,label:H[a],message:e[a]}}))},ie=function(e){var a=e.currentStep;return 0===a?n.a.createElement("h1",{className:"usite-page-title",id:"basic-mega-menu"},"Required Metadata"):1===a?n.a.createElement("h1",{className:"usite-page-title",id:"basic-mega-menu"},"Additional Metadata"):""},oe=function(e){var a=e.apiUrl,t=e.apiKey,l=e.ownerOrg,s=e.datasetId,o=Object(r.useState)(!0),u=Object(c.a)(o,2),m=u[0],d=u[1],p=Object(r.useState)(s),h=Object(c.a)(p,2),g=h[0],f=h[1],v=Object(r.useState)($),E=Object(c.a)(v,2),b=E[0],y=E[1],N=Object(r.useState)(0),w=Object(c.a)(N,2),_=w[0],O=w[1],S=Object(r.useState)(),x=Object(c.a)(S,2),T=x[0],R=x[1];return g&&m&&(d(!1),G.fetchDataset(g,a,t).then((function(e){var a=Object.assign({},e);a.description=e.notes,y(Object.assign({},a)),f(a.id)})).catch((function(e){R(n.a.createElement(se,{type:"error",heading:"Error loading metadata",message:"See the console output for more information on this error."})),console.error("CREATE DATASET ERROR",e),window.scrollTo(0,0)}))),n.a.createElement("div",{className:"grid-container"},n.a.createElement(le,{currentStep:_,handleSteps:O}),n.a.createElement(ie,{currentStep:_}),T,0===_&&n.a.createElement(i.d,{initialValues:b,enableReinitialize:"true",validateOnChange:!1,validateOnBlur:!1,validateOnMount:!1,onSubmit:function(e){g?G.updateDataset(g,e,a,t).then((function(e){y(Object.assign({},e,{description:e.notes})),R(n.a.createElement(se,{type:"success",heading:"Dataset saved successfully"})),O(1)})).catch((function(e){R(n.a.createElement(se,{type:"error",heading:"Error saving metadata",message:JSON.stringify(e)})),console.error("CREATE DATASET ERROR",e)})):G.createDataset(l,e,a,t).then((function(e){y(e),f(e.id),R(n.a.createElement(se,{type:"success",heading:"Dataset saved successfully"})),O(1),window.scrollTo(0,0)})).catch((function(e){R(n.a.createElement(se,{type:"error",heading:"Error saving metadata",message:JSON.stringify(e)})),console.error("CREATE DATASET ERROR",e)}))},validationSchema:W},(function(e){var r=e.values,s=e.handleSubmit,c=e.errors;return n.a.createElement("div",null,c&&Object.keys(c).length>0&&n.a.createElement("div",null,n.a.createElement(se,{type:"error",heading:"This form contains invalid entries",errors:ce(c)})),n.a.createElement(i.c,{onSubmit:s},n.a.createElement("div",null,n.a.createElement(X,{apiKey:t,apiUrl:a,ownerOrg:l,currentStep:0,fetchDatasetsOpts:"false",values:r||{},errors:c}))))})),1===_&&n.a.createElement(i.d,{initialValues:b,enableReinitialize:"true",validateOnChange:!1,validateOnBlur:!1,onSubmit:function(e){var r=b&&b.id;y(Object.assign({},b,e)),r?G.updateDataset(r,b,a,t).then((function(e){console.log("Dataset updated successfully",e),O(2)})).catch((function(e){var a=JSON.stringify(e);R(n.a.createElement(se,{type:"error",heading:"Error saving additional metadata",message:a})),console.error("UPDATE DATASET ERROR",e)})):R(n.a.createElement(se,{type:"error",heading:"No valid metadata saved in step 1.",message:"Please complete complete step one before submitting step 2."}))},validationSchema:ae},(function(e){var r=e.values,s=e.handleSubmit,c=e.errors;return n.a.createElement("div",null,c&&Object.keys(c).length>0&&n.a.createElement("div",null,n.a.createElement(se,{type:"error",heading:"This form contains invalid entries",errors:ce(c)})),n.a.createElement(i.c,{onSubmit:s},n.a.createElement("div",null,n.a.createElement(ee,{apiKey:t,apiUrl:a,ownerOrg:l,currentStep:1,fetchDatasetsOpts:"false",values:r||{},errors:c}))))})),2===_&&n.a.createElement(i.d,{initialValues:{resource:ne,publish:!0,savedResources:0,lastSavedResourceName:null},enableReinitialize:"true",validateOnChange:!1,validateOnBlur:!1,onSubmit:function(e,r){var l=r.setFieldValue;g?G.createResource(g,e.resource,a,t).then((function(t){if(200===t.status)if(e.publish){var r=new URL(a),n="".concat(r.origin,"/dataset/").concat(g);window.location.replace(n)}else l("savedResources",e.savedResources+1),l("lastSavedResourceName",e.resource.name),l("resource",ne)})).catch((function(e){var a=JSON.stringify(e);R(n.a.createElement(se,{type:"error",heading:"Error saving resource(s)",message:a})),console.error("CREATE RESOURCE ERROR",e)})):R(n.a.createElement(se,{type:"error",heading:"No valid metadata saved in previous steps.",message:"Please complete previous steps before submitting resource(s)."}))},validationSchema:re,render:function(e){var a=e.values,t=e.errors,r=e.handleSubmit,l=e.setFieldValue,s=e.submitForm;return n.a.createElement("div",{className:""},t&&Object.keys(t).length>0&&n.a.createElement("div",null,n.a.createElement(se,{type:"error",heading:"This form contains invalid entries",errors:ce(t)})),n.a.createElement(i.c,{onSubmit:r},n.a.createElement(te,{values:a,setFieldValue:l,submitForm:s}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("br",null),n.a.createElement("br",null)))))}}))},ue=function(e){var a=e.apiUrl,t=e.apiKey,r=e.ownerOrg,l=e.datasetId;return console.log({apiUrl:a,apiKey:t,ownerOrg:r}),n.a.createElement("div",{className:"App"},n.a.createElement(oe,{apiUrl:a,apiKey:t,ownerOrg:r,datasetId:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=document.getElementById("root"),de=me.getAttribute("data-apiUrl")||"http://localhost:5000/api/3/action/",pe=me.getAttribute("data-apiKey")||"2ea2f67c-bf92-4235-8350-5bcc8dc82b64",he=me.getAttribute("data-ownerOrg")||"123",ge=me.getAttribute("data-datasetId")||"";s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ue,{apiUrl:de,apiKey:pe,ownerOrg:he,datasetId:ge})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,a,t){},67:function(e,a,t){},74:function(e,a,t){e.exports=t(106)},79:function(e,a,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.e465da58.chunk.js.map
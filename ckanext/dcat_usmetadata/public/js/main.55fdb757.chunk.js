(this["webpackJsonpmetadata-app"]=this["webpackJsonpmetadata-app"]||[]).push([[0],{16:function(e,t,a){},30:function(e,t,a){e.exports=a(63)},35:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),c=a.n(l),s=(a(35),a(2)),i=a(4),o=a(29);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256    s26.629,132.667,74.98,181.02C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98    C485.371,388.667,512,324.38,512,256S485.371,123.333,437.02,74.98z M256,70c30.327,0,55,24.673,55,55c0,30.327-24.673,55-55,55    c-30.327,0-55-24.673-55-55C201,94.673,225.673,70,256,70z M326,420H186v-30h30V240h-30v-30h110v180h30V420z",fill:"#0050D8"}))),p=r.a.createElement("g",null),h=r.a.createElement("g",null),g=r.a.createElement("g",null),f=r.a.createElement("g",null),b=r.a.createElement("g",null),v=r.a.createElement("g",null),E=r.a.createElement("g",null),y=r.a.createElement("g",null),_=r.a.createElement("g",null),w=r.a.createElement("g",null),N=r.a.createElement("g",null),O=r.a.createElement("g",null),x=r.a.createElement("g",null),S=r.a.createElement("g",null),C=r.a.createElement("g",null),j=function(e){var t=e.svgRef,a=e.title,n=d(e,["svgRef","title"]);return r.a.createElement("svg",u({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",width:"512px",height:"512px",ref:t},n),a?r.a.createElement("title",null,a):null,m,p,h,g,f,b,v,E,y,_,w,N,O,x,S,C)},k=r.a.forwardRef((function(e,t){return r.a.createElement(j,u({svgRef:t},e))})),A=(a.p,a(16),function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1],u=e.name,d=e.label,m=e.children,p=e.helptext,h=e.required,g=e.id,f=e.disabled,b=e.infoText,v=e.onClick,E=Object(o.a)(e,["name","label","children","helptext","required","id","disabled","infoText","onClick"]),y=E.choices||[],_=E.type||"string",w="";return w=f?"disabled":"",r.a.createElement("div",null,r.a.createElement("label",{className:"usa-label",htmlFor:g},d,d&&h&&r.a.createElement("span",null,"*"),b&&r.a.createElement("div",{className:"tooltip ".concat(l?"show":"")},r.a.createElement(k,{height:"20px",width:"20px",style:{marginLeft:".5em"},onClick:function(){return c(!l)}}),r.a.createElement("span",{className:"tooltiptext"},r.a.createElement("span",{tabIndex:0,className:"close",onClick:function(){return c(!1)},role:"button",onKeyDown:function(){return c(!1)}},r.a.createElement("span",{className:"close-tag"},"\xd7")),r.a.createElement("h3",null,d),r.a.createElement("p",null,b)))),r.a.createElement("div",{className:"usa-helptext ".concat(w)},p),v?r.a.createElement("button",{className:"clear-button",onClick:v,type:"button"},"Remove"):"",{string:r.a.createElement(i.a,Object.assign({className:"usa-input ".concat(w),disabled:f,id:g,name:u},E)),url:r.a.createElement(i.a,Object.assign({className:"usa-input ".concat(w),disabled:f,id:g,name:u},E)),select:r.a.createElement(i.a,Object.assign({},E,{id:g,name:u,className:"usa-select ".concat(w),component:"select",defaultValue:""}),r.a.createElement("option",{value:""},"-Select-"),y.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),radio:r.a.createElement("div",null,r.a.createElement(i.a,Object.assign({},E,{id:g,name:u,className:"usa-radio__input",component:"radio"})),r.a.createElement("label",{className:"usa-radio__label",htmlFor:g},d)),date:r.a.createElement("div",null,r.a.createElement("input",Object.assign({},E,{id:g,name:u,className:"usa-input ".concat(w),disabled:f})))}[_],m)}),I=a(7),P=a.n(I),R=a(9),q=a(28),K=a.n(q),T=a(8),D=a.n(T),U=["accessLevel","accrualPeriodicity","bureauCode","category","contactEmail","contactPoint","dataQuality","dataLevel","describedBy","describedByType","frequency","homePage","identifier","isPartOf","issued","landingPage","language","license","master","organization","publisher","primaryITInvestmentUIIUSG","programCode","references","rights","spatial","subagency","systemOfRecordsUSG","temporal","theme"],M=function(e){return e.split(" ").join("_").replace(/\W/g,"").toLowerCase()},L=function(e){return JSON.parse(JSON.stringify(e))},z=function(e){var t,a=L(e);return t=e?U.map((function(t){return{key:t,value:e[t]||""}})):[{}],a.extras=t,a},B=function(e){var t=L(e);return t.extras.forEach((function(e){t[e.key]=e.value})),t},F=function(e){var t=L(e);if(e.description&&(t.notes=e.description),e.license_others&&(t.license=e.license_others,delete t.license_others),e.rights_desc&&(t.rights=e.rights_desc,delete t.rights_desc),e.spatial_location_desc&&(t.spatial=e.spatial_location_desc,delete t.spatial_location_desc),e.temporal_start_date){var a=new Date(e.temporal_start_date).toISOString(),n=new Date(e.temporal_end_date).toISOString();t.temporal="".concat(a,"/").concat(n),delete t.temporal_start_date,delete t.temporal_end_date}return t},V=function(e){var t=L(e);if(e.license&&(t.license_others=e.license,t.license="Others"),e.rights&&(t.rights_desc=e.rights,t.rights="false"),e.spatial&&(t.spatial_location_desc=e.spatial,t.spatial=!0),e.temporal){var a=e.temporal.split("/"),n=Object(s.a)(a,2);t.temporal_start_date=n[0],t.temporal_end_date=n[1],t.temporal="true"}return t},W={createDataset:function(e,t,a,n){var r=L(t);r.modified=new Date,r.notes=t.description,r.bureauCode="015:11",r.programCode="015:001";var l=z(F(t));return l.owner_org=e,l.name=M(t.title),l.url=t.url,D.a.post("".concat(a,"package_create"),l,{headers:{"X-CKAN-API-Key":n}})},updateDataset:function(e,t,a,n){var r=z(F(t));return r.id=e,D.a.post("".concat(a,"package_update"),r,{headers:{"X-CKAN-API-Key":n}})},fetchDataset:function(){var e=Object(R.a)(P.a.mark((function e(t,a,n){var r,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("".concat(a,"package_show?id=").concat(t),{headers:{"X-CKAN-API-Key":n}});case 3:return r=e.sent,l=V(B(r.data.result)),r.data.result=l,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),fetchTags:function(){var e=Object(R.a)(P.a.mark((function e(t,a,n){var r,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(a,"tag_list?query=").concat(t),e.next=4,D.a.get(r,{headers:{"X-CKAN-API-Key":n}});case 4:return l=e.sent,e.abrupt("return",l.data.result.map((function(e,t){return{id:t,name:e}})));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),createResource:function(e,t,a,n){var r=L(t);return r.package_id=e,t.upload&&(r.mime_type=t.upload.type,r.size=t.upload.size),D.a.post("".concat(a,"resource_create"),t,{headers:{"X-CKAN-API-Key":n}})},helpers:{encodeExtras:z,decodeExtras:B,encodeSupplementalValues:F,decodeSupplementalValues:V,clone:L,safeName:M}},X=(a(61),function(e){var t=e.tags,a=e.name,l=e.helptext,c=e.apiUrl,o=e.apiKey,u=Object(n.useState)([]),d=Object(s.a)(u,2),m=d[0],p=d[1];return r.a.createElement(i.b,{name:a,render:function(e){return r.a.createElement("div",{className:"react-tags-input grid-col-12"},r.a.createElement("div",{id:"tags-error",className:"error-msg hidden",type:"string",placeholder:"",value:""},"Tags are required"),l,r.a.createElement(K.a,{tags:t,suggestions:m,allowNew:!0,ref:r.a.createRef(),onAddition:e.push,onDelete:e.remove,className:"usa-input",onInput:function(){var e=Object(R.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.fetchTags(t,c,o);case 3:a=e.sent,p(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("Unable to fetch tags",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}))}})}),J=function(e){var t=e.children;return r.a.createElement("p",{className:"usa-helptext"},t)},G=function(e){var t=e.label,a=e.selected,n=e.value,l=e.styleClass,c=e.id,s=e.name,i=e.handleRadio;return r.a.createElement("div",{className:"form-group ".concat(l)},r.a.createElement("input",{type:"radio",className:"usa-radio__input",value:n,defaultChecked:a,onChange:i,name:s,id:c}),r.a.createElement("label",{className:"usa-radio__label",htmlFor:c},t))};G.defaultProps={styleClass:""};var Q=G,Y=function(e){var t=e.values,a=e.currentStep,l=e.apiUrl,c=e.apiKey,i=Object(n.useState)(t.rights),o=Object(s.a)(i,2),u=o[0],d=o[1],m=Object(n.useState)(t.license),p=Object(s.a)(m,2),h=p[0],g=p[1],f=Object(n.useState)(t.spatial),b=Object(s.a)(f,2),v=b[0],E=b[1],y=Object(n.useState)(t.temporal),_=Object(s.a)(y,2),w=_[0],N=_[1],O=Object(n.useState)(!0),x=Object(s.a)(O,2),S=x[0],C=x[1],j=function(e){return e?e.replace(/\s+/g,"-").toLowerCase():""},k=function(e){return r.a.createElement(J,null,e)},I=function(){return"".concat(l.replace("api/3/action/",""),"dataset/")};if(1!==a)return null;var P={title:r.a.createElement(J,null,"Use ",r.a.createElement("a",{href:"https://plainlanguage.gov/"},"everyday language")," to make the dataset easy to find and understand"),description:r.a.createElement(J,null,"Write a description (like an abstract) with enough detail to help a user quickly decide if the asset is of interest. You can use"," ",r.a.createElement("a",{href:"https://www.markdownguide.org/basic-syntax/"},"Markdown Formatting")," here."),select:r.a.createElement(J,null,"If you do not see the Publisher for your dataset listed, please contact"," ",r.a.createElement("a",{href:"mailto:inventory-help@gsa.gov"},"inventory-help@gsa.gov")," for further assistance. Start typing to add tags.")};return r.a.createElement("div",{className:"usa-form-custom"},r.a.createElement("section",{id:"section-basic-mega-menu",className:"site-component-section"},r.a.createElement("h1",{className:"usite-page-title",id:"basic-mega-menu"},"Required Metadata"),r.a.createElement("p",{className:"site-text-intro"},"The following fields are required metadata for each dataset in an agency\u2019s inventory (",r.a.createElement("a",{href:"https://www.congress.gov/115/plaws/publ435/PLAW-115publ435.pdf"},"per Section 202 of the OPEN Government Data Act)")," ","For more information about the form fields, consult the",r.a.createElement("a",{href:"https://resources.data.gov/resources/dcat-us/"},"DCAT-US Schema."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"grid-col-12"},r.a.createElement(A,{label:"Title",name:"title",type:"string",placeholder:"",helptext:P.title,value:t.title,required:!0}),r.a.createElement("div",null,r.a.createElement(A,{name:"url",type:"string",style:{display:S?"none":"inline"},value:t.url||"".concat(I()).concat(j(t.title))}),r.a.createElement("span",{className:"dataset_url",style:{display:S?"inline":"none"}},"".concat(I()).concat(j(t.title))),r.a.createElement("button",{type:"button",className:"usa-button dataset_url_edit",style:{display:S?"inline":"none"},onClick:function(){C(!1)}},"Edit")))),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Description",name:"description",type:"string",component:"textarea",rows:"6",helptext:P.description,value:t.description,required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"usa-label"},"Tags*"),r.a.createElement(X,{id:"tags-autocomplete-input",tags:t.tags,apiUrl:l,apiKey:c,name:"tags",titleField:"name",required:!0,placeholderText:"Start typing to search",helptext:k("Use both technical and non-technical terms to help users find your dataset.")})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Publisher",name:"publisher",type:"select",choices:["Publisher 1 ","Publisher 2","Publisher 3","Publisher 4"],required:!0,className:"error-msg",helptext:P.select,infoText:"The publishing entity (e.g. your agency) and optionally their parent organization(s)."})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Sub Agency",name:"subagency",type:"select",choices:["Sub Agency 1 ","Sub Agency 2","Sub Agency 3","Sub-Agency 4"],className:"error-msg"})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Contact Name",name:"contactPoint",type:"string",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Contact Email",name:"contactEmail",type:"string",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Unique ID",name:"identifier",type:"string",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Public Access level",name:"accessLevel",type:"select",choices:["public","restricted public","non-public"],className:"error-msg",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Meets Agency Data Quality",name:"dataQuality",type:"select",choices:["Yes","No"],className:"error-msg",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"License",name:"license",type:"select",choices:["MIT","Open Source License","Others"],className:"error-msg",value:h,onChange:function(e){return g(e.target.value)},required:!0}),r.a.createElement(A,{name:"license_others",type:"string",helptext:k("If you selected \u201cOther\u201d, please specify the name of your License*'"),disabled:"Others"!==h,required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(Q,{label:"My dataset is public",name:"rights",value:u,selected:!!u,handleRadio:function(){d(!0)},id:"rights_option_1"}),r.a.createElement(Q,{label:"My dataset is not public",name:"rights",value:u,selected:!u,handleRadio:function(){d(!1)},id:"rights_option_2"}),r.a.createElement(A,{name:"rights_desc",type:"string",value:t.rights_desc,helptext:k("If your dataset is not public, please add an explanation of rights and feel free to include any instructions on restrictions, or how to access a restricted file (max 255 characters)*"),disabled:!!u})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"usa-label"},"Relevant Location*")," ",r.a.createElement("br",null),r.a.createElement(Q,{label:"My dataset does not have a spatial component",name:"spatial",value:v,selected:!v,handleRadio:function(){return E(!1)},id:"spatial_option_1"}),r.a.createElement(Q,{label:"My dataset does have a spatial component",name:"spatial",value:v,selected:!!v,handleRadio:function(){return E(!0)},id:"spatial_option_2"}),r.a.createElement(A,{name:"spatial_location_desc",type:"string",value:t.spatial_location_desc,helptext:k("If your dataset has a spatial component, please provide location such as place name or latitude/longitude pairs above*"),disabled:!v})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"usa-label"},"Temporal*")," ",r.a.createElement("br",null),r.a.createElement(Q,{label:"My dataset does not have a start and end date for the applicability of data",name:"temporal",value:w,selected:!w,handleRadio:function(){return N(!1)},id:"temporal_option_1"}),r.a.createElement(Q,{label:"My dataset has a start and end date for the applicability of data",name:"temporal",value:w,selected:!!w,handleRadio:function(){N(!0)},id:"temporal_option_2"}),r.a.createElement(A,{name:"temporal_start_date",type:"date",helptext:k("If your dataset has a temporal component, please provide start date for applicability of data above*"),disabled:!w}),r.a.createElement(A,{name:"temporal_end_date",type:"date",helptext:k("If your dataset has a temporal component, please provide start date for applicability of data above*"),disabled:!w})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"usa-button usa-button--outline"},"Save as draft"),r.a.createElement("button",{className:"usa-button",type:"submit"},"Save and Continue")))},H={title:"",description:"",publisher:"",subagency:"",public_access_level:"",data_quality:"",license:"",license_others:"",identifier:"",rights:"false",rights_desc:"",spatial:"false",spatial_location:"false",temporal:"false",temporal_start_date:"",temporal_end_date:"",contact_name:"",contact_email:"",unique_id:"",url:""},$=function(e){var t=e.currentStep,a=e.handleSteps;return r.a.createElement("div",{className:"app_navigation",id:"app_navigation"},r.a.createElement("div",{tabIndex:"0",role:"button",className:"navsec ".concat(0===t?"active":""),onClick:function(){return a(0)},onKeyDown:function(){return a(0)},id:"nav-item-first"},r.a.createElement("span",null,"Required Metadata")),r.a.createElement("div",{tabIndex:"0",role:"link",className:"navsec ".concat(1===t?"active":""),onKeyDown:function(){a(1)},onClick:function(){a(1)}},r.a.createElement("span",null,"Additional Metadata")),r.a.createElement("div",{tabIndex:"0",role:"button",className:"navsec ".concat(2===t?"active":""),onKeyDown:function(){a(2)},onClick:function(){a(2)}},r.a.createElement("span",null,"Resource Upload")))},Z=(a(62),function(e){var t=e.apiUrl,a=e.apiKey,l=e.ownerOrg,c=Object(n.useState)(H),o=Object(s.a)(c,2),u=o[0],d=o[1],m=Object(n.useState)(0),p=Object(s.a)(m,2),h=p[0],g=p[1];return r.a.createElement("div",{className:"grid-container"},r.a.createElement($,{currentStep:h,handleSteps:g}),r.a.createElement(i.d,{initialValues:u,enableReinitialize:"true",validateOnChange:!1,validateOnBlur:!1,onSubmit:function(e){W.createDataset(l,e,t,a).then((function(e){d(e),window.scrollTo(0,0)})).catch((function(e){console.error("CREATE DATASET ERROR",e),window.scrollTo(0,0)}))}},(function(e){var n=e.values,c=e.errors,s=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement(i.c,{onSubmit:s},0===h&&r.a.createElement("div",null,r.a.createElement(Y,{apiKey:a,apiUrl:t,ownerOrg:l,currentStep:1,fetchDatasetsOpts:"false",values:n,errors:c}))))})))}),ee=function(e){var t=e.apiUrl,a=e.apiKey,n=e.ownerOrg;return r.a.createElement("div",{className:"App"},r.a.createElement(Z,{apiUrl:t,apiKey:a,ownerOrg:n}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te,ae,ne,re=document.getElementById("r");re?(te=re.getAttribute("data-apiUrl"),ae=re.getAttribute("data-apiKey"),ne=re.getAttribute("data-ownerOrg")):(te="localhost:5000/api/3/action/",ae="123",ne="123"),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,{apiUrl:te,apiKey:ae,ownerOrg:ne})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.55fdb757.chunk.js.map
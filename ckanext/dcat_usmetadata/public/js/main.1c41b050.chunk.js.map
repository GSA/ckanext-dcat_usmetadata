{"version":3,"sources":["img/info.svg","components/WrappedField/index.js","api/index.js","components/AutocompleteTags/index.js","components/HelpText/index.js","components/Radio/index.js","components/Link/index.js","components/RequiredMetadata/index.js","components/RequiredMetadata/validationSchema.js","components/RequiredMetadata/validationLabels.js","components/RequiredMetadata/defaultValues.js","components/AdditionalMetadata/defaultValues.js","components/Autocomplete/index.js","components/AdditionalMetadata/index.js","components/AdditionalMetadata/validationSchema.js","components/ResourceUpload/index.js","components/ResourceUpload/validationSchema.js","components/ResourceUpload/ResourceObject.js","components/Navigation/index.js","components/AlertBox/index.js","components/MetadataForm/index.js","App.js","serviceWorker.js","index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","fill","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","title","props","id","x","y","viewBox","style","enableBackground","xmlSpace","width","height","ref","ForwardRef","forwardRef","WrappedField","useState","toolTipShown","setToolTipShown","toggleToolTip","value","name","label","children","helptext","required","errors","disabled","infoText","onClick","rest","onSelect","formErrors","choices","type","disabledClass","className","htmlFor","marginLeft","tabIndex","onKeyUp","event","keyCode","role","string","url","resource","select","as","component","map","choice","index","optionValue","optionLabel","radio","date","dataDictTypes","require","licenses","clone","param","JSON","parse","stringify","deserializeExtras","opts","newOpts","extras","forEach","cur","encodeValues","obj","newObj","entries","encodedKey","encodeURIComponent","String","serializeSupplementalValues","description","notes","tags","tag_string","reduce","acc","publisher_other","publisher","license","license_new","license_others","licenseOther","access_level_comment","rights_desc","spatial","spatial_location_desc","temporal_start_date","start","Date","toISOString","split","end","temporal_end_date","temporal","languageSubTag","language","languageRegSubTag","describedByType","data_dictionary_type","otherDataDictionaryType","isParent","is_parent","parent_dataset","filter","extra","parentDataset","deserializeSupplementalValues","n","includes","find","dataDictType","createDataset","apiUrl","apiKey","body","slugify","lower","remove","modified","bureau_code","program_code","axios","post","headers","then","res","resVals","data","result","updateDataset","bureauCode","programCode","patchDataset","fetchDataset","a","get","fetchTags","str","row","Promise","reject","fetchOrganizationsForUser","permission","fetchParentDatasets","query","results","createResource","packageId","upload","FormData","append","item","package_id","helpers","AutocompleteTags","placeholder","fetchOpts","suggestions","setSuggestions","useField","setValue","currentParent","allowNew","React","createRef","onAddition","tag","onDelete","placeholderText","onInput","q","console","warn","render","arrayHelpers","push","HelpText","Radio","styleClass","defaultProps","Link","href","rel","classes","newRel","test","concat","join","undefined","defaultValues","publishersDictionary","leafPublishers","publisher_5","publisher_4","publisher_3","publisher_2","publisher_1","sort","RequiredMetadata","values","draftSaved","setFieldValue","submitForm","organizations","setOrganizations","useEffect","api","urlDisabled","setUrlDisabled","helpTextify","text","baseUrl","window","location","origin","genUrlFromTitle","helpTexts","display","substring","rows","titleField","rights","e","onKeyDown","marginTop","yup","shape","saveDraft","owner_org","contact_name","when","schema","unique_id","contact_email","email","of","min","max","matches","vocabulary_id","subagency","public_access_level","accessLevelComment","formVals","from","typeError","data_quality","spatial_location","dataQualityUSG","themes","describedBy","accrualPeriodicity","landingPage","primaryITInvestmentUIIUSG","references","issued","systemOfRecordsUSG","isPartOf","getSuggestionValue","suggestion","renderSuggestion","suggested","tail","Autocomplete","inputValue","selected","setSelected","typedText","setTypedText","getSuggestions","typed","currentInputValue","trim","toLowerCase","inputLength","slice","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","theme","container","containerOpen","input","inputOpen","inputFocused","suggestionsContainer","suggestionsContainerOpen","suggestionsList","suggestionFirst","suggestionHighlighted","sectionContainer","sectionContainerFirst","sectionTitle","inputProps","onChange","onBlur","languages","b","label1","label2","AdditionalMetadata","selectedLangValue","regions","category","data_dictionary","primary_it_investment_uii","homepage_url","related_documents","deribed_by","described_by_type","system_of_records","release_date","ResourceUpload","mimetype","format","linkToDataIsActive","setLinkToDataActive","uploadDataFileIsActive","setUploadDataFileActive","hidden","fileName","aria-hidden","currentTarget","files","detectedFormat","resourceFormats","savedResources","lastSavedResource","Navigation","currentStep","handleSteps","AlertBox","scrollTo","message","heading","parsedErrors","error","errorMessage","formatErrors","RequiredMetadataLabels","formatDate","getHours","getMinutes","getMonth","getDate","getFullYear","toString","Heading","MetadataForm","ownerOrg","datasetId","shouldFetch","setShouldFetch","curDatasetId","setCurDatasetId","defaultRequiredValues","defaultAdditionalValues","state","formValues","setFormValues","setCurrentStep","alert","setAlert","setDraftSaved","handleError","err","response","request","Api","apiRes","catch","initialValues","enableReinitialize","validateOnChange","validateOnBlur","validateOnMount","onSubmit","validate","validationSchema","RequiredMetadataSchema","handleSubmit","fetchDatasetsOpts","AdditionalMetadataSchema","ResourceObject","publish","resourceMetadataChanged","apiUrlObject","URL","datasetPageUrl","status","replace","ResourceUploadSchema","App","log","Boolean","hostname","match","root","document","getElementById","getAttribute","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"881DAAA,SAASA,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,IAAI,EAAqB,IAAMoB,cAAc,IAAK,KAAmB,IAAMA,cAAc,IAAK,KAAmB,IAAMA,cAAc,OAAQ,CAC3IC,EAAG,ibACHC,KAAM,cAGJ,EAAqB,IAAMF,cAAc,IAAK,MAE9C,EAAqB,IAAMA,cAAc,IAAK,MAE9C,EAAqB,IAAMA,cAAc,IAAK,MAE9C,EAAqB,IAAMA,cAAc,IAAK,MAE9C,EAAqB,IAAMA,cAAc,IAAK,MAE9CG,EAAqB,IAAMH,cAAc,IAAK,MAE9CI,EAAqB,IAAMJ,cAAc,IAAK,MAE9CK,EAAsB,IAAML,cAAc,IAAK,MAE/CM,EAAsB,IAAMN,cAAc,IAAK,MAE/CO,EAAsB,IAAMP,cAAc,IAAK,MAE/CQ,EAAsB,IAAMR,cAAc,IAAK,MAE/CS,EAAsB,IAAMT,cAAc,IAAK,MAE/CU,EAAsB,IAAMV,cAAc,IAAK,MAE/CW,EAAsB,IAAMX,cAAc,IAAK,MAE/CY,EAAsB,IAAMZ,cAAc,IAAK,MAE/C,EAAU,SAAiBa,GAC7B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACbC,EAAQzB,EAAyBsB,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMb,cAAc,MAAOvB,EAAS,CACtDwC,GAAI,SACJC,EAAG,MACHC,EAAG,MACHC,QAAS,cACTC,MAAO,CACLC,iBAAkB,mBAEpBC,SAAU,WACVC,MAAO,QACPC,OAAQ,QACRC,IAAKZ,GACJE,GAAQD,EAAqB,IAAMf,cAAc,QAAS,KAAMe,GAAS,KAAM,EAAO,EAAO,EAAO,EAAO,EAAO,EAAOZ,EAAOC,EAAOC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,EAAQC,IAGhMe,EAA0B,IAAMC,YAAW,SAAUZ,EAAOU,GAC9D,OAAoB,IAAM1B,cAAc,EAASvB,EAAS,CACxDqC,OAAQY,GACPV,OC0HUa,GDxHA,I,OC9DM,SAACb,GAAW,IAAD,EACUc,oBAAS,GADnB,mBACvBC,EADuB,KACTC,EADS,KAGxBC,EAAgB,kBAAMD,GAAgBD,IAG1CG,EAaElB,EAbFkB,MACAC,EAYEnB,EAZFmB,KACAC,EAWEpB,EAXFoB,MACAC,EAUErB,EAVFqB,SACAC,EASEtB,EATFsB,SAEArB,GAOED,EARFuB,SAQEvB,EAPFC,IACAuB,EAMExB,EANFwB,OACAC,EAKEzB,EALFyB,SACAC,EAIE1B,EAJF0B,SACAC,EAGE3B,EAHF2B,QAEGC,GACD5B,EAFF6B,SAjB4B,YAmB1B7B,EAnB0B,qHAqBxB8B,EAAaN,GAAU,GACvBO,EAAUH,EAAKG,SAAW,GAC1BC,EAAOJ,EAAKI,MAAQ,SAEtBC,EAAgB,GAOpB,OALEA,EADER,EACc,WAEA,GAIhB,yBAAKS,UAAU,WACb,2BAAOA,UAAU,YAAYC,QAASlC,GACnCmB,EAGAM,GACC,yBAAKQ,UAAS,kBAAanB,EAAe,OAAS,KACjD,kBAAC,EAAD,CACEN,OAAO,OACPD,MAAM,OACNH,MAAO,CAAE+B,WAAY,QACrBC,SAAU,EACVV,QAAS,kBAAMV,KACfqB,QAAS,SAACC,GACc,KAAlBA,EAAMC,SACRvB,OAIN,0BAAMiB,UAAU,eACd,0BACEG,SAAU,EACVH,UAAU,QACVP,QAAS,kBAAMX,GAAgB,IAC/ByB,KAAK,SACLH,QAAS,SAACC,GACc,KAAlBA,EAAMC,SACRxB,GAAgB,KAIpB,0BAAMkB,UAAU,aAAhB,SAEF,4BAAKd,GACL,2BAAIM,MAOXI,EAAWX,IAAS,0BAAMe,UAAU,aAAaJ,EAAWX,IAE7D,yBAAKe,UAAS,uBAAkBD,IAAkBX,GACjDK,EACC,4BACEO,UAAU,gDACVP,QAASA,EACTK,KAAK,UAHP,UAQA,GAGA,CACEZ,MAAO,6BAAMF,GACbwB,OACE,kBAAC,IAAD,eACER,UACE,oBAAaD,EAAb,eACGH,EAAWX,IAAS,cADvB,eAEGQ,GAAW,oBAEhBF,SAAUA,EACVxB,GAAIA,EACJkB,KAAMA,GACFS,IAGRe,IACE,kBAAC,IAAD,eACET,UAAS,oBAAeD,EAAf,aACNH,EAAWX,IAASW,EAAWc,WAAa,cADtC,YAELjB,GAAW,oBACfF,SAAUA,EACVxB,GAAIA,EACJkB,KAAMA,GACFS,IAGRiB,OACE,kBAAC,IAAD,iBACMjB,EADN,CAEEkB,GAAG,SACH7C,GAAIA,EACJkB,KAAMA,EACNM,SAAUA,EACVS,UAAS,qBAAgBD,EAAhB,YAAiCH,EAAWX,GAAQ,cAAgB,IAC7E4B,UAAU,WAEV,4BAAQ7B,MAAM,IAAd,YAECa,EAAQiB,KAAI,SAACC,EAAQC,GACpB,IAAMC,EAAcF,EAAO/B,OAAS+B,EAAOhD,IAAMgD,EAC3CG,EAAcH,EAAO7B,OAAS6B,EAAOlD,OAASkD,EAAO9B,MAAQ8B,EACnE,OACE,4BAAQ/B,MAAOiC,EAAalF,IAAKkF,EAAcD,GAC5CE,OAOXC,MACE,6BACE,kBAAC,IAAD,iBAAWzB,EAAX,CAAiB3B,GAAIA,EAAIkB,KAAMA,EAAMe,UAAU,mBAAmBa,UAAU,WAC5E,2BAAOb,UAAU,mBAAmBC,QAASlC,GAC1CmB,IAIPkC,KACE,6BACE,kBAAC,IAAD,CACEtB,KAAK,OACL/B,GAAIA,EACJkB,KAAMA,EACNe,UAAS,oBAAeD,GACxBR,SAAUA,MAIhBO,GAGHX,K,iBCpKDkC,EAAgBC,EAAQ,KACxBC,EAAWD,EAAQ,KAKnBE,EAAQ,SAACC,GAAD,OAAWC,KAAKC,MAAMD,KAAKE,UAAUH,KAK7CI,EAAoB,SAACC,GACzB,IAAMC,EAAUP,EAAMM,GAItB,OAHAC,EAAQC,OAAOC,SAAQ,SAACC,GACtBH,EAAQG,EAAInG,KAAOmG,EAAIlD,SAElB+C,GAQHI,EAAe,SAACC,GACpB,IAAMC,EAAS,GAqBf,OApBA7G,OAAO8G,QAAQF,GAAKtB,KAAI,YAAmB,IAAD,mBAAhB/E,EAAgB,KAAXiD,EAAW,KAClCuD,EAAaC,mBAAmBzG,GACtCsG,EAAOE,GAAcvD,GACA,kBAAVA,GAAsBA,aAAiByD,UAChDJ,EAAOE,GAAcC,mBAAmBxD,OAMxCoD,EAAIJ,SACNK,EAAOL,OAASI,EAAIJ,OAAOlB,KAAI,YAAqB,IAAlB/E,EAAiB,EAAjBA,IAAKiD,EAAY,EAAZA,MAC/BuD,EAAaC,mBAAmBzG,GAEtC,MAAqB,kBAAViD,GAAsBA,aAAiByD,OACzC,CAAE1G,IAAKwG,EAAYvD,MAAOwD,mBAAmBxD,IAE/C,CAAEjD,IAAKwG,EAAYvD,aAGvBqD,GAIHK,EAA8B,SAACZ,GACnC,IAAMC,EAAUP,EAAMM,GA8CtB,GA5CIA,EAAKa,cACPZ,EAAQa,MAAQd,EAAKa,aAGnBb,EAAKe,MAAQf,EAAKe,KAAKhH,OAAS,IAClCkG,EAAQe,WAAahB,EAAKe,KAAKE,QAAO,SAACC,EAAKd,GAC1C,OAAmB,IAAfc,EAAInH,OACCqG,EAAIjD,KAEP,GAAN,OAAU+D,EAAV,aAAkBd,EAAIjD,QACrB,KAGD6C,EAAKmB,kBACPlB,EAAQmB,UAAYpB,EAAKmB,uBAClBlB,EAAQkB,iBAGI,QAAjBnB,EAAKqB,gBAEApB,EAAQqB,mBACRrB,EAAQsB,gBACNvB,EAAKqB,UACO,UAAjBrB,EAAKqB,QAAqBpB,EAAQqB,YAActB,EAAKwB,aACpDvB,EAAQqB,YAActB,EAAKqB,eACzBpB,EAAQsB,gBAIiB,UAA9BvB,EAAKyB,sBAAoCzB,EAAK0B,aAChDzB,EAAQwB,qBAAuBzB,EAAK0B,mBAC7BzB,EAAQyB,aAEfzB,EAAQwB,qBAAuB,OAGZ,UAAjBzB,EAAK2B,gBACA1B,EAAQ0B,QAEb3B,EAAK4B,wBACP3B,EAAQ0B,QAAU3B,EAAK4B,6BAChB3B,EAAQ2B,uBAGb5B,EAAK6B,oBAAqB,CAC5B,IAAMC,EAAQ,IAAIC,KAAK/B,EAAK6B,qBAAqBG,cAAcC,MAAM,KAAK,GACpEC,EAAM,IAAIH,KAAK/B,EAAKmC,mBAAmBH,cAAcC,MAAM,KAAK,GACtEhC,EAAQmC,SAAR,UAAsBN,EAAtB,YAA+BI,UACxBjC,EAAQ4B,2BACR5B,EAAQkC,8BAERlC,EAAQmC,SAuCjB,OAlCIpC,EAAKqC,iBACPpC,EAAQqC,SACNtC,EAAKqC,gBAAkBrC,EAAKuC,mBAAL,WAA8BvC,EAAKuC,4BAEvDtC,EAAQoC,sBACRpC,EAAQsC,kBAGXvC,EAAKwC,kBAEsB,UAAzBxC,EAAKwC,iBACPvC,EAAQwC,qBAAuBzC,EAAK0C,+BAC7BzC,EAAQyC,yBACVzC,EAAQwC,qBAAuBzC,EAAKwC,uBACpCvC,EAAQuC,iBAGK,QAAlBxC,EAAK2C,UACP1C,EAAQ2C,UAAY,cACb3C,EAAQ4C,eACf5C,EAAQC,OAASD,EAAQC,OAAO4C,QAAO,SAACC,GAAD,MAAyB,mBAAdA,EAAM9I,QAC7B,OAAlB+F,EAAK2C,UACd1C,EAAQ2C,UAAY,QAChB5C,EAAKgD,cACP/C,EAAQ4C,eAAiB7C,EAAKgD,sBAEvB/C,EAAQ4C,eACf5C,EAAQC,OAASD,EAAQC,OAAO4C,QAAO,SAACC,GAAD,MAAyB,mBAAdA,EAAM9I,iBAGnDgG,EAAQ2C,iBACR3C,EAAQ4C,gBAGV5C,GAIHgD,EAAgC,SAACjD,GACrC,IAAMC,EAAUP,EAAMM,GAwBtB,GAvBIA,EAAKgB,aACPf,EAAQc,KAAOf,EAAKgB,WAAWiB,MAAM,KAAKjD,KAAI,SAACkE,EAAGrJ,GAAJ,MAAW,CAAEoC,GAAIpC,EAAGsD,KAAM+F,OAGtElD,EAAKsB,cACH7B,EAAST,KAAI,SAACqC,GAAD,OAAaA,EAAQnE,SAAOiG,SAASnD,EAAKsB,aACzDrB,EAAQoB,QAAUrB,EAAKsB,aAEvBrB,EAAQuB,aAAexB,EAAKsB,YAC5BrB,EAAQoB,QAAU,UAIY,SAA9BrB,EAAKyB,uBACPxB,EAAQyB,YAAc1B,EAAKyB,qBAC3BxB,EAAQwB,qBAAuB,SAG7BzB,EAAK2B,UACP1B,EAAQ2B,sBAAwB5B,EAAK2B,QACrC1B,EAAQ0B,QAAU,QAGhB3B,EAAKoC,SAAU,CAAC,IAAD,EAC0CpC,EAAKoC,SAASH,MAAM,KAD9D,mBAChBhC,EAAQ4B,oBADQ,KACa5B,EAAQkC,kBADrB,KAEjBlC,EAAQmC,SAAW,OAGrB,GAAIpC,EAAKsC,SAAU,CAAC,IAAD,EACqCtC,EAAKsC,SAASL,MAAM,KADzD,mBAChBhC,EAAQoC,eADQ,KACQpC,EAAQsC,kBADhB,KAIfvC,EAAKyC,uBAGsBlD,EAAc6D,MAAK,SAACC,GAC/C,OAAOA,EAAanG,QAAU8C,EAAKyC,wBAM9BxC,EAAQuC,gBAAkBxC,EAAKyC,sBAFpCxC,EAAQyC,wBAA0B1C,EAAKyC,qBACvCxC,EAAQuC,gBAAkB,UAc9B,MAVuB,SAAnBxC,EAAK4C,UACP3C,EAAQ0C,SAAW,MAEnB1C,EAAQ0C,SAAW,KAGjB3C,EAAK6C,iBACP5C,EAAQ+C,cAAgBhD,EAAK6C,gBAGxB5C,GAyJM,GACbqD,cAnJoB,SAACtD,EAAMuD,EAAQC,GACnC,IAAMC,EAAO7C,EAA4BZ,GAMzC,OALAyD,EAAKtG,KAAOuG,IAAQ1D,EAAKjE,MAAO,CAAE4H,OAAO,EAAMC,OAAQ,mBACvDH,EAAKI,SAAW,IAAI9B,KACpB0B,EAAKK,YAAc,SACnBL,EAAKM,aAAe,UACpBN,EAAK9E,IAAMqB,EAAKrB,IACTqF,IACJC,KADI,UACIV,EADJ,kBAC4BlD,EAAaoD,GAAO,CACnDS,QAAS,CACP,iBAAkBV,EAClB,eAAgB,uCAGnBW,MAAK,SAACC,GAEL,IAAMC,EAAUD,EAAIE,KAAKC,OAEzB,OADetB,EAA8BlD,EAAkBsE,QAmInEG,cA1FoB,SAACvI,EAAI+D,EAAMuD,EAAQC,GACvC,IAAMC,EAAO7C,EAA4BZ,GAQzC,OAPAyD,EAAKI,SAAW,IAAI9B,KACpB0B,EAAKxH,GAAKA,EAGVwH,EAAKgB,WAAa,SAClBhB,EAAKiB,YAAc,UAEZV,IACJC,KADI,UACIV,EADJ,kBAC4BlD,EAAaoD,GAAO,CACnDS,QAAS,CACP,iBAAkBV,EAClB,eAAgB,uCAGnBW,MAAK,SAACC,GAEL,IAAMC,EAAUD,EAAIE,KAAKC,OAEzB,OADetB,EAA8BlD,EAAkBsE,QAwEnEM,aAnEmB,SAAC1I,EAAI+D,EAAMuD,EAAQC,GACtC,IAAMC,EAAO/J,OAAOC,OAAOqG,EAAM,CAAE/D,OACnC,OAAO+H,IAAMC,KAAN,UAAcV,EAAd,iBAAqClD,EAAaoD,GAAO,CAC9DS,QAAS,CACP,iBAAkBV,EAClB,eAAgB,wCA+DpBoB,aA3GgB,uCAAG,WAAO3I,EAAIsH,EAAQC,GAAnB,SAAAqB,EAAA,+EACZb,IACJc,IADI,UACGvB,EADH,2BAC4BtH,GAAM,CACrCiI,QAAS,CACP,iBAAkBV,KAGrBW,MAAK,SAACC,GAEL,IAAMG,EAAStB,EAA8BlD,EAAkBqE,EAAIE,KAAKC,SAExE,OADAA,EAAO1D,YAAc0D,EAAOzD,MACrByD,MAXQ,2CAAH,0DA4GhBQ,UA3Da,uCAAG,WAAOC,EAAKzB,EAAQC,GAApB,iBAAAqB,EAAA,sEAERlG,EAFQ,UAEC4E,EAFD,0BAEyByB,GAFzB,SAGIhB,IAAMc,IAAInG,EAAK,CAC/BuF,QAAS,CACP,iBAAkBV,KALR,cAGRY,EAHQ,yBAQPA,EAAIE,KAAKC,OAAOvF,KAAI,SAACiG,EAAKpL,GAAN,MAAa,CAAEoC,GAAIpC,EAAGsD,KAAM8H,OARzC,yDAUPC,QAAQC,OAAR,OAVO,yDAAH,0DA4DbC,0BA3C6B,uCAAG,WAAO7B,EAAQC,GAAf,mBAAAqB,EAAA,sEAExBlG,EAFwB,UAEf4E,EAFe,8BAGxBE,EAAO,CACX4B,WAAY,kBAJgB,SAMZrB,IAAMC,KAAKtF,EAAK8E,EAAM,CACtCS,QAAS,CACP,iBAAkBV,KARQ,cAMxBY,EANwB,yBAWvBA,EAAIE,KAAKC,QAXc,yDAavBW,QAAQC,OAAR,OAbuB,yDAAH,wDA4C7BG,oBA3BuB,uCAAG,WAAOC,EAAOhC,EAAQC,GAAtB,iBAAAqB,EAAA,sEAGlBlG,EAHkB,UAGT4E,EAHS,4BAGiBgC,EAHjB,mCAINvB,IAAMc,IAAInG,EAAK,CAC/BuF,QAAS,CACP,iBAAkBV,KANE,cAIlBY,EAJkB,0BAShBA,EAAIE,KAAKC,OAAOiB,SAAW,IAAIxG,KAAI,YACzC,MAAO,CACL/C,GAF0D,EAAhBA,GAG1CkB,KAH0D,EAAZpB,WAT1B,yDAgBjBmJ,QAAQC,OAAR,OAhBiB,yDAAH,0DA4BvBM,eApIqB,SAACC,EAAW1F,EAAMuD,EAAQC,GAC/C,IAAIC,EAYJ,OAXIzD,EAAK2F,SACPlC,EAAO,IAAImC,UACNC,OAAO,aAAcH,GAC1BhM,OAAOgB,KAAKsF,GAAMG,SAAQ,SAAC2F,GACzBrC,EAAKoC,OAAOC,EAAM9F,EAAK8F,SAGzBrC,EAAO/D,EAAMM,IACR+F,WAAaL,EAGb1B,IAAMC,KAAN,UAAcV,EAAd,mBAAuClD,EAAaoD,GAAO,CAChES,QAAS,CACP,iBAAkBV,EAClB,eAAgB,wCAqHpBwC,QAAS,CACPjG,oBACAL,U,kBClRWuG,G,OA3FU,SAACjK,GAAW,IAC3B+E,EAA+E/E,EAA/E+E,KAAM5D,EAAyEnB,EAAzEmB,KAAMG,EAAmEtB,EAAnEsB,SAAU4I,EAAyDlK,EAAzDkK,YAAa3C,EAA4CvH,EAA5CuH,OAAQC,EAAoCxH,EAApCwH,OAAQhG,EAA4BxB,EAA5BwB,OAAQ2I,EAAoBnK,EAApBmK,UAAWnI,EAAShC,EAATgC,KAD5C,EAEIlB,mBAAS,IAFb,mBAE3BsJ,EAF2B,KAEdC,EAFc,OAGHC,YAASnJ,GAHN,mBAI1BoJ,GAJ0B,eAI1BA,UAER,GAAa,WAATvI,EAAmB,CACrB,IAQMwI,EAAgBxK,EAAMkB,MAAQ,CAAC,CAAEC,KAAMnB,EAAMkB,QAAW,GAE9D,OACE,yBAAKgB,UAAS,uCAAkCV,GAAUA,EAAOL,IAAS,gBACxE,yBAAKe,UAAU,gBAAgBZ,GAC/B,kBAAC,IAAD,CACEyD,KAAMyF,EACNJ,YAAaA,EACbK,UAAQ,EACR/J,IAAKgK,IAAMC,YACXC,WAlBa,SAACC,GAClBN,EAASM,EAAI5K,KAkBT6K,SAfW,WACfP,EAAS,KAeLrI,UAAU,YACV6I,gBAAiBb,EACjBc,QAAO,uCAAE,WAAOC,GAAP,eAAApC,EAAA,+EAEasB,EAAUc,EAAG1D,EAAQC,GAFlC,OAECY,EAFD,OAGLiC,EAAejC,GAHV,gDAKL8C,QAAQC,KAAK,uCAAb,MALK,yDAAF,yDAaf,OACE,kBAAC,IAAD,CACEhK,KAAMA,EACNiK,OAAQ,SAACC,GAAD,OACN,yBAAKnJ,UAAS,uCAAkCV,GAAUA,EAAOL,IAAS,gBACvEK,GAAUA,EAAOL,IAChB,0BAAMe,UAAU,aACbV,EAAOL,GACR,8BAGHG,EACD,kBAAC,IAAD,CACEyD,KAAMA,EACNqF,YAAaA,EACbK,UAAQ,EACR/J,IAAKgK,IAAMC,YACXC,WAAYS,EAAaC,KACzBR,SAAUO,EAAazD,OACvB1F,UAAU,YACV6I,gBAAiBb,EACjBc,QAAO,uCAAE,WAAOC,GAAP,eAAApC,EAAA,+EAEasB,EAAUc,EAAG1D,EAAQC,GAFlC,OAECY,EAFD,OAGLiC,EAAejC,GAHV,gDAKL8C,QAAQC,KAAK,uCAAb,MALK,yDAAF,8DCzDJI,EATE,SAACvL,GAAW,IACnBqB,EAAarB,EAAbqB,SACR,OAAO,0BAAMa,UAAU,gBAAgBb,ICDnCmK,EAAQ,SAAC,GAA4C,IAA1CpK,EAAyC,EAAzCA,MAAOF,EAAkC,EAAlCA,MAAOuK,EAA2B,EAA3BA,WAAYxL,EAAe,EAAfA,GAAIkB,EAAW,EAAXA,KAC7C,OACE,yBAAKe,UAAS,qBAAgBuJ,IAC5B,kBAAC,IAAD,CAAOzJ,KAAK,QAAQE,UAAU,mBAAmBhB,MAAOA,EAAOC,KAAMA,EAAMlB,GAAIA,IAE/E,2BAAOiC,UAAU,mBAAmBC,QAASlC,GAC1CmB,KAcToK,EAAME,aAAe,CACnBD,WAAY,IAGCD,QCzBTG,EAAO,SAAC3L,GAAU,IAIdqB,EAAgCrB,EAAhCqB,SAAUuK,EAAsB5L,EAAtB4L,KAAMC,EAAgB7L,EAAhB6L,IAAKjO,EAAWoC,EAAXpC,OAGzBkO,EAAU,CAAC,YACXC,EAASF,EAAM,CAACA,GAAO,GAO3B,OATmB,eAAeG,KAAKJ,IAAoB,WAAXhO,KAK9CkO,EAAUA,EAAQG,OAAO,CAAC,uBAC1BF,EAASA,EAAOE,OAAO,CAAC,WAAY,gBAIpC,qCACEL,KAAMA,EACN1J,UAAW4J,EAAQI,KAAK,KACxBL,IAAKE,EAAOhO,OAASgO,EAAOG,KAAK,UAAOC,GACpCnM,GAEHqB,IAYPsK,EAAKS,cAAgB,CACnBP,IAAK,MAGQF,SC9BTU,GAAuB7I,EAAQ,KAC/BC,GAAWD,EAAQ,KAEnB8I,GAAiBD,GACpBrJ,KAAI,SAAC8G,GACJ,OACEA,EAAKyC,aACLzC,EAAK0C,aACL1C,EAAK2C,aACL3C,EAAK4C,aACL5C,EAAK6C,aACL7C,EAAK1E,aAGRwH,OACAX,OAAO,CAAC,UAgdIY,GA3cU,SAAC7M,GAAW,IAC3B8M,EAA0E9M,EAA1E8M,OAAQtL,EAAkExB,EAAlEwB,OAAQ+F,EAA0DvH,EAA1DuH,OAAQC,EAAkDxH,EAAlDwH,OAAQuF,EAA0C/M,EAA1C+M,WAAYC,EAA8BhN,EAA9BgN,cAAeC,EAAejN,EAAfiN,WADjC,EAGQnM,mBAAS,IAHjB,mBAG3BoM,EAH2B,KAGZC,EAHY,KAIlCC,qBAAU,WACRC,EAAIjE,0BAA0B7B,EAAQC,GAAQW,MAAK,SAACG,GAClD6E,EAAiB7E,QAElB,IAR+B,MAWIxH,oBAAS,GAXb,mBAW3BwM,EAX2B,KAWdC,EAXc,OAYMzM,oBAAS,GAZf,mBAY3BC,EAZ2B,KAYbC,EAZa,KAc5BC,EAAgB,kBAAMD,GAAgBD,IAEtCyM,EAAc,SAACC,GACnB,OAAO,kBAAC,EAAD,KAAWA,IAEdC,EAAO,UAAMC,OAAOC,SAASC,OAAtB,aAEPC,EAAkB,SAAC/N,GACvB,MAAM,GAAN,OAAU2N,GAAV,OAAoBhG,IAAQ3H,GAAS,GAAI,CACvC4H,OAAO,EACPC,OAAQ,qBAgBNmG,EAAY,CAChBhO,MACE,kBAAC,EAAD,WACM,IACJ,kBAAC,GAAD,CAAMnC,OAAO,SAASgO,KAAK,8BAA3B,qBAEQ,IAJV,oDAQF/G,YACE,kBAAC,EAAD,wIAEwC,IACtC,kBAAC,GAAD,CAAMjH,OAAO,SAASgO,KAAK,+CAA3B,uBAEQ,IALV,SASF/I,OACE,kBAAC,EAAD,+EAC0E,IACxE,kBAAC,GAAD,CAAMjF,OAAO,SAASgO,KAAK,iCAA3B,0BAEQ,IAJV,4BAUJ,OACE,yBAAK1J,UAAU,mBACb,6BAASjC,GAAG,0BAA0BiC,UAAU,0BAC9C,uBAAGA,UAAU,mBAAb,8FAEE,kBAAC,GAAD,CACEtE,OAAO,SACPgO,KAAK,kEAFP,mDAFF,6DAQ6D,IAC3D,kBAAC,GAAD,CAAMhO,OAAO,SAASgO,KAAK,iDAA3B,kBATF,MAeF,yBAAK1J,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,QACND,KAAK,QACLa,KAAK,SACLkI,YAAY,GACZ5I,SAAUyM,EAAUhO,MACpBmB,MAAO4L,EAAO/M,MACdyB,OAAQA,EACRD,UAAQ,IAGV,yBAAKW,UAAWoL,EAAc,GAAK,eACjC,kBAAC,EAAD,CACEnM,KAAK,MACLa,KAAK,MACL3B,MAAO,CAAE2N,QAASV,EAAc,OAAS,UACzCpM,MAAO4L,EAAOnK,IACdnB,OAAQA,IAEV,0BAAMU,UAAU,cAAc7B,MAAO,CAAE2N,QAASV,EAAc,SAAW,SACtER,EAAOnK,KAAOmL,EAAgBhB,EAAO/M,QAGxC,4BACEiC,KAAK,SACLE,UAAU,8BACVP,QAxFc,WAAO,IACvBgB,EAAQmK,EAARnK,IAEH2K,EAIOR,EAAOnK,MAAKmK,EAAOnK,IAAMmL,EAAgBhB,EAAO/M,QAHtD4C,IACFmK,EAAOnK,IAAP,UAAgB+K,GAAhB,OAA0BhG,IAAQ/E,EAAIsL,UAAUP,EAAQ3P,OAAQ4E,EAAI5E,WAGxEwP,GAAgBD,KAkFLA,EAAc,OAAS,aAKhC,yBAAKpL,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,cACND,KAAK,cACLa,KAAK,SACLe,UAAU,WACVmL,KAAK,IACL5M,SAAUyM,EAAUlJ,YACpB3D,MAAO4L,EAAOjI,YACdrD,OAAQA,EACRD,UAAQ,KAGZ,yBAAKW,UAAU,yBACb,0BAAMA,UAAU,aAAhB,QACA,kBAAC,EAAD,CACEjC,GAAG,0BACH8E,KAAM+H,EAAO/H,KACbwC,OAAQA,EACRC,OAAQA,EACR2C,UAAWkD,EAAItE,UACf5H,KAAK,OACLgN,WAAW,OACX5M,UAAQ,EACR2I,YAAY,yBACZ1I,OAAQA,EACRF,SAAUkM,EACR,0HAIN,yBAAKtL,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,eACND,KAAK,YACLa,KAAK,SACLD,QAASmL,EACT3L,UAAQ,EACRW,UAAU,YACVV,OAAQA,KAGZ,yBAAKU,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,YACND,KAAK,YACLa,KAAK,SACLD,QAASuK,GACT/K,UAAQ,EACRW,UAAU,YACVZ,SAAUyM,EAAUlL,OACpBnB,SAAS,wFACTF,OAAQA,IAEV,kBAAC,EAAD,CACEL,KAAK,kBACLa,KAAK,SACLV,SAAUkM,EAAY,gFAGtB/L,SAA+B,UAArBqL,EAAO1H,UACjB5D,OAAQA,EACRD,UAAQ,KAGZ,yBAAKW,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,wBACND,KAAK,YACLa,KAAK,SACLR,OAAQA,KAGZ,yBAAKU,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,eACND,KAAK,eACLa,KAAK,SACLT,UAAQ,EACRG,SAAS,uJACTF,OAAQA,KAGZ,yBAAKU,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,gBACND,KAAK,gBACLa,KAAK,SACLT,UAAQ,EACRC,OAAQA,KAGZ,yBAAKU,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,YACND,KAAK,YACLa,KAAK,SACLT,UAAQ,EACRG,SAAS,2GACTF,OAAQA,KAGZ,yBAAKU,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,sBACND,KAAK,sBACLa,KAAK,SACLD,QAAS,CACP,CACEb,MAAO,SACPjB,GAAI,gBACJmB,MACE,oFAEJ,CACEF,MAAO,oBACPjB,GAAI,2BACJmB,MAAO,gFAET,CACEF,MAAO,aACPjB,GAAI,oBACJmB,MAAO,wEAGXc,UAAU,YACVV,OAAQA,EACRD,UAAQ,KAGZ,yBAAKW,UAAU,yBACb,kBAAC,EAAD,CACEd,MAAM,UACND,KAAK,UACLa,KAAK,SACLD,QAAS0B,GACTvB,UAAU,YACVV,OAAQA,EACRD,UAAQ,IAEV,kBAAC,EAAD,CACEJ,KAAK,eACLa,KAAK,SACLV,SAAUkM,EAAY,sJAGtB/L,SAA6B,UAAnBqL,EAAOzH,QACjB7D,OAAQA,EACRD,UAAQ,KAGZ,yBAAKW,UAAU,yBACb,yBAAKA,UAAU,eACb,0BAAMA,UAAU,aAAhB,UADF,IAC4C,6BACzCV,GAAUA,EAAO4M,QAAU,0BAAMlM,UAAU,aAAaV,EAAO4M,QAChE,kBAAC,EAAD,CACEhN,MAAM,uBACND,KAAK,uBACLK,OAAQA,EACRN,MAAM,OACNjB,GAAG,oBAEL,kBAAC,EAAD,CACEmB,MAAM,2BACND,KAAK,uBACLD,MAAM,QACNjB,GAAG,oBAEL,kBAAC,EAAD,CACEkB,KAAK,cACLa,KAAK,SACLd,MAAO4L,EAAOpH,YACdlE,OAAQA,EACRF,SAAUkM,EACR,0LAEF/L,SAA0C,SAAhCqL,EAAOrH,yBAKvB,yBAAKvD,UAAU,yBACb,yBAAKA,UAAU,eACb,0BAAMA,UAAU,aAAhB,qBADF,IACuD,6BACpDV,GAAUA,EAAOmE,SAAW,0BAAMzD,UAAU,aAAaV,EAAOmE,SACjE,kBAAC,EAAD,CACEvE,MAAM,+CACND,KAAK,UACLD,MAAM,QACNM,OAAQA,EACRvB,GAAG,qBAEL,kBAAC,EAAD,CACEmB,MAAM,2CACND,KAAK,UACLD,MAAM,OACNjB,GAAG,qBAEL,kBAAC,EAAD,CACEkB,KAAK,wBACLa,KAAK,SACLd,MAAO4L,EAAOlH,sBACdpE,OAAQA,EACRF,SAAUkM,EACR,0HAEF/L,SAA6B,UAAnBqL,EAAOnH,YAKvB,yBAAKzD,UAAU,yBACb,yBAAKA,UAAU,eACb,0BAAMA,UAAU,aAAhB,WAEE,yBAAKA,UAAS,kBAAanB,EAAe,OAAS,KACjD,kBAAC,EAAD,CACEsB,SAAU,EACV5B,OAAO,OACPD,MAAM,OACNH,MAAO,CAAE+B,WAAY,QACrBT,QAAS,kBAAMV,KACfqB,QAAS,SAAC+L,GACU,KAAdA,EAAE7L,SACJvB,OAIN,0BAAMiB,UAAU,eACd,0BACEG,SAAU,EACVH,UAAU,QACVP,QAAS,kBAAMX,GAAgB,IAC/ByB,KAAK,SACL6L,UAAW,kBAAMtN,GAAgB,KAEjC,0BAAMkB,UAAU,aAAhB,SAEF,wCACA,0OAOE,IACR,6BACCV,GAAUA,EAAO4E,UAAY,0BAAMlE,UAAU,aAAaV,EAAO4E,UAClE,kBAAC,EAAD,CACEhF,MAAM,8EACND,KAAK,WACLD,MAAM,QACNM,OAAQA,EACRvB,GAAG,sBAEL,kBAAC,EAAD,CACEmB,MAAM,oEACND,KAAK,WACLD,MAAM,OACNM,OAAQA,EACRvB,GAAG,sBAEL,kBAAC,EAAD,CACEkB,KAAK,sBACLa,KAAK,OACL/B,GAAG,sBACHiB,MAAO4L,EAAOjH,oBACdrE,OAAQA,EACRF,SAAUkM,EACR,qHAEF/L,SAA8B,UAApBqL,EAAO1G,WAEnB,kBAAC,EAAD,CACEjF,KAAK,oBACLa,KAAK,OACL/B,GAAG,oBACHiB,MAAO4L,EAAO3G,kBACd3E,OAAQA,EACRF,SAAUkM,EACR,mHAEF/L,SAA8B,UAApBqL,EAAO1G,aAKvB,yBAAKlE,UAAU,yBACb,4BACE7B,MAAO,CAAE2N,QAAS,QAClB9L,UAAU,iCACVF,KAAK,SACLL,QAAO,sBAAE,sBAAAkH,EAAA,sEACDmE,EAAc,aAAa,GAD1B,OAEPC,IAFO,4CAJX,cAWA,4BACE/K,UAAU,aACVF,KAAK,SACLL,QAAO,sBAAE,sBAAAkH,EAAA,sEACDmE,EAAc,aAAa,GAD1B,OAEPC,IAFO,4CAHX,sBAWDF,GACC,yBAAK1M,MAAO,CAAEkO,UAAW,SACvB,yBAAKrM,UAAU,yBACb,0CAEE,6BAFF,IAEU6K,EAFV,S,QCndGyB,UAAaC,MAAM,CAChCC,UAAWF,OACXzO,MAAOyO,OAAajN,SAAS,qBAC7BoN,UAAWH,OAAajN,SAAS,4BACjCqN,aAAcJ,OAAaK,KAAK,aAAa,SAACH,EAAWI,GACvD,OAAOJ,EAAYI,EAASA,EAAOvN,SAAS,0BAE9CwN,UAAWP,OAAaK,KAAK,aAAa,SAACH,EAAWI,GACpD,OAAOJ,EAAYI,EAASA,EAAOvN,SAAS,4BAE9CyN,cAAeR,OAAaK,KAAK,aAAa,SAACH,EAAWI,GACxD,OAAOJ,EACHI,EACAA,EAAOG,MAAM,uBAAuB1N,SAAS,gCAEnDsD,YAAa2J,OAAaK,KAAK,aAAa,SAACH,EAAWI,GACtD,OAAOJ,EAAYI,EAASA,EAAOvN,SAAS,8BAE9CwD,KAAMyJ,OAAYK,KAAK,aAAa,SAACH,EAAWI,GAC9C,OAAOJ,EACHI,EACAA,EACGI,GACCV,OAAaC,MAAM,CACjBtN,KAAMqN,OAEHW,IAAI,GACJC,IAAI,KACJC,QAAQ,mBACXC,cAAed,UAGlBjN,SACC,0LAGV6D,UAAWoJ,OAAaK,KAAK,aAAa,SAACH,EAAWI,GACpD,OAAOJ,EAAYI,EAASA,EAAOvN,SAAS,4BAE9CgO,UAAWf,OACXgB,oBAAqBhB,OAAaK,KAAK,aAAa,SAACH,EAAWI,GAC9D,OAAOJ,EAAYI,EAASA,EAAOvN,SAAS,+BAE9CmE,YAAa8I,OAEVjN,SAAS,oCACTsN,KAAK,wBAAwB,SAACY,EAAoBX,GACjD,MAA8B,UAAvBW,EAAiCX,EAASN,UAErD7I,QAAS6I,OAENxC,KAAK,yBAA0B,wCAAwC,SACtE9K,GAEA,IAAMwO,EAAWpR,KAAKqR,KAAK,GAAGzO,MAC9B,QAAc,SAAVA,IACGwO,EAAS9J,0BAIpBA,sBAAuB4I,OACvBhJ,aAAcgJ,OAEXjN,SAAS,uBACToB,IAAI,iCACJkM,KAAK,WAAW,SAACxJ,EAASyJ,GACzB,MAAmB,UAAZzJ,EAAsByJ,EAASN,UAE1CnJ,QAASmJ,OAAaK,KAAK,aAAa,SAACH,EAAWI,GAClD,OAAOJ,EAAYI,EAASA,EAAOvN,SAAS,0BAE9C6E,SAAUoI,OAEPxC,KAAK,qBAAsB,qCAAqC,SAAkB9K,GACjF,IAAMwO,EAAWpR,KAAKqR,KAAK,GAAGzO,MAC9B,SAAc,SAAVA,GACGwO,EAAS7J,qBAAwB6J,EAASvJ,sBAIrDN,oBAAqB2I,OAAWoB,UAAU,qCAC1CzJ,kBAAmBqI,OAAWoB,UAAU,qCCnF3B,IACb7P,MAAO,QACP6O,aAAc,eACdG,UAAW,YACXC,cAAe,gBACfnK,YAAa,cACbO,UAAW,YACXoK,oBAAqB,sBACrBK,aAAc,eACdnK,YAAa,SACbC,QAAS,UACTN,QAAS,UACTG,aAAc,UACdY,SAAU,WACVrB,KAAM,OACN4J,UAAW,eACX9I,oBAAqB,sBACrBM,kBAAmB,qBCjBN,IACbV,qBAAsB,OACtBE,QAAS,QACTmK,iBAAkB,QAClB1J,SAAU,SCJG,IACb2J,eAAgB,GAChBC,OAAQ,GACRC,YAAa,GACbzJ,gBAAiB,GACjB0J,mBAAoB,GACpBC,YAAa,GACb9J,eAAgB,KAChBE,kBAAmB,KACnB6J,0BAA2B,GAC3BC,WAAY,GACZC,OAAQ,GACRC,mBAAoB,GACpBC,SAAU,GACV7J,SAAU,GACVK,cAAe,I,qBCPXyJ,I,OAAqB,SAACC,GAAD,OAAgBA,EAAWvP,OAEhDwP,GAAmB,SAACD,EAAD,GAA4B,IAAbnH,EAAY,EAAZA,MAChCqH,EAAYF,EAAWvP,KACvB0P,EAAOD,EAAU3C,UAAU1E,EAAMxL,OAAQ6S,EAAU7S,QACzD,OACE,6BACE,8BAAOwL,GACNsH,IAiIQC,GA5HM,SAAC9Q,GAAW,IAE7BmB,EASEnB,EATFmB,KACAG,EAQEtB,EARFsB,SACAyP,EAOE/Q,EAPF+Q,WACA7P,EAMElB,EANFkB,MACAgJ,EAKElK,EALFkK,YACA3C,EAIEvH,EAJFuH,OACAC,EAGExH,EAHFwH,OACAhG,EAEExB,EAFFwB,OACA2I,EACEnK,EADFmK,UAV4B,EAYQrJ,mBAAS,IAZjB,mBAYvBsJ,EAZuB,KAYVC,EAZU,OAaEvJ,mBAAS,MAbX,mBAavBkQ,EAbuB,KAabC,EAba,OAcC3G,YAASnJ,GAdV,mBAetBoJ,GAfsB,eAetBA,UAfsB,EAiBIzJ,mBAAS,IAjBb,mBAiBvBoQ,EAjBuB,KAiBZC,EAjBY,KA4B9B/D,qBAAU,WACR+D,EAAaJ,GAAc,IACvB7P,GAAO+P,EAAY,CAAEhR,GAAIiB,EAAOC,KAAM4P,MACzC,IAEH,IAAMK,EAAc,uCAAG,WAAOC,GAAP,iBAAAxI,EAAA,yDACfyI,GAAqBD,GAAS,IAAIE,OAAOC,cAG3B,KAFdC,EAAcH,EAAkBvT,QAFjB,yCAIS,IAJT,gCAMLoM,EAAUmH,EAAmB/J,EAAQC,GANhC,uCAMyCV,QAC1D,SAACgD,GAAD,OAAUA,EAAK3I,KAAKqQ,cAAcE,MAAM,EAAGD,KAAiBH,MAP3C,yCAUnBpG,QAAQC,KAAK,uCAAb,MAVmB,kBAWZ,IAXY,0DAAH,sDAiBdwG,EAA2B,uCAAG,6BAAA9I,EAAA,6DAAS3H,EAAT,EAASA,MAAT,KAClCmJ,EADkC,SACb+G,EAAelQ,GADF,6EAAH,sDAyBjC,OACE,yBAAKgB,UAAS,uCAAkCV,GAAUA,EAAOL,IAAS,gBACxE,yBAAKe,UAAU,gBAAgBZ,GAC/B,kBAAC,KAAD,CACE8I,YAAaA,EACbuH,4BAA6BA,EAC7BC,4BA1B8B,WAClCvH,EAAe,KA0BXoG,mBAAoBA,GACpBE,iBAAkBA,GAClBkB,qBAzBuB,SAACtP,EAAD,GAA4B,IAAlBmO,EAAiB,EAAjBA,WAErCO,EAAYP,GAEZS,EAAaT,EAAWvP,MAExBoJ,EAASmG,EAAWzQ,KAoBhB6R,MAAO,CACLC,UAAW,+BACXC,cAAe,qCACfC,MAAO,YACPC,UAAW,iCACXC,aAAc,oCACdC,qBAAsB,2CACtBC,yBAA0B,iDAC1BC,gBAAiB,sCACjB5B,WAAY,gCACZ6B,gBAAiB,uCACjBC,sBAAuB,6CACvBC,iBAAkB,uCAClBC,sBAAuB,8CACvBC,aAAc,oCAEhBC,WAAY,CACV1I,cACAhJ,MAAOgQ,EACP2B,SArFS,SAACtQ,GAChB,IAAM8O,EAAQ9O,EAAM3E,OAAOsD,MACtBmQ,IACH9G,EAAS,IACT0G,EAAY,OAEdE,EAAaE,GAAS,KAgFhByB,OArCO,WAGX3B,EADEH,EACWA,EAAS7P,KACJ,UCpFlB4R,GAAYvP,EAAQ,KACpBD,GAAgBC,EAAQ,KAA2BoJ,MAAK,SAAC/D,EAAGmK,GAChE,IAAMC,GAAUpK,EAAEzH,OAAS,IAAIoQ,cACzB0B,GAAUF,EAAE5R,OAAS,IAAIoQ,cAC/B,OAAIyB,EAASC,GAAgB,EACzBD,EAASC,EAAe,EACrB,KAGHnF,GAAY,CAChB+D,MAAO,kBAAC,EAAD,0DACP7B,YACE,kBAAC,EAAD,sKAKFE,YACE,kBAAC,EAAD,yIAKFC,0BACE,kBAAC,EAAD,mIAEgC,IAC9B,kBAAC,GAAD,CACExS,OAAO,SACPgO,KAAK,wFAFP,YAHF,KAYFyE,WACE,kBAAC,EAAD,6MAMFE,mBACE,kBAAC,EAAD,yIAwRW4C,GAjRY,SAACnT,GAAW,IAGToT,EAFpBtG,EAAkE9M,EAAlE8M,OAAQvF,EAA0DvH,EAA1DuH,OAAQC,EAAkDxH,EAAlDwH,OAAQuF,EAA0C/M,EAA1C+M,WAAYC,EAA8BhN,EAA9BgN,cAAeC,EAAejN,EAAfiN,WAO3D,OACE,yBAAK/K,UAAU,mBACb,6BAASjC,GAAG,0BAA0BiC,UAAU,0BAC9C,uBAAGA,UAAU,mBAAb,4QAG4F,IAC1F,kBAAC,GAAD,CAAMtE,OAAO,SAASgO,KAAK,oDAA3B,kBAJF,MAUF,yBAAK1J,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,4BACND,KAAK,iBACLa,KAAK,SACLD,QAAS,CAAC,MAAO,UAIvB,yBAAKG,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,SACND,KAAK,WACLa,KAAK,SACLV,SAAS,gLACTI,SAAUqM,GAAU+D,UAI1B,yBAAK5P,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,sBACND,KAAK,kBACLa,KAAK,SACLV,SAAS,0DACTI,SAAUqM,GAAUkC,gBAI1B,yBAAK/N,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,uBACND,KAAK,kBACLD,MAAO4L,EAAOtG,gBACdxE,KAAK,SACLD,QAASwB,KAEX,kBAAC,EAAD,CACE9B,SAAqC,UAA3BqL,EAAOtG,gBACjBrF,KAAK,0BACLD,MAAO4L,EAAOpG,wBACd1E,KAAK,SACLV,SAAS,kFAIf,yBAAKY,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,4BACND,KAAK,sBACLa,KAAK,SACLD,QAAS,CACP,YACA,cACA,SACA,YACA,aACA,QACA,WACA,aACA,WACA,YACA,qBACA,sBACA,mBACA,oBACA,uBACA,UACA,YACA,cACA,qBACA,SACA,SACA,iBAKR,yBAAKG,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,2BACND,KAAK,eACLa,KAAK,SACLV,SAAS,0DACTI,SAAUqM,GAAUoC,gBAI1B,yBAAKjO,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,6BACND,KAAK,iBACLD,MAAO4L,EAAOzG,eACdrE,KAAK,SACLD,QAASgR,OAIf,yBAAK7Q,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACET,UAAWqL,EAAOzG,eAClBjF,MAAM,6BACND,KAAK,oBACLD,MAAO4L,EAAOvG,kBACdvE,KAAK,SACLD,SAnIkBqR,EAmIUtG,EAAOzG,gBAlI9B0M,GAAU3L,MAAK,SAAC0C,GAAD,OAAUA,EAAK5I,QAAUkS,MAAsB,IAC/DC,aAqIV,yBAAKnR,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,4CACND,KAAK,4BACLa,KAAK,SACLN,SAAUqM,GAAUqC,8BAI1B,yBAAKlO,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,oBACND,KAAK,oBACLa,KAAK,SACLN,SAAUqM,GAAUsC,eAI1B,yBAAKnO,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,eACND,KAAK,eACLa,KAAK,OACLV,SAAS,0BACTI,SAAUqM,GAAUsC,eAI1B,yBAAKnO,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,+BACND,KAAK,oBACLa,KAAK,SACLN,SAAUqM,GAAUwC,uBAI1B,yBAAKrO,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,oBACND,KAAK,WACLa,KAAK,SACLD,QAAS,CAAC,MAAO,UAIF,OAApB+K,EAAOnG,UACN,yBAAKzE,UAAU,yBACb,yBAAKA,UAAU,eACb,0BAAMA,UAAU,aAAhB,yBACA,kBAAC,GAAD,CACEd,MAAM,wBACND,KAAK,gBACLa,KAAK,SACLd,MAAO4L,EAAO9F,cAEd+J,WAAYjE,EAAO9F,cACnBkD,YAAY,wBACZ5I,SAAS,yDACT6I,UAAWkD,EAAI/D,oBACf/B,OAAQA,EACRC,OAAQA,MAKhB,yBAAKtF,UAAU,yBACb,4BACE7B,MAAO,CAAE2N,QAAS,QAClB9L,UAAU,iCACVF,KAAK,SACLL,QAAO,sBAAE,sBAAAkH,EAAA,sEACDmE,EAAc,aAAa,GAD1B,OAEPC,IAFO,4CAJX,cAWA,4BACE/K,UAAU,aACVF,KAAK,SACLL,QAAO,sBAAE,sBAAAkH,EAAA,sEACDmE,EAAc,aAAa,GAD1B,OAEPC,IAFO,4CAHX,sBAWDF,GACC,yBAAK1M,MAAO,CAAEkO,UAAW,SACvB,yBAAKrM,UAAU,uBACb,0CAEE,6BAFF,IAEU6K,EAFV,SCrSGyB,UAAaC,MAAM,CAChCsB,eAAgBvB,OAChB8E,SAAU9E,OACV+E,gBAAiB/E,OAAa7L,MAC9B8D,qBAAsB+H,OACtBgF,0BAA2BhF,OAExB+C,OACAlC,QAAQ,sBAAuB,0CAClCoE,aAAcjF,OAAa7L,MAC3B+Q,kBAAmBlF,OACnBmF,WAAYnF,OAAa7L,MACzBiR,kBAAmBpF,OACnBqF,kBAAmBrF,OACnBsF,aAActF,OAAWoB,UAAU,yC,UC+OtBmE,GAxPQ,SAAC/T,GAAW,IACzB8M,EAA0D9M,EAA1D8M,OAAQtL,EAAkDxB,EAAlDwB,OAAQwL,EAA0ChN,EAA1CgN,cAAeC,EAA2BjN,EAA3BiN,WAAYF,EAAe/M,EAAf+M,WAC7CnK,EAAWkK,EAAOlK,UAAY,GAC5BD,EAA6CC,EAA7CD,IAAKxB,EAAwCyB,EAAxCzB,KAAM0D,EAAkCjC,EAAlCiC,YAAamP,EAAqBpR,EAArBoR,SAAUC,EAAWrR,EAAXqR,OAHV,EAKkBnT,oBAAS,GAL3B,mBAKzBoT,EALyB,KAKLC,EALK,OAM0BrT,oBAAS,GANnC,mBAMzBsT,EANyB,KAMDC,EANC,KA0BhC,OACE,yBAAKnS,UAAU,mBACb,6BAASjC,GAAG,0BAA0BiC,UAAU,0BAC9C,wBAAIA,UAAU,mBAAmBjC,GAAG,mBAApC,mBAGA,uBAAGiC,UAAU,mBAAb,8JAEmE,IACjE,kBAAC,GAAD,CAAMtE,OAAO,SAASgO,KAAK,iCAA3B,0BAHF,sGAUF,yBAAK1J,UAAU,yBACb,yBAAKA,UAAU,eAEb,2BAAOA,UAAU,aAAjB,QAECgS,GAAsBvR,EACrB,6BACE,uBAAGT,UAAU,gBAAb,6GAIA,kBAAC,EAAD,CACEoS,QAASJ,EACTjU,GAAG,MACHkB,KAAK,eACLa,KAAK,MACLd,MAAOyB,EACPhB,QAAS,WACPqL,EAAc,eAAgB,IAC9BmH,GAAoB,IAEtB3S,OAAQA,KAGV4S,EACF,kBAAC,EAAD,CACE3S,UAAQ,EACRN,KAAK,oBACLa,KAAK,QACLd,MAAO0B,EAAS2R,SAChB5S,QAAS,WACPqL,EAAc,kBAAmB,MACjCA,EAAc,oBAAqB,IACnCA,EAAc,gBAAiB,IAC/BA,EAAc,uBAAwB,IACtCA,EAAc,kBAAmB,IACjCA,EAAc,oBAAqB,IACnCqH,GAAwB,MAI5B,oCACE,6BAEA,2BAAOhS,SAAS,IAAIF,QAAQ,SAASD,UAAU,+BAC7C,uBAAGA,UAAU,qBAAqBsS,cAAY,SADhD,gBAGA,2BAAOvU,GAAG,SAASkB,KAAK,kBAAkBa,KAAK,OAAO6Q,SAjFzC,SAACtQ,GASxB,GARA8R,GAAyBD,GACzBpH,EAAc,oBAAqBzK,EAAMkS,cAAcC,MAAM,GAAGvT,MAC3DA,GACH6L,EAAc,gBAAiBzK,EAAMkS,cAAcC,MAAM,GAAGvT,MAEzD6S,GACHhH,EAAc,oBAAqBzK,EAAMkS,cAAcC,MAAM,GAAG1S,OAE7DiS,EAAQ,CACX,IAAMU,EACJpS,EAAMkS,cAAcC,MAAM,GAAGvT,MAC7BoB,EAAMkS,cAAcC,MAAM,GAAGvT,KAAK8E,MAAM,KAAKyL,OAAO,GAAG,GACzD1E,EAAc,kBAAmB2H,GAAkB,IAErD3H,EAAc,kBAAmBzK,EAAMkS,cAAcC,MAAM,OAoEjD,2BACErS,SAAS,IACTF,QAAQ,MACRD,UAAU,8BACVP,QAAS,WACPwS,GAAqBD,KAGvB,uBAAGhS,UAAU,aAAasS,cAAY,SARxC,iBAWA,uBAAGtS,UAAU,gBAAb,mFAOR,yBAAKA,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,OACND,KAAK,gBACLa,KAAK,SACLkI,YAAY,GACZ5I,SAAS,GACTJ,MAAOC,MAIb,yBAAKe,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,cACND,KAAK,uBACLa,KAAK,SACLe,UAAU,WACVmL,KAAK,IACL5M,SAAS,wCACTJ,MAAO2D,MAIb,yBAAK3C,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,aACND,KAAK,oBACLa,KAAK,SACLD,QAAS6S,GACT1T,MAAO8S,MAIb,yBAAK9R,UAAU,yBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CACEd,MAAM,SACND,KAAK,kBACLa,KAAK,SACLV,SAAS,mGACTJ,MAAO+S,MAKb,yBAAK/R,UAAU,yBACb,yBAAKA,UAAU,eACb,4BACEF,KAAK,SACLE,UAAU,iCACVP,QAAS,WACPqL,EAAc,WAAW,GACzBA,EAAc,aAAa,GAC3BmH,GAAoB,GACpBE,GAAwB,GACxBpH,MARJ,mCAgBHH,EAAO+H,eAAiB,EACvB,yBAAK3S,UAAU,yBACb,yBAAKA,UAAU,yBACb,+CACoB4K,EAAOgI,kBAD3B,MACiDhI,EAAO+H,eADxD,+BAIA,6BACA,qGAIJ,GAGF,yBAAK3S,UAAU,yBACb,4BACE7B,MAAO,CAAE2N,QAAS,QAClB9L,UAAU,iCACVF,KAAK,SACLL,QAAS,WACPqL,EAAc,WAAW,GACzBA,EAAc,aAAa,GAC3BC,MAPJ,cAYA,4BACE/K,UAAU,aACVF,KAAK,SACLL,QAAS,WACPqL,EAAc,WAAW,GACzBC,MALJ,uBAYDF,GACC,yBAAK1M,MAAO,CAAEkO,UAAW,SACvB,yBAAKrM,UAAU,yBACb,0CAEE,6BAFF,IAEU6K,EAFV,SC/NGyB,UAAaC,MAAM,CAChC7L,SAAU4L,OAAaC,MAAM,CAC3BtN,KAAMqN,OACN3J,YAAa2J,OACbwF,SAAUxF,OACVyF,OAAQzF,OACR7L,IAAK6L,OAEF7L,IACC,4FAEJgH,OAAQ6E,WCbG,IACbrN,KAAM,GACN0D,YAAa,GACblC,IAAK,GACLsR,OAAQ,GACRD,SAAU,GACVrK,OAAQ,MC0DKoL,GAzDI,SAAC/U,GAAW,IACrBgV,EAA6BhV,EAA7BgV,YAAaC,EAAgBjV,EAAhBiV,YACrB,OACE,yBAAK/S,UAAU,iBAAiBjC,GAAG,kBACjC,yBACEoC,SAAS,IACTI,KAAK,SACLP,UAAS,iBAA4B,IAAhB8S,EAAoB,SAAW,IACpDrT,QAAS,kBAAMsT,EAAY,IAC3B3S,QAAS,SAAC+L,GACU,KAAdA,EAAE7L,SACJyS,EAAY,IAGhBhV,GAAG,kBAEH,oDAEF,yBACEoC,SAAS,IACTI,KAAK,OACLP,UAAS,iBAA4B,IAAhB8S,EAAoB,SAAW,IACpD1S,QAAS,SAAC+L,GACU,KAAdA,EAAE7L,SACJyS,EAAY,IAGhBtT,QAAS,WACPsT,EAAY,KAGd,sDAEF,yBACE5S,SAAS,IACTI,KAAK,SACLP,UAAS,iBAA4B,IAAhB8S,EAAoB,SAAW,IACpD1S,QAAS,SAAC+L,GACU,KAAdA,EAAE7L,SACJyS,EAAY,IAGhBtT,QAAS,WACPsT,EAAY,KAGd,oDCQOC,I,OAzDE,SAAClV,GAChBoN,qBAAU,WACRO,OAAOwH,SAAS,EAAG,KAClB,IAHuB,IAKlBnT,EAAmChC,EAAnCgC,KAAMR,EAA6BxB,EAA7BwB,OAAQ4T,EAAqBpV,EAArBoV,QAASC,EAAYrV,EAAZqV,QACzBC,EACJ9T,GACAA,EAAOwB,KAAI,SAACuS,GACV,GAA6B,kBAAlBA,EAAMH,QACf,OAAOG,EAET,GAA6B,kBAAlBA,EAAMH,QAAsB,CACrC,IAAIhU,EAAQ1D,OAAOgB,KAAK6W,EAAMH,SAAS,GACjCI,EAAeD,EAAMH,QAAQhU,GAEnC,MAAO,CACLA,MAFFA,EAAkB,QAAVA,EAAkB,QAAUA,EAGlCD,KAAMoU,EAAMpU,KACZiU,QAASI,GAGb,OAAO,QAEL1T,EACJwT,GACAA,EAAatS,KAAI,SAACuS,GAAD,OACf,uBAAGtX,IAAKsX,EAAMpU,MACZ,2BAAIoU,EAAMnU,OADZ,IACwBmU,EAAMH,YAGlC,OACE,yBAAKlT,UAAU,aACb,yBAAKA,UAAU,mBACb,yBAAKA,UAAS,+BAA0BF,IACtC,yBAAKE,UAAU,SACf,yBAAKA,UAAU,mBACb,wBAAIA,UAAU,sBAAsBmT,GACpC,yBAAKnT,UAAU,mBACO,kBAAZkT,GAAwBA,EACZ,kBAAZA,GAAwBA,EAAQpS,KAAI,SAAC8G,GAAD,OAAU,uBAAG7L,IAAK6L,GAAOA,MACpEhI,SC1BT2T,GAAe,SAACjU,GAAD,OACnB9D,OAAOgB,KAAK8C,GAAQwB,KAAI,SAAC7B,GACvB,MAAO,CACLA,OACAC,MAAOsU,GAAuBvU,GAC9BiU,QAAS5T,EAAOL,QAIhBwU,GAAa,SAACrS,GAClB,MAAM,GAAN,OAAU,CAAC,WAAIA,EAAKsS,YAAalE,OAAO,GAAI,WAAIpO,EAAKuS,cAAenE,OAAO,IAAIxF,KAAK,KAApF,aAA6F,CAC3F,WAAI5I,EAAKwS,WAAa,GAAIpE,OAAO,GACjC,WAAIpO,EAAKyS,WAAYrE,OAAO,GAC5BpO,EAAK0S,cAAcC,WAAWvE,OAAO,IACrCxF,KAAK,OAGHgK,GAAU,SAAClW,GAAW,IAClBgV,EAAgBhV,EAAhBgV,YAER,OAAoB,IAAhBA,EAEA,wBAAI9S,UAAU,mBAAmBjC,GAAG,mBAApC,qBAKgB,IAAhB+U,EAEA,wBAAI9S,UAAU,mBAAmBjC,GAAG,mBAApC,uBAKG,IAoVMkW,GAjVM,SAACnW,GAAW,IACvBuH,EAAwCvH,EAAxCuH,OAAQC,EAAgCxH,EAAhCwH,OAAQ4O,EAAwBpW,EAAxBoW,SAAUC,EAAcrW,EAAdqW,UADJ,EAGQvV,oBAAS,GAHjB,mBAGvBwV,EAHuB,KAGVC,EAHU,OAIUzV,mBAASuV,GAJnB,mBAIvBG,EAJuB,KAITC,EAJS,OAKM3V,mBAAS,uCACxC4V,IACAC,IAFuC,IAG1CC,MAAO,QACPlI,WAAW,KATiB,mBAKvBmI,EALuB,KAKXC,EALW,OAYQhW,mBAAS,GAZjB,mBAYvBkU,EAZuB,KAYV+B,EAZU,OAaJjW,qBAbI,mBAavBkW,EAbuB,KAahBC,EAbgB,OAcMnW,qBAdN,mBAcvBiM,EAduB,KAcXmK,EAdW,KAgBxBC,EAAc,SAACC,GACnB,IAAIhC,EAAU,GAIVA,EAHAgC,EAAIC,SAEFD,EAAIC,SAAS/O,MAAQ8O,EAAIC,SAAS/O,KAAKiN,MAC/B7X,OAAOgB,KAAK0Y,EAAIC,SAAS/O,KAAKiN,OAAOvS,KAAI,SAAC8G,GAClD,MAA6C,kBAAlCsN,EAAIC,SAAS/O,KAAKiN,MAAMzL,GAC1BsN,EAAIC,SAAS/O,KAAKiN,MAAMzL,GAAMoC,KAAK,MAErCkL,EAAIC,SAAS/O,KAAKiN,MAAMzL,MAGvB,+EAEHsN,EAAIE,QAGX,uGAGQ,+EAGZL,EAAS,kBAAC,GAAD,CAAUjV,KAAK,QAAQqT,QAAQ,wBAAwBD,QAASA,KACzEzH,OAAOwH,SAAS,EAAG,IAgBrB,OAbIqB,GAAgBF,IAClBC,GAAe,GACfgB,EAAI3O,aAAa4N,EAAcjP,EAAQC,GACpCW,MAAK,SAACI,GACL,IAAMiP,EAAS9Z,OAAOC,OAAO,GAAI4K,GACjCiP,EAAO3S,YAAc0D,EAAOzD,MAC5BgS,EAAcpZ,OAAOC,OAAO,GAAIkZ,EAAYW,IAC5Cf,EAAgBe,EAAOvX,OAExBwX,MAAMN,IAKT,yBAAKjV,UAAU,kBACb,kBAAC,GAAD,CAAY8S,YAAaA,EAAaC,YAAa8B,IACnD,kBAAC,GAAD,CAAS/B,YAAaA,IACrBgC,EAGgB,IAAhBhC,GACC,kBAAC,IAAD,CACE0C,cAAeb,EACfc,mBAAmB,OACnBC,kBAAkB,EAClBC,gBAAgB,EAChBC,iBAAiB,EACjBC,SAAU,SAACjL,GAETmK,IAEIT,EACFe,EAAI/O,cAAcgO,EAAc1J,EAAQvF,EAAQC,GAC7CW,MAAK,SAACC,GACL0O,EAAcpZ,OAAOC,OAAO,GAAIyK,EAAK,CAAEvD,YAAauD,EAAItD,SACpDgI,EAAO4B,UACTwI,EAAc,IAAInR,OAElBkR,EAAS,kBAAC,GAAD,CAAUjV,KAAK,UAAUqT,QAAQ,gCAC1C0B,EAAe,GACfpJ,OAAOwH,SAAS,EAAG,OAGtBsC,MAAMN,GAETI,EAAIjQ,cAAcwF,EAAQvF,EAAQC,GAC/BW,MAAK,SAACC,GACL0O,EAAc1O,GACdqO,EAAgBrO,EAAInI,IAChB6M,EAAO4B,UACTwI,EAAc,IAAInR,OAElBkR,EAAS,kBAAC,GAAD,CAAUjV,KAAK,UAAUqT,QAAQ,gCAC1C0B,EAAe,GACfpJ,OAAOwH,SAAS,EAAG,OAGtBsC,MAAMN,IAGba,SAAU,WAKRf,KAEFgB,iBAAkBC,KAEjB,YAAkE,IAA/DpL,EAA8D,EAA9DA,OAAQqL,EAAsD,EAAtDA,aAAc3W,EAAwC,EAAxCA,OAAQwL,EAAgC,EAAhCA,cAAeC,EAAiB,EAAjBA,WAC/C,OACE,6BACGzL,GAAU9D,OAAOgB,KAAK8C,GAAQzD,OAAS,GACtC,6BACE,kBAAC,GAAD,CACEiE,KAAK,QACLqT,QAAQ,qCACR7T,OAAQiU,GAAajU,MAI3B,kBAAC,IAAD,CAAMuW,SAAUI,GACd,6BACE,kBAAC,GAAD,CACE3Q,OAAQA,EACRD,OAAQA,EACR6O,SAAUA,EACVpB,YAAa,EACboD,kBAAkB,QAClBtL,OAAQA,GAAU,GAClBtL,OAAQA,EACRuL,WAAYA,EAAa4I,GAAW5I,QAAcZ,EAClDa,cAAeA,EACfC,WAAYA,UAWX,IAAhB+H,GACC,kBAAC,IAAD,CACE0C,cAAeb,EACfc,mBAAmB,OACnBC,kBAAkB,EAClBC,gBAAgB,EAChBE,SAAU,SAACjL,GAETmK,IACA,IAAMhX,EAAK4W,GAAcA,EAAW5W,GACpC6W,EAAcpZ,OAAOC,OAAO,GAAIkZ,EAAY/J,IACxC7M,EACFsX,EAAI/O,cAAcvI,EAAI6M,EAAQvF,EAAQC,GACnCW,MAAK,WACA2E,EAAO4B,UACTwI,EAAc,IAAInR,OAElBkR,EAAS,kBAAC,GAAD,CAAUjV,KAAK,UAAUqT,QAAQ,gCAC1C0B,EAAe,GACfpJ,OAAOwH,SAAS,EAAG,OAGtBsC,MAAMN,IAETF,EACE,kBAAC,GAAD,CACEjV,KAAK,QACLqT,QAAQ,qCACRD,QAAQ,iEAGZzH,OAAOwH,SAAS,EAAG,KAGvB6C,SAAU,WAKRf,KAEFgB,iBAAkBI,KAEjB,YAAkE,IAA/DvL,EAA8D,EAA9DA,OAAQqL,EAAsD,EAAtDA,aAAc3W,EAAwC,EAAxCA,OAAQwL,EAAgC,EAAhCA,cAAeC,EAAiB,EAAjBA,WAC/C,OACE,6BACGzL,GAAU9D,OAAOgB,KAAK8C,GAAQzD,OAAS,GACtC,6BACE,kBAAC,GAAD,CACEiE,KAAK,QACLqT,QAAQ,qCACR7T,OAAQiU,GAAajU,MAI3B,kBAAC,IAAD,CAAMuW,SAAUI,GACd,6BACE,kBAAC,GAAD,CACE3Q,OAAQA,EACRD,OAAQA,EACR6O,SAAUA,EACVpB,YAAa,EACboD,kBAAkB,QAClBtL,OAAQA,GAAU,GAClBtL,OAAQA,EACRuL,WAAYA,EAAa4I,GAAW5I,QAAcZ,EAClDa,cAAeA,EACfC,WAAYA,UAUX,IAAhB+H,GACC,kBAAC,IAAD,CACE0C,cAAe,CACb9U,SAAUgB,KAAKC,MAAMD,KAAKE,UAAUwU,KACpCC,SAAS,EACT1D,eAAgB,EAChBC,kBAAmB,KACnBpG,WAAW,GAEbiJ,mBAAmB,OACnBC,kBAAkB,EAClBC,gBAAgB,EAChBE,SAAU,SAACjL,EAAD,GAAgC,IAArBE,EAAoB,EAApBA,cAEnBiK,IAEA,IAAMuB,EACJ5U,KAAKE,UAAUwU,MAAoB1U,KAAKE,UAAUgJ,EAAOlK,UAC3D,GAAI4T,EAAc,CAChB,IAAMiC,EAAe,IAAIC,IAAInR,GACvBoR,EAAc,UAAMF,EAAa5K,OAAnB,oBAAqC2I,GACrDgC,EACFjB,EAAI9N,eAAe+M,EAAc1J,EAAOlK,SAAU2E,EAAQC,GACvDW,MAAK,SAACC,GACc,MAAfA,EAAIwQ,SACF9L,EAAOyL,QAEThB,EAAI5O,aAAa6N,EAAc,CAAEI,MAAO,UAAYrP,EAAQC,GAAQW,MAClE,SAACkP,GACyB,MAApBA,EAASuB,QAEXjL,OAAOC,SAASiL,QAAQF,MAIrB7L,EAAO4B,UAChBwI,EAAc,IAAInR,OAElBmR,EAAc,IAAInR,MAClBiH,EAAc,iBAAkBF,EAAO+H,eAAiB,GACxD7H,EACE,oBACAF,EAAOlK,SAASD,KAAOmK,EAAOlK,SAASzB,MAEzC6L,EAAc,WAAYpJ,KAAKC,MAAMD,KAAKE,UAAUwU,WAIzDb,MAAMN,GACArK,EAAOyL,SAEhBhB,EAAI5O,aAAa6N,EAAc,CAAEI,MAAO,UAAYrP,EAAQC,GACzDW,MAAK,SAACC,GACc,MAAfA,EAAIwQ,QAENjL,OAAOC,SAASiL,QAAQF,MAG3BlB,MAAMN,QAGXF,EACE,kBAAC,GAAD,CACEjV,KAAK,QACLqT,QAAQ,6CACRD,QAAQ,oEAKhB4C,SAAU,WAKRf,KAEFgB,iBAAkBa,GAClB1N,OAAQ,gBAAG0B,EAAH,EAAGA,OAAQtL,EAAX,EAAWA,OAAQ2W,EAAnB,EAAmBA,aAAcnL,EAAjC,EAAiCA,cAAeC,EAAhD,EAAgDA,WAAhD,OACN,yBAAK/K,UAAU,IACZV,GAAU9D,OAAOgB,KAAK8C,GAAQzD,OAAS,GACtC,6BACE,kBAAC,GAAD,CACEiE,KAAK,QACLqT,QAAQ,qCACR7T,OAAQiU,GAAajU,MAI3B,kBAAC,IAAD,CAAMuW,SAAUI,GACd,kBAAC,GAAD,CACErL,OAAQA,EACRtL,OAAQA,EACRuL,WAAYA,EAAa4I,GAAW5I,QAAcZ,EAClDa,cAAeA,EACfC,WAAYA,WClWf8L,GAjBH,SAAC/Y,GAAW,IACduH,EAAwCvH,EAAxCuH,OAAQC,EAAgCxH,EAAhCwH,OAAQ4O,EAAwBpW,EAAxBoW,SAAUC,EAAcrW,EAAdqW,UAElC,OADAnL,QAAQ8N,IAAI,CAAEzR,SAAQC,SAAQ4O,aAE5B,yBAAKlU,UAAU,OACb,kBAAC,GAAD,CAAcqF,OAAQA,EAAQC,OAAQA,EAAQ4O,SAAUA,EAAUC,UAAWA,MCG/D4C,QACW,cAA7BtL,OAAOC,SAASsL,UAEe,UAA7BvL,OAAOC,SAASsL,UAEhBvL,OAAOC,SAASsL,SAASC,MAAM,2DCTnC,IAAMC,GAAOC,SAASC,eAAe,QAC/B/R,GAAS6R,GAAKG,aAAa,eAC3B/R,GAAS4R,GAAKG,aAAa,eAC3BnD,GAAWgD,GAAKG,aAAa,iBAC7BlD,GAAY+C,GAAKG,aAAa,kBAEpCC,IAASpO,OACP,kBAAC,IAAMqO,WAAP,KACE,kBAAC,GAAD,CAAKlS,OAAQA,GAAQC,OAAQA,GAAQ4O,SAAUA,GAAUC,UAAWA,MAEtEgD,SAASC,eAAe,SD6GpB,kBAAmBI,WACrBA,UAAUC,cAAcC,MACrBzR,MAAK,SAAC0R,GACLA,EAAaC,gBAEdrC,OAAM,SAAClC,GACNrK,QAAQqK,MAAMA,EAAMH,c","file":"static/js/main.1c41b050.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256    s26.629,132.667,74.98,181.02C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98    C485.371,388.667,512,324.38,512,256S485.371,123.333,437.02,74.98z M256,70c30.327,0,55,24.673,55,55c0,30.327-24.673,55-55,55    c-30.327,0-55-24.673-55-55C201,94.673,225.673,70,256,70z M326,420H186v-30h30V240h-30v-30h110v180h30V420z\",\n  fill: \"#0050D8\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgInfo = function SvgInfo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    width: \"512px\",\n    height: \"512px\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInfo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/info.5e143234.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Field } from 'formik';\nimport { ReactComponent as Info } from '../../img/info.svg';\nimport '../../css/custom.css';\n\nconst WrappedField = (props) => {\n  const [toolTipShown, setToolTipShown] = useState(false);\n  // eslint-disable-next-line\n  const toggleToolTip = () => setToolTipShown(toolTipShown ? false : true);\n\n  const {\n    value,\n    name,\n    label,\n    children,\n    helptext,\n    required,\n    id,\n    errors,\n    disabled,\n    infoText,\n    onClick,\n    onSelect,\n    ...rest\n  } = props;\n\n  const formErrors = errors || {};\n  const choices = rest.choices || [];\n  const type = rest.type || 'string';\n\n  let disabledClass = '';\n  if (disabled) {\n    disabledClass = 'disabled';\n  } else {\n    disabledClass = '';\n  }\n\n  return (\n    <div className=\"wrapper\">\n      <label className=\"usa-label\" htmlFor={id}>\n        {label}\n\n        {/* Tooltip */}\n        {infoText && (\n          <div className={`tooltip ${toolTipShown ? 'show' : ''}`}>\n            <Info\n              height=\"20px\"\n              width=\"20px\"\n              style={{ marginLeft: '.5em' }}\n              tabIndex={0}\n              onClick={() => toggleToolTip()}\n              onKeyUp={(event) => {\n                if (event.keyCode === 13) {\n                  toggleToolTip();\n                }\n              }}\n            />\n            <span className=\"tooltiptext\">\n              <span\n                tabIndex={0}\n                className=\"close\"\n                onClick={() => setToolTipShown(false)}\n                role=\"button\"\n                onKeyUp={(event) => {\n                  if (event.keyCode === 13) {\n                    setToolTipShown(false);\n                  }\n                }}\n              >\n                <span className=\"close-tag\">&times;</span>\n              </span>\n              <h3>{label}</h3>\n              <p>{infoText}</p>\n            </span>\n          </div>\n        )}\n      </label>\n\n      {/* Inline Errors */}\n      {formErrors[name] && <span className=\"error-msg\">{formErrors[name]}</span>}\n\n      <div className={`usa-helptext ${disabledClass}`}>{helptext}</div>\n      {onClick ? (\n        <button\n          className=\"clear-button usa-button usa-button--secondary\"\n          onClick={onClick}\n          type=\"button\"\n        >\n          Remove\n        </button>\n      ) : (\n        ''\n      )}\n      {\n        {\n          label: <div>{value}</div>,\n          string: (\n            <Field\n              className={\n                `usa-input ${disabledClass} ` +\n                `${formErrors[name] && 'field-error'} ` +\n                `${onClick && 'has-clear-button'}`\n              }\n              disabled={disabled}\n              id={id}\n              name={name}\n              {...rest}\n            />\n          ),\n          url: (\n            <Field\n              className={`usa-input ${disabledClass} ${\n                (formErrors[name] || formErrors.resource) && 'field-error'\n              } ${onClick && 'has-clear-button'}`}\n              disabled={disabled}\n              id={id}\n              name={name}\n              {...rest}\n            />\n          ),\n          select: (\n            <Field\n              {...rest}\n              as=\"select\"\n              id={id}\n              name={name}\n              disabled={disabled}\n              className={`usa-select ${disabledClass} ${formErrors[name] ? 'field-error' : ''}`}\n              component=\"select\"\n            >\n              <option value=\"\">-Select-</option>\n              {/* eslint-disable */}\n              {choices.map((choice, index) => {\n                const optionValue = choice.value || choice.id || choice;\n                const optionLabel = choice.label || choice.title || choice.name || choice;\n                return (\n                  <option value={optionValue} key={optionValue + index}>\n                    {optionLabel}\n                  </option>\n                );\n              })}\n              {/* eslint-enable */}\n            </Field>\n          ),\n          radio: (\n            <div>\n              <Field {...rest} id={id} name={name} className=\"usa-radio__input\" component=\"radio\" />\n              <label className=\"usa-radio__label\" htmlFor={id}>\n                {label}\n              </label>\n            </div>\n          ),\n          date: (\n            <div>\n              <Field\n                type=\"date\"\n                id={id}\n                name={name}\n                className={`usa-input ${disabledClass}`}\n                disabled={disabled}\n              />\n            </div>\n          ),\n        }[type]\n      }\n\n      {children}\n    </div>\n  );\n};\n\nWrappedField.propTypes = {\n  value: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired, // TODO should be array of possible types'\n  required: PropTypes.bool,\n  label: PropTypes.string,\n  id: PropTypes.string,\n  errors: PropTypes.any, // eslint-disable-line\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n  onSelect: PropTypes.func,\n  children: PropTypes.arrayOf(PropTypes.element), // TODO array of els\n  helptext: PropTypes.oneOfType([PropTypes.element, PropTypes.string]), // TODO can be string, HelpText, <p>, etc\n  infoText: PropTypes.oneOfType([PropTypes.element, PropTypes.string]), // TODO can be string, el, etc\n};\n\nexport default WrappedField;\n","import axios from 'axios';\nimport slugify from 'slugify';\n\nconst dataDictTypes = require('../components/AdditionalMetadata/data-dictionary-types');\nconst licenses = require('../components/RequiredMetadata/licenses.json');\n\n/**\n * HELPERS\n */\nconst clone = (param) => JSON.parse(JSON.stringify(param));\n\n/**\n * Deserialize extras from CKAN 2.8.2 Groups format\n */\nconst deserializeExtras = (opts) => {\n  const newOpts = clone(opts);\n  newOpts.extras.forEach((cur) => {\n    newOpts[cur.key] = cur.value;\n  });\n  return newOpts;\n};\n\n/**\n * Iterates over each field and if it's string encodes URIComponent\n * characters\n * @param {Object} obj\n */\nconst encodeValues = (obj) => {\n  const newObj = {};\n  Object.entries(obj).map(([key, value]) => {\n    const encodedKey = encodeURIComponent(key);\n    newObj[encodedKey] = value;\n    if (typeof value === 'string' || value instanceof String) {\n      newObj[encodedKey] = encodeURIComponent(value);\n    }\n    // eslint-disable-next-line\n    return;\n  });\n\n  if (obj.extras)\n    newObj.extras = obj.extras.map(({ key, value }) => {\n      const encodedKey = encodeURIComponent(key);\n\n      if (typeof value === 'string' || value instanceof String) {\n        return { key: encodedKey, value: encodeURIComponent(value) };\n      }\n      return { key: encodedKey, value };\n    });\n\n  return newObj;\n};\n\n// serialize values from USMetadata format to match form values\nconst serializeSupplementalValues = (opts) => {\n  const newOpts = clone(opts);\n\n  if (opts.description) {\n    newOpts.notes = opts.description;\n  }\n\n  if (opts.tags && opts.tags.length > 0) {\n    newOpts.tag_string = opts.tags.reduce((acc, cur) => {\n      if (acc.length === 0) {\n        return cur.name;\n      }\n      return `${acc}, ${cur.name}`;\n    }, '');\n  }\n\n  if (opts.publisher_other) {\n    newOpts.publisher = opts.publisher_other;\n    delete newOpts.publisher_other;\n  }\n\n  if (opts.license === 'n/a') {\n    // if the license is selected \"no license\"\n    delete newOpts.license_new;\n    delete newOpts.license_others;\n  } else if (opts.license) {\n    if (opts.license === 'other') newOpts.license_new = opts.licenseOther;\n    else newOpts.license_new = opts.license;\n    delete newOpts.license_others;\n  }\n\n  // if access_level_comment is false use provided description\n  if (opts.access_level_comment === 'false' && opts.rights_desc) {\n    newOpts.access_level_comment = opts.rights_desc;\n    delete newOpts.rights_desc;\n  } else {\n    newOpts.access_level_comment = 'true';\n  }\n\n  if (opts.spatial === 'false') {\n    delete newOpts.spatial;\n  }\n  if (opts.spatial_location_desc) {\n    newOpts.spatial = opts.spatial_location_desc;\n    delete newOpts.spatial_location_desc;\n  }\n\n  if (opts.temporal_start_date) {\n    const start = new Date(opts.temporal_start_date).toISOString().split('T')[0]; // get yyyy-mm-dd from ISO string\n    const end = new Date(opts.temporal_end_date).toISOString().split('T')[0]; // ditto\n    newOpts.temporal = `${start}/${end}`;\n    delete newOpts.temporal_start_date;\n    delete newOpts.temporal_end_date;\n  } else {\n    delete newOpts.temporal;\n  }\n\n  // Language field should be constructed from language subtag and language\n  // regional subtag:\n  if (opts.languageSubTag) {\n    newOpts.language =\n      opts.languageSubTag + (opts.languageRegSubTag && `-${opts.languageRegSubTag}`);\n  }\n  delete newOpts.languageSubTag;\n  delete newOpts.languageRegSubTag;\n\n  // Data Dictionary Type\n  if (opts.describedByType) {\n    // If it's specified other\n    if (opts.describedByType === 'other') {\n      newOpts.data_dictionary_type = opts.otherDataDictionaryType;\n      delete newOpts.otherDataDictionaryType;\n    } else newOpts.data_dictionary_type = opts.describedByType;\n    delete newOpts.describedByType;\n  }\n\n  if (opts.isParent === 'Yes') {\n    newOpts.is_parent = 'true';\n    delete newOpts.parent_dataset;\n    newOpts.extras = newOpts.extras.filter((extra) => extra.key !== 'parent_dataset');\n  } else if (opts.isParent === 'No') {\n    newOpts.is_parent = 'false';\n    if (opts.parentDataset) {\n      newOpts.parent_dataset = opts.parentDataset;\n    } else {\n      delete newOpts.parent_dataset;\n      newOpts.extras = newOpts.extras.filter((extra) => extra.key !== 'parent_dataset');\n    }\n  } else {\n    delete newOpts.is_parent;\n    delete newOpts.parent_dataset;\n  }\n\n  return newOpts;\n};\n\n// deserialize values from form values to match USMetadata format\nconst deserializeSupplementalValues = (opts) => {\n  const newOpts = clone(opts);\n  if (opts.tag_string) {\n    newOpts.tags = opts.tag_string.split(',').map((n, i) => ({ id: i, name: n }));\n  }\n\n  if (opts.license_new) {\n    if (licenses.map((license) => license.value).includes(opts.license_new)) {\n      newOpts.license = opts.license_new;\n    } else {\n      newOpts.licenseOther = opts.license_new;\n      newOpts.license = 'other';\n    }\n  }\n\n  if (opts.access_level_comment !== 'true') {\n    newOpts.rights_desc = opts.access_level_comment;\n    newOpts.access_level_comment = 'false';\n  }\n\n  if (opts.spatial) {\n    newOpts.spatial_location_desc = opts.spatial;\n    newOpts.spatial = 'true';\n  }\n\n  if (opts.temporal) {\n    [newOpts.temporal_start_date, newOpts.temporal_end_date] = opts.temporal.split('/');\n    newOpts.temporal = 'true';\n  }\n\n  if (opts.language) {\n    [newOpts.languageSubTag, newOpts.languageRegSubTag] = opts.language.split('-');\n  }\n\n  if (opts.data_dictionary_type) {\n    // Check if the data dictionary type is out of list,\n    // then specify the other input field\n    const selectedDataDictType = dataDictTypes.find((dataDictType) => {\n      return dataDictType.value === opts.data_dictionary_type;\n    });\n    // If it is from the list then the type should be other\n    if (!selectedDataDictType) {\n      newOpts.otherDataDictionaryType = opts.data_dictionary_type;\n      newOpts.describedByType = 'other';\n    } else newOpts.describedByType = opts.data_dictionary_type;\n  }\n\n  if (opts.is_parent === 'true') {\n    newOpts.isParent = 'Yes';\n  } else {\n    newOpts.isParent = 'No';\n  }\n\n  if (opts.parent_dataset) {\n    newOpts.parentDataset = opts.parent_dataset;\n  }\n\n  return newOpts;\n};\n\n/**\n * API CALLS\n */\n\nconst createDataset = (opts, apiUrl, apiKey) => {\n  const body = serializeSupplementalValues(opts);\n  body.name = slugify(opts.title, { lower: true, remove: /[*+~.()'\"!:@]/g });\n  body.modified = new Date();\n  body.bureau_code = '015:11';\n  body.program_code = '015:001';\n  body.url = opts.url;\n  return axios\n    .post(`${apiUrl}package_create`, encodeValues(body), {\n      headers: {\n        'X-CKAN-API-Key': apiKey,\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    })\n    .then((res) => {\n      // note that we don't return the axios response, we return the result\n      const resVals = res.data.result;\n      const result = deserializeSupplementalValues(deserializeExtras(resVals));\n      return result;\n    });\n};\n\nconst createResource = (packageId, opts, apiUrl, apiKey) => {\n  let body;\n  if (opts.upload) {\n    body = new FormData();\n    body.append('package_id', packageId);\n    Object.keys(opts).forEach((item) => {\n      body.append(item, opts[item]);\n    });\n  } else {\n    body = clone(opts);\n    body.package_id = packageId;\n  }\n\n  return axios.post(`${apiUrl}resource_create`, encodeValues(body), {\n    headers: {\n      'X-CKAN-API-Key': apiKey,\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n  });\n};\n\nconst fetchDataset = async (id, apiUrl, apiKey) => {\n  return axios\n    .get(`${apiUrl}package_show?id=${id}`, {\n      headers: {\n        'X-CKAN-API-Key': apiKey,\n      },\n    })\n    .then((res) => {\n      // note that we don't return the axios response, we return the result\n      const result = deserializeSupplementalValues(deserializeExtras(res.data.result));\n      result.description = result.notes;\n      return result;\n    });\n};\n\nconst updateDataset = (id, opts, apiUrl, apiKey) => {\n  const body = serializeSupplementalValues(opts);\n  body.modified = new Date();\n  body.id = id;\n\n  // TODO where do we get these?\n  body.bureauCode = '015:11';\n  body.programCode = '015:001';\n\n  return axios\n    .post(`${apiUrl}package_update`, encodeValues(body), {\n      headers: {\n        'X-CKAN-API-Key': apiKey,\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    })\n    .then((res) => {\n      // note that we don't return the axios response, we return the result\n      const resVals = res.data.result;\n      const result = deserializeSupplementalValues(deserializeExtras(resVals));\n      return result;\n    });\n};\n\nconst patchDataset = (id, opts, apiUrl, apiKey) => {\n  const body = Object.assign(opts, { id });\n  return axios.post(`${apiUrl}package_patch`, encodeValues(body), {\n    headers: {\n      'X-CKAN-API-Key': apiKey,\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n  });\n};\n\nconst fetchTags = async (str, apiUrl, apiKey) => {\n  try {\n    const url = `${apiUrl}tag_list?query=${str}`;\n    const res = await axios.get(url, {\n      headers: {\n        'X-CKAN-API-Key': apiKey,\n      },\n    });\n    return res.data.result.map((row, i) => ({ id: i, name: row }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\n/**\n * Get list of organizations where a given user has \"create_dataset\" permission\n */\nconst fetchOrganizationsForUser = async (apiUrl, apiKey) => {\n  try {\n    const url = `${apiUrl}organization_list_for_user`;\n    const body = {\n      permission: 'create_dataset',\n    };\n    const res = await axios.post(url, body, {\n      headers: {\n        'X-CKAN-API-Key': apiKey,\n      },\n    });\n    return res.data.result;\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nconst fetchParentDatasets = async (query, apiUrl, apiKey) => {\n  try {\n    // the space belongs here q= solr query string including indexed extras\n    const url = `${apiUrl}package_search?q=${query} extras_is_parent=true`;\n    const res = await axios.get(url, {\n      headers: {\n        'X-CKAN-API-Key': apiKey,\n      },\n    });\n    return (res.data.result.results || []).map(({ id, title }) => {\n      return {\n        id,\n        name: title,\n      };\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nexport default {\n  createDataset,\n  updateDataset,\n  patchDataset,\n  fetchDataset,\n  fetchTags,\n  fetchOrganizationsForUser,\n  fetchParentDatasets,\n  createResource,\n  helpers: {\n    deserializeExtras,\n    clone,\n  },\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { FieldArray, useField } from 'formik';\nimport ReactTags from 'react-tag-autocomplete';\nimport './index.css';\n\nconst AutocompleteTags = (props) => {\n  const { tags, name, helptext, placeholder, apiUrl, apiKey, errors, fetchOpts, type } = props;\n  const [suggestions, setSuggestions] = useState([]);\n  const [field, meta, helpers] = useField(name); // eslint-disable-line\n  const { setValue } = helpers;\n\n  if (type === 'string') {\n    const onAddition = (tag) => {\n      setValue(tag.id);\n    };\n\n    const onDelete = () => {\n      setValue('');\n    };\n\n    const currentParent = props.value ? [{ name: props.value }] : [];\n\n    return (\n      <div className={`react-tags-input grid-col-12 ${errors && errors[name] && 'field-error'}`}>\n        <div className=\"usa-helptext\">{helptext}</div>\n        <ReactTags\n          tags={currentParent}\n          suggestions={suggestions}\n          allowNew\n          ref={React.createRef()}\n          onAddition={onAddition}\n          onDelete={onDelete}\n          className=\"usa-input\"\n          placeholderText={placeholder}\n          onInput={async (q) => {\n            try {\n              const res = await fetchOpts(q, apiUrl, apiKey);\n              setSuggestions(res);\n            } catch (e) {\n              console.warn('Unable to fetch autocomplete options', e); // eslint-disable-line no-console\n            }\n          }}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <FieldArray\n      name={name}\n      render={(arrayHelpers) => (\n        <div className={`react-tags-input grid-col-12 ${errors && errors[name] && 'field-error'}`}>\n          {errors && errors[name] && (\n            <span className=\"error-msg\">\n              {errors[name]}\n              <br />\n            </span>\n          )}\n          {helptext}\n          <ReactTags\n            tags={tags}\n            suggestions={suggestions}\n            allowNew\n            ref={React.createRef()}\n            onAddition={arrayHelpers.push}\n            onDelete={arrayHelpers.remove}\n            className=\"usa-input\"\n            placeholderText={placeholder}\n            onInput={async (q) => {\n              try {\n                const res = await fetchOpts(q, apiUrl, apiKey);\n                setSuggestions(res);\n              } catch (e) {\n                console.warn('Unable to fetch autocomplete options', e); // eslint-disable-line no-console\n              }\n            }}\n          />\n        </div>\n      )}\n    />\n  );\n};\n\nAutocompleteTags.propTypes = {\n  apiUrl: PropTypes.string.isRequired,\n  apiKey: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  placeholder: PropTypes.string,\n  type: PropTypes.any, // eslint-disable-line\n  value: PropTypes.any, // eslint-disable-line\n  tags: PropTypes.any, // eslint-disable-line\n  helptext: PropTypes.any, // eslint-disable-line\n  errors: PropTypes.any, // eslint-disable-line\n  fetchOpts: PropTypes.any, // eslint-disable-line\n};\n\nexport default AutocompleteTags;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst HelpText = (props) => {\n  const { children } = props;\n  return <span className=\"usa-helptext\">{children}</span>;\n};\n\nHelpText.propTypes = {\n  children: PropTypes.any, // eslint-disable-line\n};\n\nexport default HelpText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field } from 'formik';\n\nconst Radio = ({ label, value, styleClass, id, name }) => {\n  return (\n    <div className={`form-group ${styleClass}`}>\n      <Field type=\"radio\" className=\"usa-radio__input\" value={value} name={name} id={id} />\n\n      <label className=\"usa-radio__label\" htmlFor={id}>\n        {label}\n      </label>\n    </div>\n  );\n};\n\nRadio.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  styleClass: PropTypes.string,\n  value: PropTypes.string,\n};\n\nRadio.defaultProps = {\n  styleClass: '',\n};\n\nexport default Radio;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Link = (props) => {\n  // TODO this should test against the app's base url instead of just a\n  // protocol, or possibly non-.gov URLs depending on the requirement.\n  // Assume any non-relative URL is an external URL.\n  const { children, href, rel, target } = props;\n\n  const isExternal = /^https?:\\/\\//.test(href) || target === '_blank';\n  let classes = ['usa-link'];\n  let newRel = rel ? [rel] : [];\n\n  if (isExternal) {\n    classes = classes.concat(['usa-link--external']);\n    newRel = newRel.concat(['noopener', 'noreferrer']);\n  }\n\n  return (\n    <a\n      href={href}\n      className={classes.join(' ')}\n      rel={newRel.length ? newRel.join(' ') : undefined}\n      {...props}\n    >\n      {children}\n    </a>\n  );\n};\n\nLink.propTypes = {\n  children: PropTypes.any, // eslint-disable-line\n  href: PropTypes.string,\n  rel: PropTypes.string,\n  target: PropTypes.string,\n};\n\nLink.defaultValues = {\n  rel: null,\n};\n\nexport default Link;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport slugify from 'slugify';\nimport WrappedField from '../WrappedField';\nimport api from '../../api';\nimport AutocompleteTags from '../AutocompleteTags';\nimport { ReactComponent as Info } from '../../img/info.svg';\nimport HelpText from '../HelpText';\nimport Radio from '../Radio';\nimport Link from '../Link';\n\nconst publishersDictionary = require('./publishers.json');\nconst licenses = require('./licenses.json');\n\nconst leafPublishers = publishersDictionary\n  .map((item) => {\n    return (\n      item.publisher_5 ||\n      item.publisher_4 ||\n      item.publisher_3 ||\n      item.publisher_2 ||\n      item.publisher_1 ||\n      item.publisher\n    );\n  })\n  .sort()\n  .concat(['Other']);\n\n// Links within the form use target=\"_blank\" to avoid navigating away from the\n// from while the user is filling it out. It can be very frustrating to lose\n// work when clicking on a link for help.\nconst RequiredMetadata = (props) => {\n  const { values, errors, apiUrl, apiKey, draftSaved, setFieldValue, submitForm } = props;\n\n  const [organizations, setOrganizations] = useState([]);\n  useEffect(() => {\n    api.fetchOrganizationsForUser(apiUrl, apiKey).then((data) => {\n      setOrganizations(data);\n    });\n  }, []);\n\n  // RADIO / SELECT Values\n  const [urlDisabled, setUrlDisabled] = useState(true);\n  const [toolTipShown, setToolTipShown] = useState(false);\n  // eslint-disable-next-line\n  const toggleToolTip = () => setToolTipShown(toolTipShown ? false : true);\n\n  const helpTextify = (text) => {\n    return <HelpText>{text}</HelpText>;\n  };\n  const baseUrl = `${window.location.origin}/dataset/`;\n\n  const genUrlFromTitle = (title) => {\n    return `${baseUrl}${slugify(title || '', {\n      lower: true,\n      remove: /[*+~.()'\"!:@]/g,\n    })}`;\n  };\n\n  // Handles the event when the user clicks on edit/update button for url\n  const editUpdateHandler = () => {\n    const { url } = values;\n    //  Means in update mode\n    if (!urlDisabled) {\n      if (url) {\n        values.url = `${baseUrl}${slugify(url.substring(baseUrl.length, url.length))}`;\n      }\n    } else if (!values.url) values.url = genUrlFromTitle(values.title);\n    setUrlDisabled(!urlDisabled);\n  };\n\n  const helpTexts = {\n    title: (\n      <HelpText>\n        Use{' '}\n        <Link target=\"_blank\" href=\"https://plainlanguage.gov/\">\n          everyday language\n        </Link>{' '}\n        to make the dataset easy to find and understand.\n      </HelpText>\n    ),\n    description: (\n      <HelpText>\n        Write a description (like an abstract) with enough detail to help a user quickly decide if\n        the asset is of interest. You can use{' '}\n        <Link target=\"_blank\" href=\"https://www.markdownguide.org/basic-syntax/\">\n          Markdown Formatting\n        </Link>{' '}\n        here.\n      </HelpText>\n    ),\n    select: (\n      <HelpText>\n        If you do not see the Publisher for your dataset listed, please contact{' '}\n        <Link target=\"_blank\" href=\"mailto:inventory-help@gsa.gov\">\n          inventory-help@gsa.gov\n        </Link>{' '}\n        for further assistance.\n      </HelpText>\n    ),\n  };\n\n  return (\n    <div className=\"usa-form-custom\">\n      <section id=\"section-basic-mega-menu\" className=\"site-component-section\">\n        <p className=\"site-text-intro\">\n          The following fields are required metadata for each dataset in an agencys inventory (\n          <Link\n            target=\"_blank\"\n            href=\"https://www.congress.gov/115/plaws/publ435/PLAW-115publ435.pdf\"\n          >\n            per Section 202 of the OPEN Government Data Act\n          </Link>\n          ). For more information about the form fields, consult the{' '}\n          <Link target=\"_blank\" href=\"https://resources.data.gov/resources/dcat-us/\">\n            DCAT-US Schema\n          </Link>\n          .\n        </p>\n      </section>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Title\"\n            name=\"title\"\n            type=\"string\"\n            placeholder=\"\"\n            helptext={helpTexts.title}\n            value={values.title}\n            errors={errors}\n            required\n          />\n\n          <div className={urlDisabled ? '' : 'dynamic-url'}>\n            <WrappedField\n              name=\"url\"\n              type=\"url\"\n              style={{ display: urlDisabled ? 'none' : 'inline' }}\n              value={values.url}\n              errors={errors}\n            />\n            <span className=\"dataset_url\" style={{ display: urlDisabled ? 'inline' : 'none' }}>\n              {values.url || genUrlFromTitle(values.title)}\n            </span>\n\n            <button\n              type=\"button\"\n              className=\"usa-button dataset_url_edit\"\n              onClick={editUpdateHandler}\n            >\n              {urlDisabled ? 'Edit' : 'Update'}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Description\"\n          name=\"description\"\n          type=\"string\"\n          component=\"textarea\"\n          rows=\"6\"\n          helptext={helpTexts.description}\n          value={values.description}\n          errors={errors}\n          required\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <span className=\"usa-label\">Tags</span>\n        <AutocompleteTags\n          id=\"tags-autocomplete-input\"\n          tags={values.tags}\n          apiUrl={apiUrl}\n          apiKey={apiKey}\n          fetchOpts={api.fetchTags}\n          name=\"tags\"\n          titleField=\"name\"\n          required\n          placeholder=\"Start typing to search\"\n          errors={errors}\n          helptext={helpTextify(\n            'Use both technical and non-technical terms to help users find your dataset. Press tab or enter to add each new tag.'\n          )}\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Organization\"\n          name=\"owner_org\"\n          type=\"select\"\n          choices={organizations}\n          required\n          className=\"error-msg\"\n          errors={errors}\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Publisher\"\n          name=\"publisher\"\n          type=\"select\"\n          choices={leafPublishers}\n          required\n          className=\"error-msg\"\n          helptext={helpTexts.select}\n          infoText=\"The publishing entity (e.g. your agency) and optionally their parent organization(s).\"\n          errors={errors}\n        />\n        <WrappedField\n          name=\"publisher_other\"\n          type=\"string\"\n          helptext={helpTextify(\n            `If you selected Other, please specify the name of your Publisher`\n          )}\n          disabled={values.publisher !== 'Other'}\n          errors={errors}\n          required\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Sub Agency (optional)\"\n          name=\"subagency\"\n          type=\"string\"\n          errors={errors}\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Contact Name\"\n          name=\"contact_name\"\n          type=\"string\"\n          required\n          infoText=\"This should be the person who can best answer or triage questions about this dataset, either on the metadata or the substance of the data resources.\"\n          errors={errors}\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Contact Email\"\n          name=\"contact_email\"\n          type=\"string\"\n          required\n          errors={errors}\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Unique ID\"\n          name=\"unique_id\"\n          type=\"string\"\n          required\n          infoText=\"This is the ID number or code used within your agency to differentiate this dataset from other datasets.\"\n          errors={errors}\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"Public Access level\"\n          name=\"public_access_level\"\n          type=\"select\"\n          choices={[\n            {\n              value: 'public',\n              id: 'choice-public',\n              label:\n                'Public - this dataset can be made publicly available to all without restrictions',\n            },\n            {\n              value: 'restricted public',\n              id: 'choice-restricted-public',\n              label: 'Restricted Public - this dataset is available under certain use restrictions',\n            },\n            {\n              value: 'non-public',\n              id: 'choice-non-public',\n              label: 'Non-Public - this dataset is not available to members of the public',\n            },\n          ]}\n          className=\"error-msg\"\n          errors={errors}\n          required\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <WrappedField\n          label=\"License\"\n          name=\"license\"\n          type=\"select\"\n          choices={licenses}\n          className=\"error-msg\"\n          errors={errors}\n          required\n        />\n        <WrappedField\n          name=\"licenseOther\"\n          type=\"string\"\n          helptext={helpTextify(\n            `If you selected Other, please specify the name of your License in URL format. Please include \"https://\" at the beginning of your URL.*`\n          )}\n          disabled={values.license !== 'other'}\n          errors={errors}\n          required\n        />\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <span className=\"usa-label\">Rights</span> <br />\n          {errors && errors.rights && <span className=\"error-msg\">{errors.rights}</span>}\n          <Radio\n            label=\"My dataset is public\"\n            name=\"access_level_comment\"\n            errors={errors}\n            value=\"true\"\n            id=\"rights_option_1\"\n          />\n          <Radio\n            label=\"My dataset is not public\"\n            name=\"access_level_comment\"\n            value=\"false\"\n            id=\"rights_option_2\"\n          />\n          <WrappedField\n            name=\"rights_desc\"\n            type=\"string\"\n            value={values.rights_desc}\n            errors={errors}\n            helptext={helpTextify(\n              'If your dataset is not public, please add an explanation of rights and feel free to include any instructions on restrictions, or how to access a restricted file (max 255 characters)*'\n            )}\n            disabled={values.access_level_comment === 'true'}\n          />\n        </div>\n      </div>\n\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <span className=\"usa-label\">Relevant Location</span> <br />\n          {errors && errors.spatial && <span className=\"error-msg\">{errors.spatial}</span>}\n          <Radio\n            label=\"My dataset does not have a spatial component\"\n            name=\"spatial\"\n            value=\"false\"\n            errors={errors}\n            id=\"spatial_option_1\"\n          />\n          <Radio\n            label=\"My dataset does have a spatial component\"\n            name=\"spatial\"\n            value=\"true\"\n            id=\"spatial_option_2\"\n          />\n          <WrappedField\n            name=\"spatial_location_desc\"\n            type=\"string\"\n            value={values.spatial_location_desc}\n            errors={errors}\n            helptext={helpTextify(\n              'If your dataset has a spatial component, please provide location such as place name or latitude/longitude pairs above*'\n            )}\n            disabled={values.spatial === 'false'}\n          />\n        </div>\n      </div>\n\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <span className=\"usa-label\">\n            Temporal\n            <div className={`tooltip ${toolTipShown ? 'show' : ''}`}>\n              <Info\n                tabIndex={0}\n                height=\"20px\"\n                width=\"20px\"\n                style={{ marginLeft: '.5em' }}\n                onClick={() => toggleToolTip()}\n                onKeyUp={(e) => {\n                  if (e.keyCode === 13) {\n                    toggleToolTip();\n                  }\n                }}\n              />\n              <span className=\"tooltiptext\">\n                <span\n                  tabIndex={0}\n                  className=\"close\"\n                  onClick={() => setToolTipShown(false)}\n                  role=\"button\"\n                  onKeyDown={() => setToolTipShown(false)}\n                >\n                  <span className=\"close-tag\">&times;</span>\n                </span>\n                <h3>Temporal</h3>\n                <p>\n                  For example, for a 2010 Census dataset (which runs for 10 years until April 1st of\n                  the year of the Census), the temporal extent would cover a period of time\n                  beginning 2000-04-02 and ending 2010-04-01.\n                </p>\n              </span>\n            </div>\n          </span>{' '}\n          <br />\n          {errors && errors.temporal && <span className=\"error-msg\">{errors.temporal}</span>}\n          <Radio\n            label=\"My dataset does not have a start and end date for the applicability of data\"\n            name=\"temporal\"\n            value=\"false\"\n            errors={errors}\n            id=\"temporal_option_1\"\n          />\n          <Radio\n            label=\"My dataset has a start and end date for the applicability of data\"\n            name=\"temporal\"\n            value=\"true\"\n            errors={errors}\n            id=\"temporal_option_2\"\n          />\n          <WrappedField\n            name=\"temporal_start_date\"\n            type=\"date\"\n            id=\"temporal_start_date\"\n            value={values.temporal_start_date}\n            errors={errors}\n            helptext={helpTextify(\n              'If your dataset has a temporal component, please provide start date for applicability of data above (MM/DD/YYYY)*'\n            )}\n            disabled={values.temporal === 'false'}\n          />\n          <WrappedField\n            name=\"temporal_end_date\"\n            type=\"date\"\n            id=\"temporal_end_date\"\n            value={values.temporal_end_date}\n            errors={errors}\n            helptext={helpTextify(\n              'If your dataset has a temporal component, please provide end date for applicability of data above (MM/DD/YYYY)*'\n            )}\n            disabled={values.temporal === 'false'}\n          />\n        </div>\n      </div>\n\n      <div className=\"grid-row margin-top-6\">\n        <button\n          style={{ display: 'none' }}\n          className=\"usa-button usa-button--outline\"\n          type=\"button\"\n          onClick={async () => {\n            await setFieldValue('saveDraft', true);\n            submitForm();\n          }}\n        >\n          Save draft\n        </button>\n        <button\n          className=\"usa-button\"\n          type=\"button\"\n          onClick={async () => {\n            await setFieldValue('saveDraft', false);\n            submitForm();\n          }}\n        >\n          Save and Continue\n        </button>\n      </div>\n      {draftSaved && (\n        <div style={{ marginTop: '1rem' }}>\n          <div className=\"grid-col-12 text-mint\">\n            <i>\n              Draft saved:\n              <br />[{draftSaved}]\n            </i>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nRequiredMetadata.propTypes = {\n  setFieldValue: PropTypes.func,\n  submitForm: PropTypes.func,\n  draftSaved: PropTypes.string,\n  apiUrl: PropTypes.string.isRequired,\n  apiKey: PropTypes.string.isRequired,\n  values: PropTypes.any, // eslint-disable-line\n  errors: PropTypes.any, // eslint-disable-line\n};\n\nexport default RequiredMetadata;\n","import * as yup from 'yup';\n\nexport default yup.object().shape({\n  saveDraft: yup.boolean(),\n  title: yup.string().required('Title is required'),\n  owner_org: yup.string().required('Organization is required'),\n  contact_name: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft ? schema : schema.required('Contact is required');\n  }),\n  unique_id: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft ? schema : schema.required('Unique ID is required');\n  }),\n  contact_email: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft\n      ? schema\n      : schema.email('Must be valid email').required('Contact email is required');\n  }),\n  description: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft ? schema : schema.required('Description is required');\n  }),\n  tags: yup.array().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft\n      ? schema\n      : schema\n          .of(\n            yup.object().shape({\n              name: yup\n                .string()\n                .min(2)\n                .max(100)\n                .matches(/[a-zA-Z0-9-_.]+/),\n              vocabulary_id: yup.string(),\n            })\n          )\n          .required(\n            'Tags are required. Please, provide at least one tag. Note that a tag name must be a string between 2 and 100 characters long containing only alphanumeric characters and -, _ and .'\n          );\n  }),\n  publisher: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft ? schema : schema.required('Publisher is required');\n  }),\n  subagency: yup.string(),\n  public_access_level: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft ? schema : schema.required('Access level is required');\n  }),\n  rights_desc: yup\n    .string()\n    .required('Please add explanation of rights')\n    .when('access_level_comment', (accessLevelComment, schema) => {\n      return accessLevelComment === 'false' ? schema : yup.string();\n    }),\n  spatial: yup\n    .string()\n    .test('spatial-location-extra', 'Please provide location description.', function validate(\n      value\n    ) {\n      const formVals = this.from[0].value;\n      if (value === 'true') {\n        if (!formVals.spatial_location_desc) return false;\n      }\n      return true;\n    }),\n  spatial_location_desc: yup.string(),\n  licenseOther: yup\n    .string()\n    .required('License is required')\n    .url('License should be a valid url')\n    .when('license', (license, schema) => {\n      return license === 'other' ? schema : yup.string();\n    }),\n  license: yup.string().when('saveDraft', (saveDraft, schema) => {\n    return saveDraft ? schema : schema.required('License is required');\n  }),\n  temporal: yup\n    .string()\n    .test('temporal-start-end', 'Please specify start and end date', function validate(value) {\n      const formVals = this.from[0].value;\n      if (value === 'true') {\n        if (!formVals.temporal_start_date || !formVals.temporal_end_date) return false;\n      }\n      return true;\n    }),\n  temporal_start_date: yup.date().typeError('Please specify a valid start date'),\n  temporal_end_date: yup.date().typeError('Please specify a valid end date'),\n});\n","export default {\n  title: 'Title',\n  contact_name: 'Contact Name',\n  unique_id: 'Unique ID',\n  contact_email: 'Contact Email',\n  description: 'Description',\n  publisher: 'Publisher',\n  public_access_level: 'Public Access Level',\n  data_quality: 'Access Level',\n  rights_desc: 'Rights',\n  spatial: 'Spatial',\n  license: 'License',\n  licenseOther: 'License',\n  temporal: 'Temporal',\n  tags: 'Tags',\n  owner_org: 'Organization',\n  temporal_start_date: 'Temporal Start Date',\n  temporal_end_date: 'Temporal End Date',\n};\n","export default {\n  access_level_comment: 'true',\n  spatial: 'false',\n  spatial_location: 'false',\n  temporal: 'false',\n};\n","export default {\n  dataQualityUSG: '',\n  themes: '',\n  describedBy: '',\n  describedByType: '',\n  accrualPeriodicity: '',\n  landingPage: '',\n  languageSubTag: 'en',\n  languageRegSubTag: 'US',\n  primaryITInvestmentUIIUSG: '',\n  references: '',\n  issued: '',\n  systemOfRecordsUSG: '',\n  isPartOf: '',\n  isParent: '',\n  parentDataset: '',\n};\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useField } from 'formik';\n\nimport Autosuggest from 'react-autosuggest';\n\nimport './index.css';\n\nconst getSuggestionValue = (suggestion) => suggestion.name;\n\nconst renderSuggestion = (suggestion, { query }) => {\n  const suggested = suggestion.name;\n  const tail = suggested.substring(query.length, suggested.length);\n  return (\n    <div>\n      <mark>{query}</mark>\n      {tail}\n    </div>\n  );\n};\n\nconst Autocomplete = (props) => {\n  const {\n    name,\n    helptext,\n    inputValue,\n    value,\n    placeholder,\n    apiUrl,\n    apiKey,\n    errors,\n    fetchOpts,\n  } = props;\n  const [suggestions, setSuggestions] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [field, meta, helpers] = useField(name); // eslint-disable-line\n  const { setValue } = helpers;\n\n  const [typedText, setTypedText] = useState('');\n\n  const onChange = (event) => {\n    const typed = event.target.value;\n    if (!typed) {\n      setValue('');\n      setSelected(null);\n    }\n    setTypedText(typed || '');\n  };\n\n  useEffect(() => {\n    setTypedText(inputValue || '');\n    if (value) setSelected({ id: value, name: inputValue });\n  }, []);\n\n  const getSuggestions = async (typed) => {\n    const currentInputValue = (typed || '').trim().toLowerCase();\n    const inputLength = currentInputValue.length;\n\n    if (inputLength === 0) return [];\n    try {\n      return (await fetchOpts(currentInputValue, apiUrl, apiKey)).filter(\n        (item) => item.name.toLowerCase().slice(0, inputLength) === currentInputValue\n      );\n    } catch (e) {\n      console.warn('Unable to fetch autocomplete options', e); // eslint-disable-line no-console\n      return [];\n    }\n  };\n\n  // Autosuggest will call this function every time you need to update suggestions.\n  // eslint-disable-next-line\n  const onSuggestionsFetchRequested = async ({ value }) => {\n    setSuggestions(await getSuggestions(value));\n  };\n\n  // Autosuggest will call this function every time you need to clear suggestions.\n  const onSuggestionsClearRequested = () => {\n    setSuggestions([]);\n  };\n\n  const onSuggestionSelected = (event, { suggestion }) => {\n    // update name, id based selected option\n    setSelected(suggestion);\n    // update the input\n    setTypedText(suggestion.name);\n    // saves the value in form\n    setValue(suggestion.id);\n  };\n\n  const onBlur = () => {\n    // Make sure that input value reflects to selected option\n    if (selected) {\n      setTypedText(selected.name);\n    } else setTypedText('');\n  };\n\n  return (\n    <div className={`react-tags-input grid-col-12 ${errors && errors[name] && 'field-error'}`}>\n      <div className=\"usa-helptext\">{helptext}</div>\n      <Autosuggest\n        suggestions={suggestions}\n        onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n        onSuggestionsClearRequested={onSuggestionsClearRequested}\n        getSuggestionValue={getSuggestionValue}\n        renderSuggestion={renderSuggestion}\n        onSuggestionSelected={onSuggestionSelected}\n        theme={{\n          container: 'react-autosuggest__container',\n          containerOpen: 'react-autosuggest__container--open',\n          input: 'usa-input',\n          inputOpen: 'react-autosuggest__input--open',\n          inputFocused: 'react-autosuggest__input--focused',\n          suggestionsContainer: 'react-autosuggest__suggestions-container',\n          suggestionsContainerOpen: 'react-autosuggest__suggestions-container--open',\n          suggestionsList: 'react-autosuggest__suggestions-list',\n          suggestion: 'react-autosuggest__suggestion',\n          suggestionFirst: 'react-autosuggest__suggestion--first',\n          suggestionHighlighted: 'react-autosuggest__suggestion--highlighted',\n          sectionContainer: 'react-autosuggest__section-container',\n          sectionContainerFirst: 'react-autosuggest__section-container--first',\n          sectionTitle: 'react-autosuggest__section-title',\n        }}\n        inputProps={{\n          placeholder,\n          value: typedText,\n          onChange,\n          onBlur,\n        }}\n      />\n    </div>\n  );\n};\n\nAutocomplete.propTypes = {\n  apiUrl: PropTypes.string.isRequired,\n  apiKey: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  placeholder: PropTypes.string,\n  value: PropTypes.any, // eslint-disable-line\n  inputValue: PropTypes.string,\n  helptext: PropTypes.any, // eslint-disable-line\n  errors: PropTypes.any, // eslint-disable-line\n  fetchOpts: PropTypes.any, // eslint-disable-line\n};\n\nexport default Autocomplete;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport WrappedField from '../WrappedField';\nimport HelpText from '../HelpText';\nimport Autocomplete from '../Autocomplete';\nimport Link from '../Link';\nimport api from '../../api';\n\nconst languages = require('./languages.json');\nconst dataDictTypes = require('./data-dictionary-types').sort((a, b) => {\n  const label1 = (a.label || '').toLowerCase();\n  const label2 = (b.label || '').toLowerCase();\n  if (label1 < label2) return -1;\n  if (label1 > label2) return 1;\n  return 0;\n});\n\nconst helpTexts = {\n  theme: <HelpText>Examples include: vegetables, non_starchy, green.</HelpText>,\n  describedBy: (\n    <HelpText>\n      Provide a link to data dictionary or other reference that helps users understand the dataset.\n      Example: &quot;https://www.agency.gov/vegetables/vegetables-all.zip&quot;\n    </HelpText>\n  ),\n  landingPage: (\n    <HelpText>\n      This landing page should contain or be linked to all resources tied to the dataset. Example:\n      &quot;https://www.agency.gov/vegetables&quot;\n    </HelpText>\n  ),\n  primaryITInvestmentUIIUSG: (\n    <HelpText>\n      This can often be found in Exhibit 53 documents, and takes the form ###-#########. Learn more\n      about Exhibit 53 documents at{' '}\n      <Link\n        target=\"_blank\"\n        href=\"https://www.whitehouse.gov/wp-content/uploads/2018/06/fy-2020-it-budget-guidance.pdf\"\n      >\n        this PDF\n      </Link>\n      .\n    </HelpText>\n  ),\n  references: (\n    <HelpText>\n      Related documents such as technical information about a dataset, developer documentation, etc.\n      Format for entry is: https://www.agency.gov/fruits/fruits.csv,\n      https://www.agency.gov/legumes/legumes\n    </HelpText>\n  ),\n  systemOfRecordsUSG: (\n    <HelpText>\n      If the dataset is a designated System of Records under the Privacy Act of 1974, provide the\n      URL for the System of Recors Notice\n    </HelpText>\n  ),\n};\n\nconst AdditionalMetadata = (props) => {\n  const { values, apiUrl, apiKey, draftSaved, setFieldValue, submitForm } = props;\n\n  const getRegionalChoices = (selectedLangValue) => {\n    const lang = languages.find((item) => item.value === selectedLangValue) || {};\n    return lang.regions;\n  };\n\n  return (\n    <div className=\"usa-form-custom\">\n      <section id=\"section-basic-mega-menu\" className=\"site-component-section\">\n        <p className=\"site-text-intro\">\n          Please note that the additional metadata that you upload will help public users better\n          find and use this dataset. Not all of these criteria will apply to each dataset, so feel\n          free to only answer what applies. For more information about the form fields, consult the{' '}\n          <Link target=\"_blank\" href=\"https://resources.data.gov/schemas/dcat-us/v1.1/\">\n            DCAT-US Schema\n          </Link>\n          .\n        </p>\n      </section>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Meets Agency Data Quality\"\n            name=\"dataQualityUSG\"\n            type=\"select\"\n            choices={['Yes', 'No']}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Themes\"\n            name=\"category\"\n            type=\"string\"\n            helptext=\"Main thematic category of the dataset.  If this dataset should be included in geoplatform.gov, please enter geospatial as the theme.  Start typing to add themes.\"\n            infoText={helpTexts.theme}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Data Dictionary URL\"\n            name=\"data_dictionary\"\n            type=\"string\"\n            helptext='Please include \"https://\" at the beginning of your URL.'\n            infoText={helpTexts.describedBy}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Data Dictionary Type\"\n            name=\"describedByType\"\n            value={values.describedByType}\n            type=\"select\"\n            choices={dataDictTypes}\n          />\n          <WrappedField\n            disabled={values.describedByType !== 'other'}\n            name=\"otherDataDictionaryType\"\n            value={values.otherDataDictionaryType}\n            type=\"string\"\n            helptext=\"If you selected Other, please specify your Data Dictionary Type\"\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Data Publishing Frequency\"\n            name=\"accrual_periodicity\"\n            type=\"select\"\n            choices={[\n              'Decennial',\n              'Quadrennial',\n              'Annual',\n              'Bimonthly',\n              'Semiweekly',\n              'Daily',\n              'Biweekly',\n              'Semiannual',\n              'Biennial',\n              'Triennial',\n              'Three times a week',\n              'Three times a month',\n              'Every five years',\n              'Every eight years',\n              'Continuously updated',\n              'Monthly',\n              'Quarterly',\n              'Semimonthly',\n              'Three times a year',\n              'Weekly',\n              'Hourly',\n              'Irregular',\n            ]}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Dataset Landing Page URL\"\n            name=\"homepage_url\"\n            type=\"string\"\n            helptext='Please include \"https://\" at the beginning of your URL.'\n            infoText={helpTexts.landingPage}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Language - Language Subtag\"\n            name=\"languageSubTag\"\n            value={values.languageSubTag}\n            type=\"select\"\n            choices={languages}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            disabled={!values.languageSubTag}\n            label=\"Language - Regional Subtag\"\n            name=\"languageRegSubTag\"\n            value={values.languageRegSubTag}\n            type=\"select\"\n            choices={getRegionalChoices(values.languageSubTag)}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Dataset's IT Unique Investment Identifier\"\n            name=\"primary_it_investment_uii\"\n            type=\"string\"\n            infoText={helpTexts.primaryITInvestmentUIIUSG}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Related Documents\"\n            name=\"related_documents\"\n            type=\"string\"\n            infoText={helpTexts.references}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Release Date\"\n            name=\"release_date\"\n            type=\"date\"\n            helptext=\"Date Format: MM/DD/YYYY\"\n            infoText={helpTexts.references}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"System of Records Notice URL\"\n            name=\"system_of_records\"\n            type=\"string\"\n            infoText={helpTexts.systemOfRecordsUSG}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Is parent dataset\"\n            name=\"isParent\"\n            type=\"select\"\n            choices={['Yes', 'No']}\n          />\n        </div>\n      </div>\n      {values.isParent === 'No' && (\n        <div className=\"grid-row margin-top-3\">\n          <div className=\"grid-col-12\">\n            <span className=\"usa-label\">Select Parent Dataset</span>\n            <Autocomplete\n              label=\"Select Parent Dataset\"\n              name=\"parentDataset\"\n              type=\"string\"\n              value={values.parentDataset}\n              // TODO - inputValue should be replaced with parent dataset name\n              inputValue={values.parentDataset}\n              placeholder=\"Select parent dataset\"\n              helptext=\"Start typing to see list of matching datasets by title\"\n              fetchOpts={api.fetchParentDatasets}\n              apiUrl={apiUrl}\n              apiKey={apiKey}\n            />\n          </div>\n        </div>\n      )}\n      <div className=\"grid-row margin-top-6\">\n        <button\n          style={{ display: 'none' }}\n          className=\"usa-button usa-button--outline\"\n          type=\"button\"\n          onClick={async () => {\n            await setFieldValue('saveDraft', true);\n            submitForm();\n          }}\n        >\n          Save draft\n        </button>\n        <button\n          className=\"usa-button\"\n          type=\"button\"\n          onClick={async () => {\n            await setFieldValue('saveDraft', false);\n            submitForm();\n          }}\n        >\n          Save and Continue\n        </button>\n      </div>\n      {draftSaved && (\n        <div style={{ marginTop: '1rem' }}>\n          <div className=\"col-md-12 text-mint\">\n            <i>\n              Draft saved:\n              <br />[{draftSaved}]\n            </i>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nAdditionalMetadata.propTypes = {\n  setFieldValue: PropTypes.func,\n  submitForm: PropTypes.func,\n  draftSaved: PropTypes.string,\n  apiUrl: PropTypes.string,\n  apiKey: PropTypes.string,\n  errors: PropTypes.any, // eslint-disable-line\n  values: PropTypes.shape({\n    dataQualityUSG: PropTypes.string,\n    theme: PropTypes.string,\n    describedBy: PropTypes.string,\n    describedByType: PropTypes.string,\n    otherDataDictionaryType: PropTypes.string,\n    accrualPeriodicity: PropTypes.string,\n    landingPage: PropTypes.string,\n    languageSubTag: PropTypes.string,\n    languageRegSubTag: PropTypes.string,\n    primaryITInvestmentUIIUSG: PropTypes.string,\n    references: PropTypes.string,\n    issued: PropTypes.string,\n    systemOfRecordsUSG: PropTypes.string,\n    isPartOf: PropTypes.string,\n    isParent: PropTypes.string,\n    parentDataset: PropTypes.string,\n  }),\n};\n\nexport default AdditionalMetadata;\n","import * as yup from 'yup';\n\nexport default yup.object().shape({\n  dataQualityUSG: yup.string(),\n  category: yup.string(),\n  data_dictionary: yup.string().url(),\n  data_dictionary_type: yup.string(),\n  primary_it_investment_uii: yup\n    .string()\n    .trim()\n    .matches(/^[0-9]{3}-[0-9]{9}$/, 'uii should match format: 000-000000000'),\n  homepage_url: yup.string().url(),\n  related_documents: yup.string(),\n  deribed_by: yup.string().url(),\n  described_by_type: yup.string(),\n  system_of_records: yup.string(),\n  release_date: yup.date().typeError('Please specify a valid release date'),\n});\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Link from '../Link';\nimport WrappedField from '../WrappedField';\nimport resourceFormats from './resource_formats.json';\n\nconst ResourceUpload = (props) => {\n  const { values, errors, setFieldValue, submitForm, draftSaved } = props; // eslint-disable-line\n  const resource = values.resource || {};\n  const { url, name, description, mimetype, format } = resource;\n\n  const [linkToDataIsActive, setLinkToDataActive] = useState(false);\n  const [uploadDataFileIsActive, setUploadDataFileActive] = useState(false);\n\n  const handleFileChange = (event) => {\n    setUploadDataFileActive(!uploadDataFileIsActive);\n    setFieldValue('resource.fileName', event.currentTarget.files[0].name);\n    if (!name) {\n      setFieldValue('resource.name', event.currentTarget.files[0].name);\n    }\n    if (!mimetype) {\n      setFieldValue('resource.mimetype', event.currentTarget.files[0].type);\n    }\n    if (!format) {\n      const detectedFormat =\n        event.currentTarget.files[0].name &&\n        event.currentTarget.files[0].name.split('.').slice(-1)[0];\n      setFieldValue('resource.format', detectedFormat || '');\n    }\n    setFieldValue('resource.upload', event.currentTarget.files[0]);\n  };\n\n  return (\n    <div className=\"usa-form-custom\">\n      <section id=\"section-basic-mega-menu\" className=\"site-component-section\">\n        <h1 className=\"usite-page-title\" id=\"basic-mega-menu\">\n          Resource Upload\n        </h1>\n        <p className=\"site-text-intro\">\n          You can add the URL of the dataset where it is available on the agency website. If you are\n          uploading the dataset itself, please notify the Data.gov team at{' '}\n          <Link target=\"_blank\" href=\"mailto:inventory-help@gsa.gov\">\n            inventory-help@gsa.gov\n          </Link>\n          . You can also add a URL or file of information related to the dataset such as a data\n          dictionary.\n        </p>\n      </section>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          {/* eslint-disable-next-line */}\n          <label className=\"usa-label\">Data</label>\n          {/* eslint-disable-next-line */}\n          {linkToDataIsActive || url ? (\n            <div>\n              <p className=\"usa-helptext\">\n                {`If you are linking to a dataset, please include \"https://\" at the beginning\n                of your URL.`}\n              </p>\n              <WrappedField\n                hidden={!linkToDataIsActive}\n                id=\"url\"\n                name=\"resource.url\"\n                type=\"url\"\n                value={url}\n                onClick={() => {\n                  setFieldValue('resource.url', '');\n                  setLinkToDataActive(false);\n                }}\n                errors={errors}\n              />\n            </div>\n          ) : uploadDataFileIsActive ? (\n            <WrappedField\n              disabled\n              name=\"resource.fileName\"\n              type=\"label\"\n              value={resource.fileName}\n              onClick={() => {\n                setFieldValue('resource.upload', null);\n                setFieldValue('resource.fileName', '');\n                setFieldValue('resource.name', '');\n                setFieldValue('resource.description', '');\n                setFieldValue('resource.format', '');\n                setFieldValue('resource.mimetype', '');\n                setUploadDataFileActive(false);\n              }}\n            />\n          ) : (\n            <>\n              <br />\n              {/* eslint-disable-next-line */}\n              <label tabIndex=\"0\" htmlFor=\"upload\" className=\"usa-button usa-button--base\">\n                <i className=\"fa fa-cloud-upload\" aria-hidden=\"true\" /> Upload data\n              </label>\n              <input id=\"upload\" name=\"resource.upload\" type=\"file\" onChange={handleFileChange} />\n              {/* eslint-disable */}\n              <label\n                tabIndex=\"0\"\n                htmlFor=\"url\"\n                className=\"usa-button usa-button--base\"\n                onClick={() => {\n                  setLinkToDataActive(!linkToDataIsActive);\n                }}\n              >\n                <i className=\"fa fa-link\" aria-hidden=\"true\" /> Link to data\n              </label>\n              {/* eslint-enable */}\n              <p className=\"usa-helptext\">\n                Formats accepted include the following: TXT, HTML, TSV, CSV, ODT, XML, Perl.\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Name\"\n            name=\"resource.name\"\n            type=\"string\"\n            placeholder=\"\"\n            helptext=\"\"\n            value={name}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Description\"\n            name=\"resource.description\"\n            type=\"string\"\n            component=\"textarea\"\n            rows=\"6\"\n            helptext=\"You can use Markdown Formatting here.\"\n            value={description}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Media Type\"\n            name=\"resource.mimetype\"\n            type=\"select\"\n            choices={resourceFormats}\n            value={mimetype}\n          />\n        </div>\n      </div>\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <WrappedField\n            label=\"Format\"\n            name=\"resource.format\"\n            type=\"string\"\n            helptext=\"Examples include: csv, xml, json.  This will be guessed automatically.  Leave blank if you wish.\"\n            value={format}\n          />\n        </div>\n      </div>\n\n      <div className=\"grid-row margin-top-3\">\n        <div className=\"grid-col-12\">\n          <button\n            type=\"button\"\n            className=\"usa-button usa-button--outline\"\n            onClick={() => {\n              setFieldValue('publish', false);\n              setFieldValue('saveDraft', false);\n              setLinkToDataActive(false);\n              setUploadDataFileActive(false);\n              submitForm();\n            }}\n          >\n            Save and add another resource\n          </button>\n        </div>\n      </div>\n\n      {values.savedResources > 0 ? (\n        <div className=\"grid-row margin-top-3\">\n          <div className=\"grid-col-12 text-mint\">\n            <i>\n              Resource saved: [{values.lastSavedResource}] ({values.savedResources} resources saved\n              in total).\n            </i>\n            <br />\n            <i>You can edit any saved resource after clicking &quot;Finish and publish&quot;.</i>\n          </div>\n        </div>\n      ) : (\n        ''\n      )}\n\n      <div className=\"grid-row margin-top-6\">\n        <button\n          style={{ display: 'none' }}\n          className=\"usa-button usa-button--outline\"\n          type=\"button\"\n          onClick={() => {\n            setFieldValue('publish', false);\n            setFieldValue('saveDraft', true);\n            submitForm();\n          }}\n        >\n          Save draft\n        </button>\n        <button\n          className=\"usa-button\"\n          type=\"button\"\n          onClick={() => {\n            setFieldValue('publish', true);\n            submitForm();\n          }}\n        >\n          Finish and publish\n        </button>\n      </div>\n\n      {draftSaved && (\n        <div style={{ marginTop: '1rem' }}>\n          <div className=\"grid-col-12 text-mint\">\n            <i>\n              Draft saved:\n              <br />[{draftSaved}]\n            </i>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nResourceUpload.propTypes = {\n  setFieldValue: PropTypes.func,\n  submitForm: PropTypes.func,\n  draftSaved: PropTypes.string,\n  values: PropTypes.shape({\n    resource: {\n      url: PropTypes.string,\n      upload: PropTypes.any, // eslint-disable-line\n      name: PropTypes.string,\n      description: PropTypes.string,\n      mimetype: PropTypes.string,\n      format: PropTypes.string,\n    },\n    publish: PropTypes.bool,\n    savedResources: PropTypes.number,\n    lastSavedResource: PropTypes.string,\n  }),\n};\n\nexport default ResourceUpload;\n","import * as yup from 'yup';\n\nexport default yup.object().shape({\n  resource: yup.object().shape({\n    name: yup.string(),\n    description: yup.string(),\n    mimetype: yup.string(),\n    format: yup.string(),\n    url: yup\n      .string()\n      .url(\n        'If you are linking to a dataset, please include \"https://\" at the beginning of your URL.'\n      ),\n    upload: yup.mixed(),\n  }),\n});\n","export default {\n  name: '',\n  description: '',\n  url: '',\n  format: '',\n  mimetype: '',\n  upload: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// Navigation block for moving between form pages (steps)\n// Step 1 -- Required metadata\n// Step 2 -- Additional metadata\n// Step 3 -- Resource uploads / links\nconst Navigation = (props) => {\n  const { currentStep, handleSteps } = props;\n  return (\n    <div className=\"app_navigation\" id=\"app_navigation\">\n      <div\n        tabIndex=\"0\"\n        role=\"button\"\n        className={`navsec ${currentStep === 0 ? 'active' : ''}`}\n        onClick={() => handleSteps(0)}\n        onKeyUp={(e) => {\n          if (e.keyCode === 13) {\n            handleSteps(0);\n          }\n        }}\n        id=\"nav-item-first\"\n      >\n        <span>Required Metadata</span>\n      </div>\n      <div\n        tabIndex=\"0\"\n        role=\"link\"\n        className={`navsec ${currentStep === 1 ? 'active' : ''}`}\n        onKeyUp={(e) => {\n          if (e.keyCode === 13) {\n            handleSteps(1);\n          }\n        }}\n        onClick={() => {\n          handleSteps(1);\n        }}\n      >\n        <span>Additional Metadata</span>\n      </div>\n      <div\n        tabIndex=\"0\"\n        role=\"button\"\n        className={`navsec ${currentStep === 2 ? 'active' : ''}`}\n        onKeyUp={(e) => {\n          if (e.keyCode === 13) {\n            handleSteps(2);\n          }\n        }}\n        onClick={() => {\n          handleSteps(2);\n        }}\n      >\n        <span>Resource Upload</span>\n      </div>\n    </div>\n  );\n};\n\nNavigation.propTypes = {\n  currentStep: PropTypes.number.isRequired,\n  handleSteps: PropTypes.func.isRequired,\n};\n\nexport default Navigation;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport '../../css/uswds.css';\n\nconst AlertBox = (props) => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n\n  const { type, errors, message, heading } = props;\n  const parsedErrors =\n    errors &&\n    errors.map((error) => {\n      if (typeof error.message === 'string') {\n        return error;\n      }\n      if (typeof error.message === 'object') {\n        let label = Object.keys(error.message)[0];\n        const errorMessage = error.message[label];\n        label = label === 'url' ? 'Data:' : label;\n        return {\n          label,\n          name: error.name,\n          message: errorMessage,\n        };\n      }\n      return null;\n    });\n  const formErrors =\n    parsedErrors &&\n    parsedErrors.map((error) => (\n      <p key={error.name}>\n        <b>{error.label}</b> {error.message}\n      </p>\n    ));\n  return (\n    <div className=\"usa-prose\">\n      <div className=\"usa-alert__body\">\n        <div className={`usa-alert usa-alert--${type}`}>\n          <div className=\"icon\" />\n          <div className=\"usa-alert__body\">\n            <h3 className=\"usa-alert__heading\">{heading}</h3>\n            <div className=\"usa-alert__text\">\n              {typeof message === 'string' && message}\n              {typeof message === 'object' && message.map((item) => <p key={item}>{item}</p>)}\n              {formErrors}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nAlertBox.propTypes = {\n  errors: PropTypes.array, // eslint-disable-line\n  heading: PropTypes.string,\n  message: PropTypes.string || PropTypes.array,\n  type: PropTypes.string,\n};\n\nexport default AlertBox;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Formik, Form } from 'formik';\nimport RequiredMetadata from '../RequiredMetadata';\nimport RequiredMetadataSchema from '../RequiredMetadata/validationSchema';\nimport RequiredMetadataLabels from '../RequiredMetadata/validationLabels';\nimport defaultRequiredValues from '../RequiredMetadata/defaultValues';\nimport defaultAdditionalValues from '../AdditionalMetadata/defaultValues';\nimport AdditionalMetadata from '../AdditionalMetadata';\nimport AdditionalMetadataSchema from '../AdditionalMetadata/validationSchema';\nimport ResourceUpload from '../ResourceUpload';\nimport ResourceUploadSchema from '../ResourceUpload/validationSchema';\nimport ResourceObject from '../ResourceUpload/ResourceObject';\nimport Navigation from '../Navigation';\nimport AlertBox from '../AlertBox';\nimport Api from '../../api';\nimport '../../css/custom.css';\nimport '../../css/uswds.css';\n\nconst formatErrors = (errors) =>\n  Object.keys(errors).map((name) => {\n    return {\n      name,\n      label: RequiredMetadataLabels[name],\n      message: errors[name],\n    };\n  });\n\nconst formatDate = (date) => {\n  return `${[`0${date.getHours()}`.slice(-2), `0${date.getMinutes()}`.slice(-2)].join(':')}, ${[\n    `0${date.getMonth() + 1}`.slice(-2),\n    `0${date.getDate()}`.slice(-2),\n    date.getFullYear().toString().slice(-2),\n  ].join('-')}`;\n};\n\nconst Heading = (props) => {\n  const { currentStep } = props;\n\n  if (currentStep === 0) {\n    return (\n      <h1 className=\"usite-page-title\" id=\"basic-mega-menu\">\n        Required Metadata\n      </h1>\n    );\n  }\n  if (currentStep === 1) {\n    return (\n      <h1 className=\"usite-page-title\" id=\"basic-mega-menu\">\n        Additional Metadata\n      </h1>\n    );\n  }\n  return '';\n};\n\nconst MetadataForm = (props) => {\n  const { apiUrl, apiKey, ownerOrg, datasetId } = props;\n\n  const [shouldFetch, setShouldFetch] = useState(true);\n  const [curDatasetId, setCurDatasetId] = useState(datasetId); // initial or fetched\n  const [formValues, setFormValues] = useState({\n    ...defaultRequiredValues,\n    ...defaultAdditionalValues,\n    state: 'draft',\n    saveDraft: false,\n  });\n\n  const [currentStep, setCurrentStep] = useState(0);\n  const [alert, setAlert] = useState();\n  const [draftSaved, setDraftSaved] = useState();\n\n  const handleError = (err) => {\n    let message = [];\n    if (err.response) {\n      // client received an error response (5xx, 4xx)\n      if (err.response.data && err.response.data.error) {\n        message = Object.keys(err.response.data.error).map((item) => {\n          if (typeof err.response.data.error[item] === 'object') {\n            return err.response.data.error[item].join('; ');\n          }\n          return err.response.data.error[item];\n        });\n      } else {\n        message = 'Something has failed. Please, try again later or contact site administrator.';\n      }\n    } else if (err.request) {\n      // client never received a response, or request never left. Likely it's a network issue.\n      message =\n        'Please, check your connection or try again later. If the issue persists, contact site administrator.';\n    } else {\n      // anything else - not a axios/network issue.\n      message = 'Something has failed. Please, try again later or contact site administrator.';\n    }\n\n    setAlert(<AlertBox type=\"error\" heading=\"Error saving metadata\" message={message} />);\n    window.scrollTo(0, 0);\n  };\n\n  if (curDatasetId && shouldFetch) {\n    setShouldFetch(false);\n    Api.fetchDataset(curDatasetId, apiUrl, apiKey)\n      .then((result) => {\n        const apiRes = Object.assign({}, result);\n        apiRes.description = result.notes;\n        setFormValues(Object.assign({}, formValues, apiRes));\n        setCurDatasetId(apiRes.id);\n      })\n      .catch(handleError);\n  }\n\n  // render metadata form\n  return (\n    <div className=\"grid-container\">\n      <Navigation currentStep={currentStep} handleSteps={setCurrentStep} />\n      <Heading currentStep={currentStep} />\n      {alert}\n\n      {/* ---------- PAGE 1 -- REQUIRED METADATA ---------- */}\n      {currentStep === 0 && (\n        <Formik\n          initialValues={formValues}\n          enableReinitialize=\"true\"\n          validateOnChange={false}\n          validateOnBlur={false}\n          validateOnMount={false}\n          onSubmit={(values) => {\n            // Clear alert box:\n            setAlert();\n            // update or create dataset:\n            if (curDatasetId) {\n              Api.updateDataset(curDatasetId, values, apiUrl, apiKey)\n                .then((res) => {\n                  setFormValues(Object.assign({}, res, { description: res.notes }));\n                  if (values.saveDraft) {\n                    setDraftSaved(new Date());\n                  } else {\n                    setAlert(<AlertBox type=\"success\" heading=\"Dataset saved successfully\" />);\n                    setCurrentStep(1);\n                    window.scrollTo(0, 0);\n                  }\n                })\n                .catch(handleError);\n            } else {\n              Api.createDataset(values, apiUrl, apiKey)\n                .then((res) => {\n                  setFormValues(res);\n                  setCurDatasetId(res.id);\n                  if (values.saveDraft) {\n                    setDraftSaved(new Date());\n                  } else {\n                    setAlert(<AlertBox type=\"success\" heading=\"Dataset saved successfully\" />);\n                    setCurrentStep(1);\n                    window.scrollTo(0, 0);\n                  }\n                })\n                .catch(handleError);\n            }\n          }}\n          validate={() => {\n            // Note this isn't validating anything. We use \"validationSchema\"\n            // property to validate form values against \"yup\" schema. This\n            // method is needed to make sure that alert box is cleared on\n            // validation so we don't confuse users with multiple alert boxes.\n            setAlert();\n          }}\n          validationSchema={RequiredMetadataSchema}\n        >\n          {({ values, handleSubmit, errors, setFieldValue, submitForm }) => {\n            return (\n              <div>\n                {errors && Object.keys(errors).length > 0 && (\n                  <div>\n                    <AlertBox\n                      type=\"error\"\n                      heading=\"This form contains invalid entries\"\n                      errors={formatErrors(errors)}\n                    />\n                  </div>\n                )}\n                <Form onSubmit={handleSubmit}>\n                  <div>\n                    <RequiredMetadata\n                      apiKey={apiKey}\n                      apiUrl={apiUrl}\n                      ownerOrg={ownerOrg}\n                      currentStep={0}\n                      fetchDatasetsOpts=\"false\"\n                      values={values || {}}\n                      errors={errors}\n                      draftSaved={draftSaved ? formatDate(draftSaved) : undefined}\n                      setFieldValue={setFieldValue}\n                      submitForm={submitForm}\n                    />\n                  </div>\n                </Form>\n              </div>\n            );\n          }}\n        </Formik>\n      )}\n\n      {/* ---------- PAGE 2 -- ADDITIONAL METADATA ---------- */}\n      {currentStep === 1 && (\n        <Formik\n          initialValues={formValues}\n          enableReinitialize=\"true\"\n          validateOnChange={false}\n          validateOnBlur={false}\n          onSubmit={(values) => {\n            // Clear alert box:\n            setAlert();\n            const id = formValues && formValues.id;\n            setFormValues(Object.assign({}, formValues, values));\n            if (id) {\n              Api.updateDataset(id, values, apiUrl, apiKey)\n                .then(() => {\n                  if (values.saveDraft) {\n                    setDraftSaved(new Date());\n                  } else {\n                    setAlert(<AlertBox type=\"success\" heading=\"Dataset saved successfully\" />);\n                    setCurrentStep(2);\n                    window.scrollTo(0, 0);\n                  }\n                })\n                .catch(handleError);\n            } else {\n              setAlert(\n                <AlertBox\n                  type=\"error\"\n                  heading=\"No valid metadata saved in step 1.\"\n                  message=\"Please complete complete step one before submitting step 2.\"\n                />\n              );\n              window.scrollTo(0, 0);\n            }\n          }}\n          validate={() => {\n            // Note this isn't validating anything. We use \"validationSchema\"\n            // property to validate form values against \"yup\" schema. This\n            // method is needed to make sure that alert box is cleared on\n            // validation so we don't confuse users with multiple alert boxes.\n            setAlert();\n          }}\n          validationSchema={AdditionalMetadataSchema}\n        >\n          {({ values, handleSubmit, errors, setFieldValue, submitForm }) => {\n            return (\n              <div>\n                {errors && Object.keys(errors).length > 0 && (\n                  <div>\n                    <AlertBox\n                      type=\"error\"\n                      heading=\"This form contains invalid entries\"\n                      errors={formatErrors(errors)}\n                    />\n                  </div>\n                )}\n                <Form onSubmit={handleSubmit}>\n                  <div>\n                    <AdditionalMetadata\n                      apiKey={apiKey}\n                      apiUrl={apiUrl}\n                      ownerOrg={ownerOrg}\n                      currentStep={1}\n                      fetchDatasetsOpts=\"false\"\n                      values={values || {}}\n                      errors={errors}\n                      draftSaved={draftSaved ? formatDate(draftSaved) : undefined}\n                      setFieldValue={setFieldValue}\n                      submitForm={submitForm}\n                    />\n                  </div>\n                </Form>\n              </div>\n            );\n          }}\n        </Formik>\n      )}\n      {/* ---------- PAGE 3 -- RESOURSE UPLOAD ---------- */}\n      {currentStep === 2 && (\n        <Formik\n          initialValues={{\n            resource: JSON.parse(JSON.stringify(ResourceObject)),\n            publish: true,\n            savedResources: 0,\n            lastSavedResource: null,\n            saveDraft: false,\n          }}\n          enableReinitialize=\"true\"\n          validateOnChange={false}\n          validateOnBlur={false}\n          onSubmit={(values, { setFieldValue }) => {\n            // Clear alert box:\n            setAlert();\n            // Check if resource should be created, eg, user added any metadata:\n            const resourceMetadataChanged =\n              JSON.stringify(ResourceObject) !== JSON.stringify(values.resource);\n            if (curDatasetId) {\n              const apiUrlObject = new URL(apiUrl);\n              const datasetPageUrl = `${apiUrlObject.origin}/dataset/${curDatasetId}`;\n              if (resourceMetadataChanged) {\n                Api.createResource(curDatasetId, values.resource, apiUrl, apiKey)\n                  .then((res) => {\n                    if (res.status === 200) {\n                      if (values.publish) {\n                        // Update dataset state: 'draft' => 'active'\n                        Api.patchDataset(curDatasetId, { state: 'active' }, apiUrl, apiKey).then(\n                          (response) => {\n                            if (response.status === 200) {\n                              // Redirect to dataset page\n                              window.location.replace(datasetPageUrl);\n                            }\n                          }\n                        );\n                      } else if (values.saveDraft) {\n                        setDraftSaved(new Date());\n                      } else {\n                        setDraftSaved(new Date());\n                        setFieldValue('savedResources', values.savedResources + 1);\n                        setFieldValue(\n                          'lastSavedResource',\n                          values.resource.url || values.resource.name\n                        );\n                        setFieldValue('resource', JSON.parse(JSON.stringify(ResourceObject)));\n                      }\n                    }\n                  })\n                  .catch(handleError);\n              } else if (values.publish) {\n                // Update dataset state: 'draft' => 'active'\n                Api.patchDataset(curDatasetId, { state: 'active' }, apiUrl, apiKey)\n                  .then((res) => {\n                    if (res.status === 200) {\n                      // Redirect to dataset page\n                      window.location.replace(datasetPageUrl);\n                    }\n                  })\n                  .catch(handleError);\n              }\n            } else {\n              setAlert(\n                <AlertBox\n                  type=\"error\"\n                  heading=\"No valid metadata saved in previous steps.\"\n                  message=\"Please complete previous steps before submitting resource(s).\"\n                />\n              );\n            }\n          }}\n          validate={() => {\n            // Note this isn't validating anything. We use \"validationSchema\"\n            // property to validate form values against \"yup\" schema. This\n            // method is needed to make sure that alert box is cleared on\n            // validation so we don't confuse users with multiple alert boxes.\n            setAlert();\n          }}\n          validationSchema={ResourceUploadSchema}\n          render={({ values, errors, handleSubmit, setFieldValue, submitForm }) => (\n            <div className=\"\">\n              {errors && Object.keys(errors).length > 0 && (\n                <div>\n                  <AlertBox\n                    type=\"error\"\n                    heading=\"This form contains invalid entries\"\n                    errors={formatErrors(errors)}\n                  />\n                </div>\n              )}\n              <Form onSubmit={handleSubmit}>\n                <ResourceUpload\n                  values={values}\n                  errors={errors}\n                  draftSaved={draftSaved ? formatDate(draftSaved) : undefined}\n                  setFieldValue={setFieldValue}\n                  submitForm={submitForm}\n                />\n              </Form>\n            </div>\n          )}\n        />\n      )}\n    </div>\n  );\n};\n\nMetadataForm.propTypes = {\n  apiUrl: PropTypes.string.isRequired,\n  apiKey: PropTypes.string.isRequired,\n  ownerOrg: PropTypes.string, // required if creating new metadata\n  datasetId: PropTypes.string,\n};\n\nexport default MetadataForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MetadataForm from './components/MetadataForm';\n\nconst App = (props) => {\n  const { apiUrl, apiKey, ownerOrg, datasetId } = props;\n  console.log({ apiUrl, apiKey, ownerOrg }); // eslint-disable-line\n  return (\n    <div className=\"App\">\n      <MetadataForm apiUrl={apiUrl} apiKey={apiKey} ownerOrg={ownerOrg} datasetId={datasetId} />\n    </div>\n  );\n};\n\nApp.propTypes = {\n  apiUrl: PropTypes.string.isRequired,\n  apiKey: PropTypes.string.isRequired,\n  ownerOrg: PropTypes.string, // required if creating new dataset\n  datasetId: PropTypes.string,\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst root = document.getElementById('root');\nconst apiUrl = root.getAttribute('data-apiUrl');\nconst apiKey = root.getAttribute('data-apiKey');\nconst ownerOrg = root.getAttribute('data-ownerOrg');\nconst datasetId = root.getAttribute('data-datasetId');\n\nReactDOM.render(\n  <React.StrictMode>\n    <App apiUrl={apiUrl} apiKey={apiKey} ownerOrg={ownerOrg} datasetId={datasetId} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
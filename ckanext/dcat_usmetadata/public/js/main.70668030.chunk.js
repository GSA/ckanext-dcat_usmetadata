(this["webpackJsonpmetadata-app"]=this["webpackJsonpmetadata-app"]||[]).push([[0],{16:function(e,a,t){},25:function(e,a,t){},31:function(e,a,t){e.exports=t(63)},36:function(e,a,t){},62:function(e,a,t){},63:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(26),c=t.n(l),s=(t(36),t(2)),i=t(4),o=t(30);function u(){return(u=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function d(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var m=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256    s26.629,132.667,74.98,181.02C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98    C485.371,388.667,512,324.38,512,256S485.371,123.333,437.02,74.98z M256,70c30.327,0,55,24.673,55,55c0,30.327-24.673,55-55,55    c-30.327,0-55-24.673-55-55C201,94.673,225.673,70,256,70z M326,420H186v-30h30V240h-30v-30h110v180h30V420z",fill:"#0050D8"}))),p=r.a.createElement("g",null),h=r.a.createElement("g",null),g=r.a.createElement("g",null),f=r.a.createElement("g",null),b=r.a.createElement("g",null),v=r.a.createElement("g",null),E=r.a.createElement("g",null),y=r.a.createElement("g",null),_=r.a.createElement("g",null),N=r.a.createElement("g",null),w=r.a.createElement("g",null),O=r.a.createElement("g",null),x=r.a.createElement("g",null),S=r.a.createElement("g",null),j=r.a.createElement("g",null),C=function(e){var a=e.svgRef,t=e.title,n=d(e,["svgRef","title"]);return r.a.createElement("svg",u({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",width:"512px",height:"512px",ref:a},n),t?r.a.createElement("title",null,t):null,m,p,h,g,f,b,v,E,y,_,N,w,O,x,S,j)},k=r.a.forwardRef((function(e,a){return r.a.createElement(C,u({svgRef:a},e))})),A=(t.p,t(16),function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],u=e.name,d=e.label,m=e.children,p=e.helptext,h=e.required,g=e.id,f=e.disabled,b=e.infoText,v=e.onClick,E=Object(o.a)(e,["name","label","children","helptext","required","id","disabled","infoText","onClick"]),y=E.choices||[],_=E.type||"string",N="";return N=f?"disabled":"",r.a.createElement("div",null,r.a.createElement("label",{className:"usa-label",htmlFor:g},d,d&&h&&r.a.createElement("span",null,"*"),b&&r.a.createElement("div",{className:"tooltip ".concat(l?"show":"")},r.a.createElement(k,{height:"20px",width:"20px",style:{marginLeft:".5em"},onClick:function(){return c(!l)}}),r.a.createElement("span",{className:"tooltiptext"},r.a.createElement("span",{tabIndex:0,className:"close",onClick:function(){return c(!1)},role:"button",onKeyDown:function(){return c(!1)}},r.a.createElement("span",{className:"close-tag"},"\xd7")),r.a.createElement("h3",null,d),r.a.createElement("p",null,b)))),r.a.createElement("div",{className:"usa-helptext ".concat(N)},p),v?r.a.createElement("button",{className:"clear-button",onClick:v,type:"button"},"Remove"):"",{string:r.a.createElement(i.a,Object.assign({className:"usa-input ".concat(N),disabled:f,id:g,name:u},E)),url:r.a.createElement(i.a,Object.assign({className:"usa-input ".concat(N),disabled:f,id:g,name:u},E)),select:r.a.createElement(i.a,Object.assign({},E,{id:g,name:u,className:"usa-select ".concat(N),component:"select",defaultValue:""}),r.a.createElement("option",{value:""},"-Select-"),y.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),radio:r.a.createElement("div",null,r.a.createElement(i.a,Object.assign({},E,{id:g,name:u,className:"usa-radio__input",component:"radio"})),r.a.createElement("label",{className:"usa-radio__label",htmlFor:g},d)),date:r.a.createElement("div",null,r.a.createElement("input",Object.assign({},E,{id:g,name:u,className:"usa-input ".concat(N),disabled:f})))}[_],m)}),I=t(7),P=t.n(I),R=t(9),q=t(29),K=t.n(q),D=t(8),T=t.n(D),U=["accessLevel","accrualPeriodicity","bureauCode","category","contactEmail","contactPoint","dataQuality","dataLevel","describedBy","describedByType","frequency","homePage","identifier","isPartOf","issued","landingPage","language","license","master","organization","publisher","primaryITInvestmentUIIUSG","programCode","references","rights","spatial","subagency","systemOfRecordsUSG","temporal","theme"],M=function(e){return e.split(" ").join("_").replace(/\W/g,"").toLowerCase()},L=function(e){return JSON.parse(JSON.stringify(e))},z=function(e){var a,t=L(e);return a=e?U.map((function(a){return{key:a,value:e[a]||""}})):[{}],t.extras=a,t},B=function(e){var a=L(e);return a.extras.forEach((function(e){a[e.key]=e.value})),a},F=function(e){var a=L(e);if(e.description&&(a.notes=e.description),e.license_others&&(a.license=e.license_others,delete a.license_others),e.rights_desc&&(a.rights=e.rights_desc,delete a.rights_desc),e.spatial_location_desc&&(a.spatial=e.spatial_location_desc,delete a.spatial_location_desc),e.temporal_start_date){var t=new Date(e.temporal_start_date).toISOString(),n=new Date(e.temporal_end_date).toISOString();a.temporal="".concat(t,"/").concat(n),delete a.temporal_start_date,delete a.temporal_end_date}return a},V=function(e){var a=L(e);if(e.license&&(a.license_others=e.license,a.license="Others"),e.rights&&(a.rights_desc=e.rights,a.rights="false"),e.spatial&&(a.spatial_location_desc=e.spatial,a.spatial=!0),e.temporal){var t=e.temporal.split("/"),n=Object(s.a)(t,2);a.temporal_start_date=n[0],a.temporal_end_date=n[1],a.temporal="true"}return a},W={createDataset:function(e,a,t,n){var r=L(a);r.modified=new Date,r.notes=a.description,r.bureauCode="015:11",r.programCode="015:001";var l=z(F(a));return l.owner_org=e,l.name=M(a.title),l.url=a.url,T.a.post("".concat(t,"package_create"),l,{headers:{"X-CKAN-API-Key":n}})},updateDataset:function(e,a,t,n){var r=z(F(a));return r.id=e,T.a.post("".concat(t,"package_update"),r,{headers:{"X-CKAN-API-Key":n}})},fetchDataset:function(){var e=Object(R.a)(P.a.mark((function e(a,t,n){var r,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get("".concat(t,"package_show?id=").concat(a),{headers:{"X-CKAN-API-Key":n}});case 3:return r=e.sent,l=V(B(r.data.result)),r.data.result=l,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a,t,n){return e.apply(this,arguments)}}(),fetchTags:function(){var e=Object(R.a)(P.a.mark((function e(a,t,n){var r,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(t,"tag_list?query=").concat(a),e.next=4,T.a.get(r,{headers:{"X-CKAN-API-Key":n}});case 4:return l=e.sent,e.abrupt("return",l.data.result.map((function(e,a){return{id:a,name:e}})));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t,n){return e.apply(this,arguments)}}(),createResource:function(e,a,t,n){var r=L(a);return r.package_id=e,a.upload&&(r.mime_type=a.upload.type,r.size=a.upload.size),T.a.post("".concat(t,"resource_create"),a,{headers:{"X-CKAN-API-Key":n}})},helpers:{encodeExtras:z,decodeExtras:B,encodeSupplementalValues:F,decodeSupplementalValues:V,clone:L,safeName:M}},X=(t(62),function(e){var a=e.tags,t=e.name,l=e.helptext,c=e.apiUrl,o=e.apiKey,u=Object(n.useState)([]),d=Object(s.a)(u,2),m=d[0],p=d[1];return r.a.createElement(i.b,{name:t,render:function(e){return r.a.createElement("div",{className:"react-tags-input grid-col-12"},r.a.createElement("div",{id:"tags-error",className:"error-msg hidden",type:"string",placeholder:"",value:""},"Tags are required"),l,r.a.createElement(K.a,{tags:a,suggestions:m,allowNew:!0,ref:r.a.createRef(),onAddition:e.push,onDelete:e.remove,className:"usa-input",onInput:function(){var e=Object(R.a)(P.a.mark((function e(a){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.fetchTags(a,c,o);case 3:t=e.sent,p(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("Unable to fetch tags",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()}))}})}),J=function(e){var a=e.children;return r.a.createElement("p",{className:"usa-helptext"},a)},G=function(e){var a=e.label,t=e.selected,n=e.value,l=e.styleClass,c=e.id,s=e.name,i=e.handleRadio;return r.a.createElement("div",{className:"form-group ".concat(l)},r.a.createElement("input",{type:"radio",className:"usa-radio__input",value:n,defaultChecked:t,onChange:i,name:s,id:c}),r.a.createElement("label",{className:"usa-radio__label",htmlFor:c},a))};G.defaultProps={styleClass:""};var Q=G,Y=function(e){var a=e.values,t=e.currentStep,l=e.apiUrl,c=e.apiKey,i=Object(n.useState)(a.rights),o=Object(s.a)(i,2),u=o[0],d=o[1],m=Object(n.useState)(a.license),p=Object(s.a)(m,2),h=p[0],g=p[1],f=Object(n.useState)(a.spatial),b=Object(s.a)(f,2),v=b[0],E=b[1],y=Object(n.useState)(a.temporal),_=Object(s.a)(y,2),N=_[0],w=_[1],O=Object(n.useState)(!0),x=Object(s.a)(O,2),S=x[0],j=x[1],C=function(e){return e?e.replace(/\s+/g,"-").toLowerCase():""},k=function(e){return r.a.createElement(J,null,e)},I=function(){return"".concat(l.replace("api/3/action/",""),"dataset/")};if(1!==t)return null;var P={title:r.a.createElement(J,null,"Use ",r.a.createElement("a",{href:"https://plainlanguage.gov/"},"everyday language")," to make the dataset easy to find and understand"),description:r.a.createElement(J,null,"Write a description (like an abstract) with enough detail to help a user quickly decide if the asset is of interest. You can use"," ",r.a.createElement("a",{href:"https://www.markdownguide.org/basic-syntax/"},"Markdown Formatting")," here."),select:r.a.createElement(J,null,"If you do not see the Publisher for your dataset listed, please contact"," ",r.a.createElement("a",{href:"mailto:inventory-help@gsa.gov"},"inventory-help@gsa.gov")," for further assistance. Start typing to add tags.")};return r.a.createElement("div",{className:"usa-form-custom"},r.a.createElement("section",{id:"section-basic-mega-menu",className:"site-component-section"},r.a.createElement("h1",{className:"usite-page-title",id:"basic-mega-menu"},"Required Metadata"),r.a.createElement("p",{className:"site-text-intro"},"The following fields are required metadata for each dataset in an agency\u2019s inventory (",r.a.createElement("a",{href:"https://www.congress.gov/115/plaws/publ435/PLAW-115publ435.pdf"},"per Section 202 of the OPEN Government Data Act)")," ","For more information about the form fields, consult the",r.a.createElement("a",{href:"https://resources.data.gov/resources/dcat-us/"},"DCAT-US Schema."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"grid-col-12"},r.a.createElement(A,{label:"Title",name:"title",type:"string",placeholder:"",helptext:P.title,value:a.title,required:!0}),r.a.createElement("div",null,r.a.createElement(A,{name:"url",type:"string",style:{display:S?"none":"inline"},value:a.url||"".concat(I()).concat(C(a.title))}),r.a.createElement("span",{className:"dataset_url",style:{display:S?"inline":"none"}},"".concat(I()).concat(C(a.title))),r.a.createElement("button",{type:"button",className:"usa-button dataset_url_edit",style:{display:S?"inline":"none"},onClick:function(){j(!1)}},"Edit")))),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Description",name:"description",type:"string",component:"textarea",rows:"6",helptext:P.description,value:a.description,required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"usa-label"},"Tags*"),r.a.createElement(X,{id:"tags-autocomplete-input",tags:a.tags,apiUrl:l,apiKey:c,name:"tags",titleField:"name",required:!0,placeholderText:"Start typing to search",helptext:k("Use both technical and non-technical terms to help users find your dataset.")})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Publisher",name:"publisher",type:"select",choices:["Publisher 1 ","Publisher 2","Publisher 3","Publisher 4"],required:!0,className:"error-msg",helptext:P.select,infoText:"The publishing entity (e.g. your agency) and optionally their parent organization(s)."})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Sub Agency",name:"subagency",type:"select",choices:["Sub Agency 1 ","Sub Agency 2","Sub Agency 3","Sub-Agency 4"],className:"error-msg"})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Contact Name",name:"contactPoint",type:"string",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Contact Email",name:"contactEmail",type:"string",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Unique ID",name:"identifier",type:"string",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Public Access level",name:"accessLevel",type:"select",choices:["public","restricted public","non-public"],className:"error-msg",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"Meets Agency Data Quality",name:"dataQuality",type:"select",choices:["Yes","No"],className:"error-msg",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(A,{label:"License",name:"license",type:"select",choices:["MIT","Open Source License","Others"],className:"error-msg",value:h,onChange:function(e){return g(e.target.value)},required:!0}),r.a.createElement(A,{name:"license_others",type:"string",helptext:k("If you selected \u201cOther\u201d, please specify the name of your License*'"),disabled:"Others"!==h,required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement(Q,{label:"My dataset is public",name:"rights",value:u,selected:!!u,handleRadio:function(){d(!0)},id:"rights_option_1"}),r.a.createElement(Q,{label:"My dataset is not public",name:"rights",value:u,selected:!u,handleRadio:function(){d(!1)},id:"rights_option_2"}),r.a.createElement(A,{name:"rights_desc",type:"string",value:a.rights_desc,helptext:k("If your dataset is not public, please add an explanation of rights and feel free to include any instructions on restrictions, or how to access a restricted file (max 255 characters)*"),disabled:!!u})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"usa-label"},"Relevant Location*")," ",r.a.createElement("br",null),r.a.createElement(Q,{label:"My dataset does not have a spatial component",name:"spatial",value:v,selected:!v,handleRadio:function(){return E(!1)},id:"spatial_option_1"}),r.a.createElement(Q,{label:"My dataset does have a spatial component",name:"spatial",value:v,selected:!!v,handleRadio:function(){return E(!0)},id:"spatial_option_2"}),r.a.createElement(A,{name:"spatial_location_desc",type:"string",value:a.spatial_location_desc,helptext:k("If your dataset has a spatial component, please provide location such as place name or latitude/longitude pairs above*"),disabled:!v})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"usa-label"},"Temporal*")," ",r.a.createElement("br",null),r.a.createElement(Q,{label:"My dataset does not have a start and end date for the applicability of data",name:"temporal",value:N,selected:!N,handleRadio:function(){return w(!1)},id:"temporal_option_1"}),r.a.createElement(Q,{label:"My dataset has a start and end date for the applicability of data",name:"temporal",value:N,selected:!!N,handleRadio:function(){w(!0)},id:"temporal_option_2"}),r.a.createElement(A,{name:"temporal_start_date",type:"date",helptext:k("If your dataset has a temporal component, please provide start date for applicability of data above*"),disabled:!N}),r.a.createElement(A,{name:"temporal_end_date",type:"date",helptext:k("If your dataset has a temporal component, please provide start date for applicability of data above*"),disabled:!N})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"usa-button usa-button--outline"},"Save as draft"),r.a.createElement("button",{className:"usa-button",type:"submit"},"Save and Continue")))},H={title:"",description:"",publisher:"",subagency:"",public_access_level:"",data_quality:"",license:"",license_others:"",identifier:"",rights:"false",rights_desc:"",spatial:"false",spatial_location:"false",temporal:"false",temporal_start_date:"",temporal_end_date:"",contact_name:"",contact_email:"",unique_id:"",url:""},$=function(e){var a=e.currentStep,t=e.handleSteps;return r.a.createElement("div",{className:"app_navigation",id:"app_navigation"},r.a.createElement("div",{tabIndex:"0",role:"button",className:"navsec ".concat(0===a?"active":""),onClick:function(){return t(0)},onKeyDown:function(){return t(0)},id:"nav-item-first"},r.a.createElement("span",null,"Required Metadata")),r.a.createElement("div",{tabIndex:"0",role:"link",className:"navsec ".concat(1===a?"active":""),onKeyDown:function(){t(1)},onClick:function(){t(1)}},r.a.createElement("span",null,"Additional Metadata")),r.a.createElement("div",{tabIndex:"0",role:"button",className:"navsec ".concat(2===a?"active":""),onKeyDown:function(){t(2)},onClick:function(){t(2)}},r.a.createElement("span",null,"Resource Upload")))},Z=(t(25),function(e){var a=e.type,t=e.errors,n=e.message,l=e.heading,c=t&&Object.keys(t).map((function(e){return r.a.createElement("p",{key:e},r.a.createElement("b",null,e)," ",t[e])}));return r.a.createElement("div",{className:"usa-prose"},r.a.createElement("div",{className:"usa-alert__body"},r.a.createElement("div",{className:"usa-alert usa-alert--".concat(a)},r.a.createElement("div",{className:"icon"}),r.a.createElement("div",{className:"usa-alert__body"},r.a.createElement("h3",{className:"usa-alert__heading"},l),r.a.createElement("div",{className:"usa-alert__text"},n,c)))))}),ee=function(e){var a=e.apiUrl,t=e.apiKey,l=e.ownerOrg,c=Object(n.useState)(H),o=Object(s.a)(c,2),u=o[0],d=o[1],m=Object(n.useState)(0),p=Object(s.a)(m,2),h=p[0],g=p[1],f=Object(n.useState)(),b=Object(s.a)(f,2),v=b[0],E=b[1];return r.a.createElement("div",{className:"grid-container"},r.a.createElement($,{currentStep:h,handleSteps:g}),v,r.a.createElement(i.d,{initialValues:u,enableReinitialize:"true",validateOnChange:!1,validateOnBlur:!1,onSubmit:function(e){W.createDataset(l,e,a,t).then((function(e){E(r.a.createElement(Z,{type:"success",heading:"Dataset updated successfully"})),d(e),window.scrollTo(0,0)})).catch((function(e){console.error("CREATE DATASET ERROR",e),window.scrollTo(0,0)}))}},(function(e){var n=e.values,c=e.errors,s=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement(i.c,{onSubmit:s},0===h&&r.a.createElement("div",null,r.a.createElement(Y,{apiKey:t,apiUrl:a,ownerOrg:l,currentStep:1,fetchDatasetsOpts:"false",values:n,errors:c}))))})))},ae=function(e){var a=e.apiUrl,t=e.apiKey,n=e.ownerOrg;return r.a.createElement("div",{className:"App"},r.a.createElement(ee,{apiUrl:a,apiKey:t,ownerOrg:n}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te,ne,re,le=document.getElementById("root");le?(te=le.getAttribute("data-apiUrl"),ne=le.getAttribute("data-apiKey"),re=le.getAttribute("data-ownerOrg")):(te="localhost:5000/api/3/action/",ne="123",re="123"),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,{apiUrl:te,apiKey:ne,ownerOrg:re})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.70668030.chunk.js.map